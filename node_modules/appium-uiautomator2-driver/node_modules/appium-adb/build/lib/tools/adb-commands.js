"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
require("source-map-support/register");
var _logger = _interopRequireDefault(require("../logger.js"));
var _helpers = require("../helpers.js");
var _path = _interopRequireDefault(require("path"));
var _lodash = _interopRequireDefault(require("lodash"));
var _support = require("@appium/support");
var _os = require("os");
var _logcat = _interopRequireDefault(require("../logcat"));
var _asyncbox = require("asyncbox");
var _teen_process = require("teen_process");
var _bluebird = _interopRequireDefault(require("bluebird"));
const MAX_SHELL_BUFFER_LENGTH = 1000;
const NOT_CHANGEABLE_PERM_ERROR = /not a changeable permission type/i;
const IGNORED_PERM_ERRORS = [NOT_CHANGEABLE_PERM_ERROR, /Unknown permission/i];
const MAX_PGREP_PATTERN_LEN = 15;
const HIDDEN_API_POLICY_KEYS = ['hidden_api_policy_pre_p_apps', 'hidden_api_policy_p_apps', 'hidden_api_policy'];
const PID_COLUMN_TITLE = 'PID';
const PROCESS_NAME_COLUMN_TITLE = 'NAME';
const PS_TITLE_PATTERN = new RegExp(`^(.*\\b${PID_COLUMN_TITLE}\\b.*\\b${PROCESS_NAME_COLUMN_TITLE}\\b.*)$`, 'm');
const MIN_API_LEVEL_WITH_PERMS_SUPPORT = 23;
const methods = {};
methods.shellChunks = async function shellChunks(argTransformer, args) {
  const commands = [];
  let cmdChunk = [];
  for (const arg of args) {
    const nextCmd = argTransformer(arg);
    if (!_lodash.default.isArray(nextCmd)) {
      throw new Error('Argument transformer must result in an array');
    }
    if (_lodash.default.last(nextCmd) !== ';') {
      nextCmd.push(';');
    }
    if (nextCmd.join(' ').length + cmdChunk.join(' ').length >= MAX_SHELL_BUFFER_LENGTH) {
      commands.push(cmdChunk);
      cmdChunk = [];
    }
    cmdChunk = [...cmdChunk, ...nextCmd];
  }
  if (!_lodash.default.isEmpty(cmdChunk)) {
    commands.push(cmdChunk);
  }
  _logger.default.debug(`Got the following command chunks to execute: ${JSON.stringify(commands)}`);
  let lastError = null;
  for (const cmd of commands) {
    try {
      await this.shell(cmd);
    } catch (e) {
      lastError = e;
    }
  }
  if (lastError) {
    throw lastError;
  }
};
methods.getAdbWithCorrectAdbPath = async function getAdbWithCorrectAdbPath() {
  this.executable.path = await this.getSdkBinaryPath('adb');
  return this.adb;
};
methods.initAapt = async function initAapt() {
  await this.getSdkBinaryPath('aapt');
};
methods.initAapt2 = async function initAapt2() {
  await this.getSdkBinaryPath('aapt2');
};
methods.initZipAlign = async function initZipAlign() {
  await this.getSdkBinaryPath('zipalign');
};
methods.initBundletool = async function initBundletool() {
  try {
    this.binaries.bundletool = await _support.fs.which('bundletool.jar');
  } catch (err) {
    throw new Error('bundletool.jar binary is expected to be present in PATH. ' + 'Visit https://github.com/google/bundletool for more details.');
  }
};
methods.getApiLevel = async function getApiLevel() {
  if (!_lodash.default.isInteger(this._apiLevel)) {
    try {
      const strOutput = await this.getDeviceProperty('ro.build.version.sdk');
      let apiLevel = parseInt(strOutput.trim(), 10);
      const charCodeQ = 'q'.charCodeAt(0);
      const apiLevelDiff = apiLevel - 28;
      const codename = String.fromCharCode(charCodeQ + apiLevelDiff);
      if (apiLevelDiff >= 0 && (await this.getPlatformVersion()).toLowerCase() === codename) {
        _logger.default.debug(`Release version is ${codename.toUpperCase()} but found API Level ${apiLevel}. Setting API Level to ${apiLevel + 1}`);
        apiLevel++;
      }
      this._apiLevel = apiLevel;
      _logger.default.debug(`Device API level: ${this._apiLevel}`);
      if (isNaN(this._apiLevel)) {
        throw new Error(`The actual output '${strOutput}' cannot be converted to an integer`);
      }
    } catch (e) {
      throw new Error(`Error getting device API level. Original error: ${e.message}`);
    }
  }
  return this._apiLevel;
};
methods.getPlatformVersion = async function getPlatformVersion() {
  _logger.default.info('Getting device platform version');
  try {
    return await this.getDeviceProperty('ro.build.version.release');
  } catch (e) {
    throw new Error(`Error getting device platform version. Original error: ${e.message}`);
  }
};
methods.isDeviceConnected = async function isDeviceConnected() {
  let devices = await this.getConnectedDevices();
  return devices.length > 0;
};
methods.mkdir = async function mkdir(remotePath) {
  return await this.shell(['mkdir', '-p', remotePath]);
};
methods.isValidClass = function isValidClass(classString) {
  return (0, _helpers.matchComponentName)(classString);
};
methods.resolveLaunchableActivity = async function resolveLaunchableActivity(pkg, opts = {}) {
  const {
    preferCmd = true
  } = opts;
  if (!preferCmd || (await this.getApiLevel()) < 24) {
    const stdout = await this.shell(['dumpsys', 'package', pkg]);
    const names = (0, _helpers.parseLaunchableActivityNames)(stdout);
    if (_lodash.default.isEmpty(names)) {
      _logger.default.debug(stdout);
      throw new Error(`Unable to resolve the launchable activity of '${pkg}'. Is it installed on the device?`);
    }
    if (names.length === 1) {
      return names[0];
    }
    const tmpRoot = await _support.tempDir.openDir();
    try {
      const tmpApp = await this.pullApk(pkg, tmpRoot);
      const {
        apkActivity
      } = await this.packageAndLaunchActivityFromManifest(tmpApp);
      return apkActivity;
    } catch (e) {
      _logger.default.debug(e.stack);
      _logger.default.warn(`Unable to resolve the launchable activity of '${pkg}'. ` + `The very first match of the dumpsys output is going to be used. ` + `Original error: ${e.message}`);
      return names[0];
    } finally {
      await _support.fs.rimraf(tmpRoot);
    }
  }
  const {
    stdout,
    stderr
  } = await this.shell(['cmd', 'package', 'resolve-activity', '--brief', pkg], {
    outputFormat: this.EXEC_OUTPUT_FORMAT.FULL
  });
  for (const line of (stdout || '').split('\n').map(_lodash.default.trim)) {
    if (this.isValidClass(line)) {
      return line;
    }
  }
  throw new Error(`Unable to resolve the launchable activity of '${pkg}'. Original error: ${stderr || stdout}`);
};
methods.forceStop = async function forceStop(pkg) {
  return await this.shell(['am', 'force-stop', pkg]);
};
methods.killPackage = async function killPackage(pkg) {
  return await this.shell(['am', 'kill', pkg]);
};
methods.clear = async function clear(pkg) {
  return await this.shell(['pm', 'clear', pkg]);
};
methods.grantAllPermissions = async function grantAllPermissions(pkg, apk) {
  const apiLevel = await this.getApiLevel();
  let targetSdk = 0;
  let dumpsysOutput = null;
  try {
    if (!apk) {
      dumpsysOutput = await this.shell(['dumpsys', 'package', pkg]);
      targetSdk = await this.targetSdkVersionUsingPKG(pkg, dumpsysOutput);
    } else {
      targetSdk = await this.targetSdkVersionFromManifest(apk);
    }
  } catch (e) {
    _logger.default.warn(`Ran into problem getting target SDK version; ignoring...`);
  }
  if (apiLevel >= MIN_API_LEVEL_WITH_PERMS_SUPPORT && targetSdk >= MIN_API_LEVEL_WITH_PERMS_SUPPORT) {
    dumpsysOutput = dumpsysOutput || (await this.shell(['dumpsys', 'package', pkg]));
    const requestedPermissions = await this.getReqPermissions(pkg, dumpsysOutput);
    const grantedPermissions = await this.getGrantedPermissions(pkg, dumpsysOutput);
    const permissionsToGrant = _lodash.default.difference(requestedPermissions, grantedPermissions);
    if (_lodash.default.isEmpty(permissionsToGrant)) {
      _logger.default.info(`${pkg} contains no permissions available for granting`);
    } else {
      await this.grantPermissions(pkg, permissionsToGrant);
    }
  } else if (targetSdk < MIN_API_LEVEL_WITH_PERMS_SUPPORT) {
    _logger.default.info(`It is only possible to grant permissions in runtime for ` + `apps whose targetSdkVersion in the manifest is set to ${MIN_API_LEVEL_WITH_PERMS_SUPPORT} or above. ` + `The current ${pkg} targetSdkVersion is ${targetSdk || 'unset'}.`);
  } else if (apiLevel < MIN_API_LEVEL_WITH_PERMS_SUPPORT) {
    _logger.default.info(`The device's OS API level is ${apiLevel}. ` + `It is only possible to grant permissions on devices running Android 6 or above.`);
  }
};
methods.grantPermissions = async function grantPermissions(pkg, permissions) {
  _logger.default.debug(`Granting permissions ${JSON.stringify(permissions)} to '${pkg}'`);
  try {
    await this.shellChunks(perm => ['pm', 'grant', pkg, perm], permissions);
  } catch (e) {
    if (!IGNORED_PERM_ERRORS.some(pattern => pattern.test(e.stderr || e.message))) {
      throw e;
    }
  }
};
methods.grantPermission = async function grantPermission(pkg, permission) {
  try {
    await this.shell(['pm', 'grant', pkg, permission]);
  } catch (e) {
    if (!NOT_CHANGEABLE_PERM_ERROR.test(e.stderr || e.message)) {
      throw e;
    }
  }
};
methods.revokePermission = async function revokePermission(pkg, permission) {
  try {
    await this.shell(['pm', 'revoke', pkg, permission]);
  } catch (e) {
    if (!NOT_CHANGEABLE_PERM_ERROR.test(e.stderr || e.message)) {
      throw e;
    }
  }
};
methods.getGrantedPermissions = async function getGrantedPermissions(pkg, cmdOutput = null) {
  _logger.default.debug('Retrieving granted permissions');
  const stdout = cmdOutput || (await this.shell(['dumpsys', 'package', pkg]));
  return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], true);
};
methods.getDeniedPermissions = async function getDeniedPermissions(pkg, cmdOutput = null) {
  _logger.default.debug('Retrieving denied permissions');
  const stdout = cmdOutput || (await this.shell(['dumpsys', 'package', pkg]));
  return (0, _helpers.extractMatchingPermissions)(stdout, ['install', 'runtime'], false);
};
methods.getReqPermissions = async function getReqPermissions(pkg, cmdOutput = null) {
  _logger.default.debug('Retrieving requested permissions');
  const stdout = cmdOutput || (await this.shell(['dumpsys', 'package', pkg]));
  return (0, _helpers.extractMatchingPermissions)(stdout, ['requested']);
};
methods.getLocationProviders = async function getLocationProviders() {
  let stdout = await this.getSetting('secure', 'location_providers_allowed');
  return stdout.trim().split(',').map(p => p.trim()).filter(Boolean);
};
methods.toggleGPSLocationProvider = async function toggleGPSLocationProvider(enabled) {
  await this.setSetting('secure', 'location_providers_allowed', `${enabled ? '+' : '-'}gps`);
};
methods.setHiddenApiPolicy = async function setHiddenApiPolicy(value, ignoreError = false) {
  try {
    await this.shell(HIDDEN_API_POLICY_KEYS.map(k => `settings put global ${k} ${value}`).join(';'));
  } catch (e) {
    if (!ignoreError) {
      throw e;
    }
    _logger.default.info(`Failed to set setting keys '${HIDDEN_API_POLICY_KEYS}' to '${value}'. Original error: ${e.message}`);
  }
};
methods.setDefaultHiddenApiPolicy = async function setDefaultHiddenApiPolicy(ignoreError = false) {
  try {
    await this.shell(HIDDEN_API_POLICY_KEYS.map(k => `settings delete global ${k}`).join(';'));
  } catch (e) {
    if (!ignoreError) {
      throw e;
    }
    _logger.default.info(`Failed to delete keys '${HIDDEN_API_POLICY_KEYS}'. Original error: ${e.message}`);
  }
};
methods.stopAndClear = async function stopAndClear(pkg) {
  try {
    await this.forceStop(pkg);
    await this.clear(pkg);
  } catch (e) {
    throw new Error(`Cannot stop and clear ${pkg}. Original error: ${e.message}`);
  }
};
methods.availableIMEs = async function availableIMEs() {
  try {
    return (0, _helpers.getIMEListFromOutput)(await this.shell(['ime', 'list', '-a']));
  } catch (e) {
    throw new Error(`Error getting available IME's. Original error: ${e.message}`);
  }
};
methods.enabledIMEs = async function enabledIMEs() {
  try {
    return (0, _helpers.getIMEListFromOutput)(await this.shell(['ime', 'list']));
  } catch (e) {
    throw new Error(`Error getting enabled IME's. Original error: ${e.message}`);
  }
};
methods.enableIME = async function enableIME(imeId) {
  await this.shell(['ime', 'enable', imeId]);
};
methods.disableIME = async function disableIME(imeId) {
  await this.shell(['ime', 'disable', imeId]);
};
methods.setIME = async function setIME(imeId) {
  await this.shell(['ime', 'set', imeId]);
};
methods.defaultIME = async function defaultIME() {
  try {
    let engine = await this.getSetting('secure', 'default_input_method');
    if (engine === 'null') {
      return null;
    }
    return engine.trim();
  } catch (e) {
    throw new Error(`Error getting default IME. Original error: ${e.message}`);
  }
};
methods.keyevent = async function keyevent(keycode) {
  let code = parseInt(keycode, 10);
  await this.shell(['input', 'keyevent', code]);
};
methods.inputText = async function inputText(text) {
  if (text === '') {
    return;
  }
  const originalStr = `${text}`;
  const escapedText = originalStr.replace(/\$/g, '\\$').replace(/ /g, '%s');
  let args = ['input', 'text', originalStr];
  const adbInputEscapePattern = /[()<>|;&*\\~^"']/g;
  if (escapedText !== originalStr || adbInputEscapePattern.test(originalStr)) {
    if (_lodash.default.every(['"', `'`], c => originalStr.includes(c))) {
      throw new Error(`Did not know how to escape a string that contains both types of quotes (" and ')`);
    }
    const q = originalStr.includes('"') ? `'` : '"';
    args = [`input text ${q}${escapedText}${q}`];
  }
  await this.shell(args);
};
methods.clearTextField = async function clearTextField(length = 100) {
  _logger.default.debug(`Clearing up to ${length} characters`);
  if (length === 0) {
    return;
  }
  let args = ['input', 'keyevent'];
  for (let i = 0; i < length; i++) {
    args.push('67', '112');
  }
  await this.shell(args);
};
methods.lock = async function lock() {
  if (await this.isScreenLocked()) {
    _logger.default.debug('Screen is already locked. Doing nothing.');
    return;
  }
  _logger.default.debug('Pressing the KEYCODE_POWER button to lock screen');
  await this.keyevent(26);
  const timeoutMs = 5000;
  try {
    await (0, _asyncbox.waitForCondition)(async () => await this.isScreenLocked(), {
      waitMs: timeoutMs,
      intervalMs: 500
    });
  } catch (e) {
    throw new Error(`The device screen is still locked after ${timeoutMs}ms timeout`);
  }
};
methods.back = async function back() {
  _logger.default.debug('Pressing the BACK button');
  await this.keyevent(4);
};
methods.goToHome = async function goToHome() {
  _logger.default.debug('Pressing the HOME button');
  await this.keyevent(3);
};
methods.getAdbPath = function getAdbPath() {
  return this.executable.path;
};
methods.getScreenOrientation = async function getScreenOrientation() {
  let stdout = await this.shell(['dumpsys', 'input']);
  return (0, _helpers.getSurfaceOrientation)(stdout);
};
methods.sendTelnetCommand = async function sendTelnetCommand(command) {
  return await this.execEmuConsoleCommand(command, {
    port: await this.getEmulatorPort()
  });
};
methods.isAirplaneModeOn = async function isAirplaneModeOn() {
  const stdout = await this.getSetting('global', 'airplane_mode_on');
  return parseInt(stdout, 10) !== 0;
};
methods.setAirplaneMode = async function setAirplaneMode(on) {
  if ((await this.getApiLevel()) < 30) {
    await this.setSetting('global', 'airplane_mode_on', on ? 1 : 0);
    return;
  }
  await this.shell(['cmd', 'connectivity', 'airplane-mode', on ? 'enable' : 'disable']);
};
methods.broadcastAirplaneMode = async function broadcastAirplaneMode(on) {
  const args = ['am', 'broadcast', '-a', 'android.intent.action.AIRPLANE_MODE', '--ez', 'state', on ? 'true' : 'false'];
  try {
    await this.shell(args);
  } catch (e) {
    if (_lodash.default.includes(e.stderr, 'SecurityException')) {
      try {
        await this.shell(args, {
          privileged: true
        });
        return;
      } catch (ign) {}
    }
    throw e;
  }
};
methods.isWifiOn = async function isWifiOn() {
  const stdout = await this.getSetting('global', 'wifi_on');
  return parseInt(stdout, 10) !== 0;
};
methods.isDataOn = async function isDataOn() {
  const stdout = await this.getSetting('global', 'mobile_data');
  return parseInt(stdout, 10) !== 0;
};
methods.setWifiAndData = async function setWifiAndData({
  wifi,
  data
}, isEmulator = false) {
  if (_support.util.hasValue(wifi)) {
    await this.setWifiState(wifi, isEmulator);
  }
  if (_support.util.hasValue(data)) {
    await this.setDataState(data, isEmulator);
  }
};
methods.isAnimationOn = async function isAnimationOn() {
  let animator_duration_scale = await this.getSetting('global', 'animator_duration_scale');
  let transition_animation_scale = await this.getSetting('global', 'transition_animation_scale');
  let window_animation_scale = await this.getSetting('global', 'window_animation_scale');
  return _lodash.default.some([animator_duration_scale, transition_animation_scale, window_animation_scale], setting => setting !== '0.0');
};
methods.rimraf = async function rimraf(path) {
  await this.shell(['rm', '-rf', path]);
};
methods.push = async function push(localPath, remotePath, opts) {
  await this.mkdir(_path.default.posix.dirname(remotePath));
  await this.adbExec(['push', localPath, remotePath], opts);
};
methods.pull = async function pull(remotePath, localPath, opts = {}) {
  await this.adbExec(['pull', remotePath, localPath], {
    ...opts,
    timeout: opts.timeout ?? 60000
  });
};
methods.processExists = async function processExists(processName) {
  return !_lodash.default.isEmpty(await this.getPIDsByName(processName));
};
methods.getForwardList = async function getForwardList() {
  _logger.default.debug(`List forwarding ports`);
  const connections = await this.adbExec(['forward', '--list']);
  return connections.split(_os.EOL).filter(line => Boolean(line.trim()));
};
methods.forwardPort = async function forwardPort(systemPort, devicePort) {
  _logger.default.debug(`Forwarding system: ${systemPort} to device: ${devicePort}`);
  await this.adbExec(['forward', `tcp:${systemPort}`, `tcp:${devicePort}`]);
};
methods.removePortForward = async function removePortForward(systemPort) {
  _logger.default.debug(`Removing forwarded port socket connection: ${systemPort} `);
  await this.adbExec(['forward', `--remove`, `tcp:${systemPort}`]);
};
methods.getReverseList = async function getReverseList() {
  _logger.default.debug(`List reverse forwarding ports`);
  const connections = await this.adbExec(['reverse', '--list']);
  return connections.split(_os.EOL).filter(line => Boolean(line.trim()));
};
methods.reversePort = async function reversePort(devicePort, systemPort) {
  _logger.default.debug(`Forwarding device: ${devicePort} to system: ${systemPort}`);
  await this.adbExec(['reverse', `tcp:${devicePort}`, `tcp:${systemPort}`]);
};
methods.removePortReverse = async function removePortReverse(devicePort) {
  _logger.default.debug(`Removing reverse forwarded port socket connection: ${devicePort} `);
  await this.adbExec(['reverse', `--remove`, `tcp:${devicePort}`]);
};
methods.forwardAbstractPort = async function forwardAbstractPort(systemPort, devicePort) {
  _logger.default.debug(`Forwarding system: ${systemPort} to abstract device: ${devicePort}`);
  await this.adbExec(['forward', `tcp:${systemPort}`, `localabstract:${devicePort}`]);
};
methods.ping = async function ping() {
  let stdout = await this.shell(['echo', 'ping']);
  if (stdout.indexOf('ping') === 0) {
    return true;
  }
  throw new Error(`ADB ping failed, returned ${stdout}`);
};
methods.restart = async function restart() {
  try {
    await this.stopLogcat();
    await this.restartAdb();
    await this.waitForDevice(60);
    await this.startLogcat(this._logcatStartupParams);
  } catch (e) {
    throw new Error(`Restart failed. Original error: ${e.message}`);
  }
};
methods.startLogcat = async function startLogcat(opts = {}) {
  if (!_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Trying to start logcat capture but it's already started!");
  }
  this.logcat = new _logcat.default({
    adb: this.executable,
    debug: false,
    debugTrace: false,
    clearDeviceLogsOnStart: !!this.clearDeviceLogsOnStart
  });
  await this.logcat.startCapture(opts);
  this._logcatStartupParams = opts;
};
methods.stopLogcat = async function stopLogcat() {
  if (_lodash.default.isEmpty(this.logcat)) {
    return;
  }
  try {
    await this.logcat.stopCapture();
  } finally {
    this.logcat = null;
  }
};
methods.getLogcatLogs = function getLogcatLogs() {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Can't get logcat logs since logcat hasn't started");
  }
  return this.logcat.getLogs();
};
methods.setLogcatListener = function setLogcatListener(listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }
  this.logcat.on('output', listener);
};
methods.removeLogcatListener = function removeLogcatListener(listener) {
  if (_lodash.default.isEmpty(this.logcat)) {
    throw new Error("Logcat process hasn't been started");
  }
  this.logcat.removeListener('output', listener);
};
methods.listProcessStatus = async function listProcessStatus() {
  if (!_lodash.default.isBoolean(this._doesPsSupportAOption)) {
    try {
      this._doesPsSupportAOption = /^-A\b/m.test(await this.shell(['ps', '--help']));
    } catch (e) {
      _logger.default.debug(e.stack);
      this._doesPsSupportAOption = false;
    }
  }
  return await this.shell(this._doesPsSupportAOption ? ['ps', '-A'] : ['ps']);
};
methods.getNameByPid = async function getNameByPid(pid) {
  if (isNaN(pid)) {
    throw new Error(`The PID value must be a valid number. '${pid}' is given instead`);
  }
  pid = parseInt(pid, 10);
  const stdout = await this.listProcessStatus();
  const titleMatch = PS_TITLE_PATTERN.exec(stdout);
  if (!titleMatch) {
    _logger.default.debug(stdout);
    throw new Error(`Could not get the process name for PID '${pid}'`);
  }
  const allTitles = titleMatch[1].trim().split(/\s+/);
  const pidIndex = allTitles.indexOf(PID_COLUMN_TITLE);
  const nameOffset = allTitles.indexOf(PROCESS_NAME_COLUMN_TITLE) - allTitles.length;
  const pidRegex = new RegExp(`^(.*\\b${pid}\\b.*)$`, 'gm');
  let matchedLine;
  while (matchedLine = pidRegex.exec(stdout)) {
    const items = matchedLine[1].trim().split(/\s+/);
    if (parseInt(items[pidIndex], 10) === pid && items[items.length + nameOffset]) {
      return items[items.length + nameOffset];
    }
  }
  _logger.default.debug(stdout);
  throw new Error(`Could not get the process name for PID '${pid}'`);
};
methods.getPIDsByName = async function getPIDsByName(name) {
  _logger.default.debug(`Getting IDs of all '${name}' processes`);
  if (!this.isValidClass(name)) {
    throw new Error(`Invalid process name: '${name}'`);
  }
  if ((await this.getApiLevel()) >= 23) {
    if (!_lodash.default.isBoolean(this._isPgrepAvailable)) {
      const pgrepOutput = _lodash.default.trim(await this.shell(['pgrep --help; echo $?']));
      this._isPgrepAvailable = parseInt(_lodash.default.last(pgrepOutput.split(/\s+/)), 10) === 0;
      if (this._isPgrepAvailable) {
        this._canPgrepUseFullCmdLineSearch = /^-f\b/m.test(pgrepOutput);
      } else {
        this._isPidofAvailable = parseInt(await this.shell(['pidof --help > /dev/null; echo $?']), 10) === 0;
      }
    }
    if (this._isPgrepAvailable || this._isPidofAvailable) {
      const shellCommand = this._isPgrepAvailable ? this._canPgrepUseFullCmdLineSearch ? ['pgrep', '-f', _lodash.default.escapeRegExp(`([[:blank:]]|^)${name}([[:blank:]]|$)`)] : [`pgrep ^${_lodash.default.escapeRegExp(name.slice(-MAX_PGREP_PATTERN_LEN))}$ ` + `|| pgrep ^${_lodash.default.escapeRegExp(name.slice(0, MAX_PGREP_PATTERN_LEN))}$`] : ['pidof', name];
      try {
        return (await this.shell(shellCommand)).split(/\s+/).map(x => parseInt(x, 10)).filter(x => _lodash.default.isInteger(x));
      } catch (e) {
        if (e.code !== 1) {
          throw new Error(`Could not extract process ID of '${name}': ${e.message}`);
        }
        if (_lodash.default.includes(e.stderr || e.stdout, 'syntax error')) {
          _logger.default.warn(`Got an unexpected response from the shell interpreter: ${e.stderr || e.stdout}`);
        } else {
          return [];
        }
      }
    }
  }
  _logger.default.debug('Using ps-based PID detection');
  const stdout = await this.listProcessStatus();
  const titleMatch = PS_TITLE_PATTERN.exec(stdout);
  if (!titleMatch) {
    _logger.default.debug(stdout);
    throw new Error(`Could not extract PID of '${name}' from ps output`);
  }
  const allTitles = titleMatch[1].trim().split(/\s+/);
  const pidIndex = allTitles.indexOf(PID_COLUMN_TITLE);
  const pids = [];
  const processNameRegex = new RegExp(`^(.*\\b\\d+\\b.*\\b${_lodash.default.escapeRegExp(name)}\\b.*)$`, 'gm');
  let matchedLine;
  while (matchedLine = processNameRegex.exec(stdout)) {
    const items = matchedLine[1].trim().split(/\s+/);
    if (pidIndex >= allTitles.length || isNaN(items[pidIndex])) {
      _logger.default.debug(stdout);
      throw new Error(`Could not extract PID of '${name}' from '${matchedLine[1].trim()}'`);
    }
    pids.push(parseInt(items[pidIndex], 10));
  }
  return pids;
};
methods.killProcessesByName = async function killProcessesByName(name) {
  try {
    _logger.default.debug(`Attempting to kill all ${name} processes`);
    const pids = await this.getPIDsByName(name);
    if (_lodash.default.isEmpty(pids)) {
      _logger.default.info(`No '${name}' process has been found`);
    } else {
      await _bluebird.default.all(pids.map(p => this.killProcessByPID(p)));
    }
  } catch (e) {
    throw new Error(`Unable to kill ${name} processes. Original error: ${e.message}`);
  }
};
methods.killProcessByPID = async function killProcessByPID(pid) {
  _logger.default.debug(`Attempting to kill process ${pid}`);
  const noProcessFlag = 'No such process';
  try {
    await this.shell(['kill', pid]);
  } catch (e) {
    if (_lodash.default.includes(e.stderr, noProcessFlag)) {
      return;
    }
    if (!_lodash.default.includes(e.stderr, 'Operation not permitted')) {
      throw e;
    }
    _logger.default.info(`Cannot kill PID ${pid} due to insufficient permissions. Retrying as root`);
    try {
      await this.shell(['kill', pid], {
        privileged: true
      });
    } catch (e1) {
      if (_lodash.default.includes(e1.stderr, noProcessFlag)) {
        return;
      }
      throw e1;
    }
  }
};
methods.broadcastProcessEnd = async function broadcastProcessEnd(intent, processName) {
  this.broadcast(intent);
  let start = Date.now();
  let timeoutMs = 40000;
  try {
    while (Date.now() - start < timeoutMs) {
      if (await this.processExists(processName)) {
        await (0, _asyncbox.sleep)(400);
        continue;
      }
      return;
    }
    throw new Error(`Process never died within ${timeoutMs} ms`);
  } catch (e) {
    throw new Error(`Unable to broadcast process end. Original error: ${e.message}`);
  }
};
methods.broadcast = async function broadcast(intent) {
  if (!this.isValidClass(intent)) {
    throw new Error(`Invalid intent ${intent}`);
  }
  _logger.default.debug(`Broadcasting: ${intent}`);
  await this.shell(['am', 'broadcast', '-a', intent]);
};
methods.endAndroidCoverage = async function endAndroidCoverage() {
  if (this.instrumentProc && this.instrumentProc.isRunning) {
    await this.instrumentProc.stop();
  }
};
methods.instrument = async function instrument(pkg, activity, instrumentWith) {
  if (activity[0] !== '.') {
    pkg = '';
  }
  let pkgActivity = (pkg + activity).replace(/\.+/g, '.');
  let stdout = await this.shell(['am', 'instrument', '-e', 'main_activity', pkgActivity, instrumentWith]);
  if (stdout.indexOf('Exception') !== -1) {
    throw new Error(`Unknown exception during instrumentation. Original error ${stdout.split('\n')[0]}`);
  }
};
methods.androidCoverage = async function androidCoverage(instrumentClass, waitPkg, waitActivity) {
  if (!this.isValidClass(instrumentClass)) {
    throw new Error(`Invalid class ${instrumentClass}`);
  }
  return await new _bluebird.default(async (resolve, reject) => {
    let args = this.executable.defaultArgs.concat(['shell', 'am', 'instrument', '-e', 'coverage', 'true', '-w']).concat([instrumentClass]);
    _logger.default.debug(`Collecting coverage data with: ${[this.executable.path].concat(args).join(' ')}`);
    try {
      this.instrumentProc = new _teen_process.SubProcess(this.executable.path, args);
      await this.instrumentProc.start(0);
      this.instrumentProc.on('output', (stdout, stderr) => {
        if (stderr) {
          reject(new Error(`Failed to run instrumentation. Original error: ${stderr}`));
        }
      });
      await this.waitForActivity(waitPkg, waitActivity);
      resolve();
    } catch (e) {
      reject(new Error(`Android coverage failed. Original error: ${e.message}`));
    }
  });
};
methods.getDeviceProperty = async function getDeviceProperty(property) {
  let stdout = await this.shell(['getprop', property]);
  let val = stdout.trim();
  _logger.default.debug(`Current device property '${property}': ${val}`);
  return val;
};
methods.setDeviceProperty = async function setDeviceProperty(prop, val, opts = {}) {
  const {
    privileged = true
  } = opts;
  _logger.default.debug(`Setting device property '${prop}' to '${val}'`);
  await this.shell(['setprop', prop, val], {
    privileged
  });
};
methods.getDeviceSysLanguage = async function getDeviceSysLanguage() {
  return await this.getDeviceProperty('persist.sys.language');
};
methods.getDeviceSysCountry = async function getDeviceSysCountry() {
  return await this.getDeviceProperty('persist.sys.country');
};
methods.getDeviceSysLocale = async function getDeviceSysLocale() {
  return await this.getDeviceProperty('persist.sys.locale');
};
methods.getDeviceProductLanguage = async function getDeviceProductLanguage() {
  return await this.getDeviceProperty('ro.product.locale.language');
};
methods.getDeviceProductCountry = async function getDeviceProductCountry() {
  return await this.getDeviceProperty('ro.product.locale.region');
};
methods.getDeviceProductLocale = async function getDeviceProductLocale() {
  return await this.getDeviceProperty('ro.product.locale');
};
methods.getModel = async function getModel() {
  return await this.getDeviceProperty('ro.product.model');
};
methods.getManufacturer = async function getManufacturer() {
  return await this.getDeviceProperty('ro.product.manufacturer');
};
methods.getScreenSize = async function getScreenSize() {
  let stdout = await this.shell(['wm', 'size']);
  let size = new RegExp(/Physical size: ([^\r?\n]+)*/g).exec(stdout);
  if (size && size.length >= 2) {
    return size[1].trim();
  }
  return null;
};
methods.getScreenDensity = async function getScreenDensity() {
  let stdout = await this.shell(['wm', 'density']);
  let density = new RegExp(/Physical density: ([^\r?\n]+)*/g).exec(stdout);
  if (density && density.length >= 2) {
    let densityNumber = parseInt(density[1].trim(), 10);
    return isNaN(densityNumber) ? null : densityNumber;
  }
  return null;
};
methods.setHttpProxy = async function setHttpProxy(proxyHost, proxyPort) {
  let proxy = `${proxyHost}:${proxyPort}`;
  if (_lodash.default.isUndefined(proxyHost)) {
    throw new Error(`Call to setHttpProxy method with undefined proxy_host: ${proxy}`);
  }
  if (_lodash.default.isUndefined(proxyPort)) {
    throw new Error(`Call to setHttpProxy method with undefined proxy_port ${proxy}`);
  }
  const httpProxySettins = [['http_proxy', proxy], ['global_http_proxy_host', proxyHost], ['global_http_proxy_port', proxyPort]];
  for (const [settingKey, settingValue] of httpProxySettins) {
    await this.setSetting('global', settingKey, settingValue);
  }
};
methods.deleteHttpProxy = async function deleteHttpProxy() {
  const httpProxySettins = ['http_proxy', 'global_http_proxy_host', 'global_http_proxy_port', 'global_http_proxy_exclusion_list'];
  for (const setting of httpProxySettins) {
    await this.shell(['settings', 'delete', 'global', setting]);
  }
};
methods.setSetting = async function setSetting(namespace, setting, value) {
  return await this.shell(['settings', 'put', namespace, setting, value]);
};
methods.getSetting = async function getSetting(namespace, setting) {
  return await this.shell(['settings', 'get', namespace, setting]);
};
methods.bugreport = async function bugreport(timeout = 120000) {
  return await this.adbExec(['bugreport'], {
    timeout
  });
};
methods.screenrecord = function screenrecord(destination, options = {}) {
  const cmd = ['screenrecord'];
  const {
    videoSize,
    bitRate,
    timeLimit,
    bugReport
  } = options;
  if (_support.util.hasValue(videoSize)) {
    cmd.push('--size', videoSize);
  }
  if (_support.util.hasValue(timeLimit)) {
    cmd.push('--time-limit', timeLimit);
  }
  if (_support.util.hasValue(bitRate)) {
    cmd.push('--bit-rate', bitRate);
  }
  if (bugReport) {
    cmd.push('--bugreport');
  }
  cmd.push(destination);
  const fullCmd = [...this.executable.defaultArgs, 'shell', ...cmd];
  _logger.default.debug(`Building screenrecord process with the command line: adb ${_support.util.quote(fullCmd)}`);
  return new _teen_process.SubProcess(this.executable.path, fullCmd);
};
methods.runInImeContext = async function runInImeContext(ime, fn) {
  const originalIme = await this.defaultIME();
  if (originalIme === ime) {
    _logger.default.debug(`The original IME is the same as '${ime}'. There is no need to reset it`);
  } else {
    await this.enableIME(ime);
    await this.setIME(ime);
    await _bluebird.default.delay(500);
  }
  try {
    return await fn();
  } finally {
    if (originalIme !== ime) {
      await this.setIME(originalIme);
    }
  }
};
methods.getTimeZone = async function getTimeZone() {
  _logger.default.debug('Getting current timezone');
  try {
    return await this.getDeviceProperty('persist.sys.timezone');
  } catch (e) {
    throw new Error(`Error getting timezone. Original error: ${e.message}`);
  }
};
methods.listFeatures = async function listFeatures() {
  this._memoizedFeatures = this._memoizedFeatures || _lodash.default.memoize(async () => await this.adbExec(['features']), () => this.curDeviceId);
  try {
    return (await this._memoizedFeatures()).split(/\s+/).map(x => x.trim()).filter(Boolean);
  } catch (e) {
    if (_lodash.default.includes(e.stderr, 'unknown command')) {
      return [];
    }
    throw e;
  }
};
methods.isStreamedInstallSupported = async function isStreamedInstallSupported() {
  const proto = Object.getPrototypeOf(this);
  proto._helpOutput = proto._helpOutput || (await this.adbExec(['help']));
  return proto._helpOutput.includes('--streaming') && (await this.listFeatures()).includes('cmd');
};
methods.isIncrementalInstallSupported = async function isIncrementalInstallSupported() {
  const {
    binary
  } = await this.getVersion();
  if (!binary) {
    return false;
  }
  return _support.util.compareVersions(binary.version, '>=', '30.0.1') && (await this.listFeatures()).includes('abb_exec');
};
methods.getDeviceIdleWhitelist = async function getDeviceIdleWhitelist() {
  if ((await this.getApiLevel()) < 23) {
    return [];
  }
  _logger.default.info('Listing packages in Doze whitelist');
  const output = await this.shell(['dumpsys', 'deviceidle', 'whitelist']);
  return _lodash.default.trim(output).split(/\n/).map(line => _lodash.default.trim(line)).filter(Boolean);
};
methods.addToDeviceIdleWhitelist = async function addToDeviceIdleWhitelist(...packages) {
  if (_lodash.default.isEmpty(packages) || (await this.getApiLevel()) < 23) {
    return false;
  }
  _logger.default.info(`Adding ${_support.util.pluralize('package', packages.length)} ${JSON.stringify(packages)} to Doze whitelist`);
  await this.shellChunks(pkg => ['dumpsys', 'deviceidle', 'whitelist', `+${pkg}`], packages);
  return true;
};
var _default = methods;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nZ2VyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfaGVscGVycyIsIl9wYXRoIiwiX2xvZGFzaCIsIl9zdXBwb3J0IiwiX29zIiwiX2xvZ2NhdCIsIl9hc3luY2JveCIsIl90ZWVuX3Byb2Nlc3MiLCJfYmx1ZWJpcmQiLCJNQVhfU0hFTExfQlVGRkVSX0xFTkdUSCIsIk5PVF9DSEFOR0VBQkxFX1BFUk1fRVJST1IiLCJJR05PUkVEX1BFUk1fRVJST1JTIiwiTUFYX1BHUkVQX1BBVFRFUk5fTEVOIiwiSElEREVOX0FQSV9QT0xJQ1lfS0VZUyIsIlBJRF9DT0xVTU5fVElUTEUiLCJQUk9DRVNTX05BTUVfQ09MVU1OX1RJVExFIiwiUFNfVElUTEVfUEFUVEVSTiIsIlJlZ0V4cCIsIk1JTl9BUElfTEVWRUxfV0lUSF9QRVJNU19TVVBQT1JUIiwibWV0aG9kcyIsInNoZWxsQ2h1bmtzIiwiYXJnVHJhbnNmb3JtZXIiLCJhcmdzIiwiY29tbWFuZHMiLCJjbWRDaHVuayIsImFyZyIsIm5leHRDbWQiLCJfIiwiaXNBcnJheSIsIkVycm9yIiwibGFzdCIsInB1c2giLCJqb2luIiwibGVuZ3RoIiwiaXNFbXB0eSIsImxvZyIsImRlYnVnIiwiSlNPTiIsInN0cmluZ2lmeSIsImxhc3RFcnJvciIsImNtZCIsInNoZWxsIiwiZSIsImdldEFkYldpdGhDb3JyZWN0QWRiUGF0aCIsImV4ZWN1dGFibGUiLCJwYXRoIiwiZ2V0U2RrQmluYXJ5UGF0aCIsImFkYiIsImluaXRBYXB0IiwiaW5pdEFhcHQyIiwiaW5pdFppcEFsaWduIiwiaW5pdEJ1bmRsZXRvb2wiLCJiaW5hcmllcyIsImJ1bmRsZXRvb2wiLCJmcyIsIndoaWNoIiwiZXJyIiwiZ2V0QXBpTGV2ZWwiLCJpc0ludGVnZXIiLCJfYXBpTGV2ZWwiLCJzdHJPdXRwdXQiLCJnZXREZXZpY2VQcm9wZXJ0eSIsImFwaUxldmVsIiwicGFyc2VJbnQiLCJ0cmltIiwiY2hhckNvZGVRIiwiY2hhckNvZGVBdCIsImFwaUxldmVsRGlmZiIsImNvZGVuYW1lIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiZ2V0UGxhdGZvcm1WZXJzaW9uIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsImlzTmFOIiwibWVzc2FnZSIsImluZm8iLCJpc0RldmljZUNvbm5lY3RlZCIsImRldmljZXMiLCJnZXRDb25uZWN0ZWREZXZpY2VzIiwibWtkaXIiLCJyZW1vdGVQYXRoIiwiaXNWYWxpZENsYXNzIiwiY2xhc3NTdHJpbmciLCJtYXRjaENvbXBvbmVudE5hbWUiLCJyZXNvbHZlTGF1bmNoYWJsZUFjdGl2aXR5IiwicGtnIiwib3B0cyIsInByZWZlckNtZCIsInN0ZG91dCIsIm5hbWVzIiwicGFyc2VMYXVuY2hhYmxlQWN0aXZpdHlOYW1lcyIsInRtcFJvb3QiLCJ0ZW1wRGlyIiwib3BlbkRpciIsInRtcEFwcCIsInB1bGxBcGsiLCJhcGtBY3Rpdml0eSIsInBhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCIsInN0YWNrIiwid2FybiIsInJpbXJhZiIsInN0ZGVyciIsIm91dHB1dEZvcm1hdCIsIkVYRUNfT1VUUFVUX0ZPUk1BVCIsIkZVTEwiLCJsaW5lIiwic3BsaXQiLCJtYXAiLCJmb3JjZVN0b3AiLCJraWxsUGFja2FnZSIsImNsZWFyIiwiZ3JhbnRBbGxQZXJtaXNzaW9ucyIsImFwayIsInRhcmdldFNkayIsImR1bXBzeXNPdXRwdXQiLCJ0YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0ciLCJ0YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0IiwicmVxdWVzdGVkUGVybWlzc2lvbnMiLCJnZXRSZXFQZXJtaXNzaW9ucyIsImdyYW50ZWRQZXJtaXNzaW9ucyIsImdldEdyYW50ZWRQZXJtaXNzaW9ucyIsInBlcm1pc3Npb25zVG9HcmFudCIsImRpZmZlcmVuY2UiLCJncmFudFBlcm1pc3Npb25zIiwicGVybWlzc2lvbnMiLCJwZXJtIiwic29tZSIsInBhdHRlcm4iLCJ0ZXN0IiwiZ3JhbnRQZXJtaXNzaW9uIiwicGVybWlzc2lvbiIsInJldm9rZVBlcm1pc3Npb24iLCJjbWRPdXRwdXQiLCJleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyIsImdldERlbmllZFBlcm1pc3Npb25zIiwiZ2V0TG9jYXRpb25Qcm92aWRlcnMiLCJnZXRTZXR0aW5nIiwicCIsImZpbHRlciIsIkJvb2xlYW4iLCJ0b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyIiwiZW5hYmxlZCIsInNldFNldHRpbmciLCJzZXRIaWRkZW5BcGlQb2xpY3kiLCJ2YWx1ZSIsImlnbm9yZUVycm9yIiwiayIsInNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3kiLCJzdG9wQW5kQ2xlYXIiLCJhdmFpbGFibGVJTUVzIiwiZ2V0SU1FTGlzdEZyb21PdXRwdXQiLCJlbmFibGVkSU1FcyIsImVuYWJsZUlNRSIsImltZUlkIiwiZGlzYWJsZUlNRSIsInNldElNRSIsImRlZmF1bHRJTUUiLCJlbmdpbmUiLCJrZXlldmVudCIsImtleWNvZGUiLCJjb2RlIiwiaW5wdXRUZXh0IiwidGV4dCIsIm9yaWdpbmFsU3RyIiwiZXNjYXBlZFRleHQiLCJyZXBsYWNlIiwiYWRiSW5wdXRFc2NhcGVQYXR0ZXJuIiwiZXZlcnkiLCJjIiwiaW5jbHVkZXMiLCJxIiwiY2xlYXJUZXh0RmllbGQiLCJpIiwibG9jayIsImlzU2NyZWVuTG9ja2VkIiwidGltZW91dE1zIiwid2FpdEZvckNvbmRpdGlvbiIsIndhaXRNcyIsImludGVydmFsTXMiLCJiYWNrIiwiZ29Ub0hvbWUiLCJnZXRBZGJQYXRoIiwiZ2V0U2NyZWVuT3JpZW50YXRpb24iLCJnZXRTdXJmYWNlT3JpZW50YXRpb24iLCJzZW5kVGVsbmV0Q29tbWFuZCIsImNvbW1hbmQiLCJleGVjRW11Q29uc29sZUNvbW1hbmQiLCJwb3J0IiwiZ2V0RW11bGF0b3JQb3J0IiwiaXNBaXJwbGFuZU1vZGVPbiIsInNldEFpcnBsYW5lTW9kZSIsIm9uIiwiYnJvYWRjYXN0QWlycGxhbmVNb2RlIiwicHJpdmlsZWdlZCIsImlnbiIsImlzV2lmaU9uIiwiaXNEYXRhT24iLCJzZXRXaWZpQW5kRGF0YSIsIndpZmkiLCJkYXRhIiwiaXNFbXVsYXRvciIsInV0aWwiLCJoYXNWYWx1ZSIsInNldFdpZmlTdGF0ZSIsInNldERhdGFTdGF0ZSIsImlzQW5pbWF0aW9uT24iLCJhbmltYXRvcl9kdXJhdGlvbl9zY2FsZSIsInRyYW5zaXRpb25fYW5pbWF0aW9uX3NjYWxlIiwid2luZG93X2FuaW1hdGlvbl9zY2FsZSIsInNldHRpbmciLCJsb2NhbFBhdGgiLCJwb3NpeCIsImRpcm5hbWUiLCJhZGJFeGVjIiwicHVsbCIsInRpbWVvdXQiLCJwcm9jZXNzRXhpc3RzIiwicHJvY2Vzc05hbWUiLCJnZXRQSURzQnlOYW1lIiwiZ2V0Rm9yd2FyZExpc3QiLCJjb25uZWN0aW9ucyIsIkVPTCIsImZvcndhcmRQb3J0Iiwic3lzdGVtUG9ydCIsImRldmljZVBvcnQiLCJyZW1vdmVQb3J0Rm9yd2FyZCIsImdldFJldmVyc2VMaXN0IiwicmV2ZXJzZVBvcnQiLCJyZW1vdmVQb3J0UmV2ZXJzZSIsImZvcndhcmRBYnN0cmFjdFBvcnQiLCJwaW5nIiwiaW5kZXhPZiIsInJlc3RhcnQiLCJzdG9wTG9nY2F0IiwicmVzdGFydEFkYiIsIndhaXRGb3JEZXZpY2UiLCJzdGFydExvZ2NhdCIsIl9sb2djYXRTdGFydHVwUGFyYW1zIiwibG9nY2F0IiwiTG9nY2F0IiwiZGVidWdUcmFjZSIsImNsZWFyRGV2aWNlTG9nc09uU3RhcnQiLCJzdGFydENhcHR1cmUiLCJzdG9wQ2FwdHVyZSIsImdldExvZ2NhdExvZ3MiLCJnZXRMb2dzIiwic2V0TG9nY2F0TGlzdGVuZXIiLCJsaXN0ZW5lciIsInJlbW92ZUxvZ2NhdExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJsaXN0UHJvY2Vzc1N0YXR1cyIsImlzQm9vbGVhbiIsIl9kb2VzUHNTdXBwb3J0QU9wdGlvbiIsImdldE5hbWVCeVBpZCIsInBpZCIsInRpdGxlTWF0Y2giLCJleGVjIiwiYWxsVGl0bGVzIiwicGlkSW5kZXgiLCJuYW1lT2Zmc2V0IiwicGlkUmVnZXgiLCJtYXRjaGVkTGluZSIsIml0ZW1zIiwibmFtZSIsIl9pc1BncmVwQXZhaWxhYmxlIiwicGdyZXBPdXRwdXQiLCJfY2FuUGdyZXBVc2VGdWxsQ21kTGluZVNlYXJjaCIsIl9pc1BpZG9mQXZhaWxhYmxlIiwic2hlbGxDb21tYW5kIiwiZXNjYXBlUmVnRXhwIiwic2xpY2UiLCJ4IiwicGlkcyIsInByb2Nlc3NOYW1lUmVnZXgiLCJraWxsUHJvY2Vzc2VzQnlOYW1lIiwiQiIsImFsbCIsImtpbGxQcm9jZXNzQnlQSUQiLCJub1Byb2Nlc3NGbGFnIiwiZTEiLCJicm9hZGNhc3RQcm9jZXNzRW5kIiwiaW50ZW50IiwiYnJvYWRjYXN0Iiwic3RhcnQiLCJEYXRlIiwibm93Iiwic2xlZXAiLCJlbmRBbmRyb2lkQ292ZXJhZ2UiLCJpbnN0cnVtZW50UHJvYyIsImlzUnVubmluZyIsInN0b3AiLCJpbnN0cnVtZW50IiwiYWN0aXZpdHkiLCJpbnN0cnVtZW50V2l0aCIsInBrZ0FjdGl2aXR5IiwiYW5kcm9pZENvdmVyYWdlIiwiaW5zdHJ1bWVudENsYXNzIiwid2FpdFBrZyIsIndhaXRBY3Rpdml0eSIsInJlc29sdmUiLCJyZWplY3QiLCJkZWZhdWx0QXJncyIsImNvbmNhdCIsIlN1YlByb2Nlc3MiLCJ3YWl0Rm9yQWN0aXZpdHkiLCJwcm9wZXJ0eSIsInZhbCIsInNldERldmljZVByb3BlcnR5IiwicHJvcCIsImdldERldmljZVN5c0xhbmd1YWdlIiwiZ2V0RGV2aWNlU3lzQ291bnRyeSIsImdldERldmljZVN5c0xvY2FsZSIsImdldERldmljZVByb2R1Y3RMYW5ndWFnZSIsImdldERldmljZVByb2R1Y3RDb3VudHJ5IiwiZ2V0RGV2aWNlUHJvZHVjdExvY2FsZSIsImdldE1vZGVsIiwiZ2V0TWFudWZhY3R1cmVyIiwiZ2V0U2NyZWVuU2l6ZSIsInNpemUiLCJnZXRTY3JlZW5EZW5zaXR5IiwiZGVuc2l0eSIsImRlbnNpdHlOdW1iZXIiLCJzZXRIdHRwUHJveHkiLCJwcm94eUhvc3QiLCJwcm94eVBvcnQiLCJwcm94eSIsImlzVW5kZWZpbmVkIiwiaHR0cFByb3h5U2V0dGlucyIsInNldHRpbmdLZXkiLCJzZXR0aW5nVmFsdWUiLCJkZWxldGVIdHRwUHJveHkiLCJuYW1lc3BhY2UiLCJidWdyZXBvcnQiLCJzY3JlZW5yZWNvcmQiLCJkZXN0aW5hdGlvbiIsIm9wdGlvbnMiLCJ2aWRlb1NpemUiLCJiaXRSYXRlIiwidGltZUxpbWl0IiwiYnVnUmVwb3J0IiwiZnVsbENtZCIsInF1b3RlIiwicnVuSW5JbWVDb250ZXh0IiwiaW1lIiwiZm4iLCJvcmlnaW5hbEltZSIsImRlbGF5IiwiZ2V0VGltZVpvbmUiLCJsaXN0RmVhdHVyZXMiLCJfbWVtb2l6ZWRGZWF0dXJlcyIsIm1lbW9pemUiLCJjdXJEZXZpY2VJZCIsImlzU3RyZWFtZWRJbnN0YWxsU3VwcG9ydGVkIiwicHJvdG8iLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsIl9oZWxwT3V0cHV0IiwiaXNJbmNyZW1lbnRhbEluc3RhbGxTdXBwb3J0ZWQiLCJiaW5hcnkiLCJnZXRWZXJzaW9uIiwiY29tcGFyZVZlcnNpb25zIiwidmVyc2lvbiIsImdldERldmljZUlkbGVXaGl0ZWxpc3QiLCJvdXRwdXQiLCJhZGRUb0RldmljZUlkbGVXaGl0ZWxpc3QiLCJwYWNrYWdlcyIsInBsdXJhbGl6ZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvdG9vbHMvYWRiLWNvbW1hbmRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyLmpzJztcbmltcG9ydCB7XG4gIGdldElNRUxpc3RGcm9tT3V0cHV0LCBnZXRTdXJmYWNlT3JpZW50YXRpb24sIGV4dHJhY3RNYXRjaGluZ1Blcm1pc3Npb25zLFxuICBwYXJzZUxhdW5jaGFibGVBY3Rpdml0eU5hbWVzLCBtYXRjaENvbXBvbmVudE5hbWUsXG59IGZyb20gJy4uL2hlbHBlcnMuanMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgZnMsIHV0aWwsIHRlbXBEaXIgfSBmcm9tICdAYXBwaXVtL3N1cHBvcnQnO1xuaW1wb3J0IHsgRU9MIH0gZnJvbSAnb3MnO1xuaW1wb3J0IExvZ2NhdCBmcm9tICcuLi9sb2djYXQnO1xuaW1wb3J0IHsgc2xlZXAsIHdhaXRGb3JDb25kaXRpb24gfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyBTdWJQcm9jZXNzIH0gZnJvbSAndGVlbl9wcm9jZXNzJztcbmltcG9ydCBCIGZyb20gJ2JsdWViaXJkJztcblxuY29uc3QgTUFYX1NIRUxMX0JVRkZFUl9MRU5HVEggPSAxMDAwO1xuY29uc3QgTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUiA9IC9ub3QgYSBjaGFuZ2VhYmxlIHBlcm1pc3Npb24gdHlwZS9pO1xuY29uc3QgSUdOT1JFRF9QRVJNX0VSUk9SUyA9IFtcbiAgTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUixcbiAgL1Vua25vd24gcGVybWlzc2lvbi9pLFxuXTtcbmNvbnN0IE1BWF9QR1JFUF9QQVRURVJOX0xFTiA9IDE1O1xuY29uc3QgSElEREVOX0FQSV9QT0xJQ1lfS0VZUyA9IFtcbiAgJ2hpZGRlbl9hcGlfcG9saWN5X3ByZV9wX2FwcHMnLFxuICAnaGlkZGVuX2FwaV9wb2xpY3lfcF9hcHBzJyxcbiAgJ2hpZGRlbl9hcGlfcG9saWN5J1xuXTtcbmNvbnN0IFBJRF9DT0xVTU5fVElUTEUgPSAnUElEJztcbmNvbnN0IFBST0NFU1NfTkFNRV9DT0xVTU5fVElUTEUgPSAnTkFNRSc7XG5jb25zdCBQU19USVRMRV9QQVRURVJOID0gbmV3IFJlZ0V4cChgXiguKlxcXFxiJHtQSURfQ09MVU1OX1RJVExFfVxcXFxiLipcXFxcYiR7UFJPQ0VTU19OQU1FX0NPTFVNTl9USVRMRX1cXFxcYi4qKSRgLCAnbScpO1xuY29uc3QgTUlOX0FQSV9MRVZFTF9XSVRIX1BFUk1TX1NVUFBPUlQgPSAyMztcblxuY29uc3QgbWV0aG9kcyA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgY2h1bmtzIGZvciB0aGUgZ2l2ZW4gYXJndW1lbnRzIGFuZCBleGVjdXRlcyB0aGVtIGluIGBhZGIgc2hlbGxgLlxuICogVGhpcyBpcyBmYXN0ZXIgdGhhbiBjYWxsaW5nIGBhZGIgc2hlbGxgIHNlcGFyYXRlbHkgZm9yIGVhY2ggYXJnLCBob3dldmVyXG4gKiB0aGVyZSBpcyBhIGxpbWl0IGZvciBhIG1heGltdW0gbGVuZ3RoIG9mIGEgc2luZ2xlIGFkYiBjb21tYW5kLiB0aGF0IGlzIHdoeVxuICogd2UgbmVlZCBhbGwgdGhpcyBjb21wbGljYXRlZCBsb2dpYy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBhcmdUcmFuc2Zvcm1lciBBIGZ1bmN0aW9uLCB0aGF0IHJlY2VpdmVzIHNpbmdsZSBhcmd1bWVudFxuICogZnJvbSB0aGUgYGFyZ3NgIGFycmF5IGFuZCB0cmFuc2Zvcm1zIGl0IGludG8gYSBzaGVsbCBjb21tYW5kLiBUaGUgcmVzdWx0XG4gKiBvZiB0aGUgZnVuY3Rpb24gbXVzdCBiZSBhbiBhcnJheSwgd2hlcmUgZWFjaCBpdGVtIGlzIGEgcGFydCBvZiBhIHNpbmdsZSBjb21tYW5kLlxuICogVGhlIGxhc3QgaXRlbSBvZiB0aGUgYXJyYXkgY291bGQgYmUgJzsnLiBJZiB0aGlzIGlzIG5vdCBhIHNlbWljb2xvbiB0aGVuIGl0IGlzIGdvaW5nIHRvXG4gKiBiZSBhZGRlZCBhdXRvbWF0aWNhbGx5LlxuICogQHBhcmFtIHtBcnJheTxudW1iZXJ8c3RyaW5nPn0gYXJncyBBcnJheSBvZiBhcmd1bWVudCB2YWx1ZXMgdG8gY3JlYXRlIGNodW5rcyBmb3JcbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiBhbnkgb2YgdGhlIGNodW5rcyByZXR1cm5zIG5vbi16ZXJvIGV4aXQgY29kZSBhZnRlciBiZWluZyBleGVjdXRlZFxuICovXG5tZXRob2RzLnNoZWxsQ2h1bmtzID0gYXN5bmMgZnVuY3Rpb24gc2hlbGxDaHVua3MgKGFyZ1RyYW5zZm9ybWVyLCBhcmdzKSB7XG4gIGNvbnN0IGNvbW1hbmRzID0gW107XG4gIGxldCBjbWRDaHVuayA9IFtdO1xuICBmb3IgKGNvbnN0IGFyZyBvZiBhcmdzKSB7XG4gICAgY29uc3QgbmV4dENtZCA9IGFyZ1RyYW5zZm9ybWVyKGFyZyk7XG4gICAgaWYgKCFfLmlzQXJyYXkobmV4dENtZCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQXJndW1lbnQgdHJhbnNmb3JtZXIgbXVzdCByZXN1bHQgaW4gYW4gYXJyYXknKTtcbiAgICB9XG4gICAgaWYgKF8ubGFzdChuZXh0Q21kKSAhPT0gJzsnKSB7XG4gICAgICBuZXh0Q21kLnB1c2goJzsnKTtcbiAgICB9XG4gICAgaWYgKG5leHRDbWQuam9pbignICcpLmxlbmd0aCArIGNtZENodW5rLmpvaW4oJyAnKS5sZW5ndGggPj0gTUFYX1NIRUxMX0JVRkZFUl9MRU5HVEgpIHtcbiAgICAgIGNvbW1hbmRzLnB1c2goY21kQ2h1bmspO1xuICAgICAgY21kQ2h1bmsgPSBbXTtcbiAgICB9XG4gICAgY21kQ2h1bmsgPSBbLi4uY21kQ2h1bmssIC4uLm5leHRDbWRdO1xuICB9XG4gIGlmICghXy5pc0VtcHR5KGNtZENodW5rKSkge1xuICAgIGNvbW1hbmRzLnB1c2goY21kQ2h1bmspO1xuICB9XG4gIGxvZy5kZWJ1ZyhgR290IHRoZSBmb2xsb3dpbmcgY29tbWFuZCBjaHVua3MgdG8gZXhlY3V0ZTogJHtKU09OLnN0cmluZ2lmeShjb21tYW5kcyl9YCk7XG4gIGxldCBsYXN0RXJyb3IgPSBudWxsO1xuICBmb3IgKGNvbnN0IGNtZCBvZiBjb21tYW5kcykge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNoZWxsKGNtZCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgbGFzdEVycm9yID0gZTtcbiAgICB9XG4gIH1cbiAgaWYgKGxhc3RFcnJvcikge1xuICAgIHRocm93IGxhc3RFcnJvcjtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgdGhlIHBhdGggdG8gYWRiIGV4ZWN1dGFibGUgYW1kIGFzc2lnbiBpdFxuICogdG8gdGhpcy5leGVjdXRhYmxlLnBhdGggYW5kIHRoaXMuYmluYXJpZXMuYWRiIHByb3BlcnRpZXMuXG4gKlxuICogQHJldHVybiB7QURCfSBBREIgaW5zdGFuY2UuXG4gKi9cbm1ldGhvZHMuZ2V0QWRiV2l0aENvcnJlY3RBZGJQYXRoID0gYXN5bmMgZnVuY3Rpb24gZ2V0QWRiV2l0aENvcnJlY3RBZGJQYXRoICgpIHtcbiAgdGhpcy5leGVjdXRhYmxlLnBhdGggPSBhd2FpdCB0aGlzLmdldFNka0JpbmFyeVBhdGgoJ2FkYicpO1xuICByZXR1cm4gdGhpcy5hZGI7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGFhcHQgdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLmFhcHQgcHJvcGVydHlcbiAqL1xubWV0aG9kcy5pbml0QWFwdCA9IGFzeW5jIGZ1bmN0aW9uIGluaXRBYXB0ICgpIHtcbiAgYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKCdhYXB0Jyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZnVsbCBwYXRoIHRvIGFhcHQyIHRvb2wgYW5kIGFzc2lnbiBpdCB0b1xuICogdGhpcy5iaW5hcmllcy5hYXB0MiBwcm9wZXJ0eVxuICovXG5tZXRob2RzLmluaXRBYXB0MiA9IGFzeW5jIGZ1bmN0aW9uIGluaXRBYXB0MiAoKSB7XG4gIGF3YWl0IHRoaXMuZ2V0U2RrQmluYXJ5UGF0aCgnYWFwdDInKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBmdWxsIHBhdGggdG8gemlwYWxpZ24gdG9vbCBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLnppcGFsaWduIHByb3BlcnR5XG4gKi9cbm1ldGhvZHMuaW5pdFppcEFsaWduID0gYXN5bmMgZnVuY3Rpb24gaW5pdFppcEFsaWduICgpIHtcbiAgYXdhaXQgdGhpcy5nZXRTZGtCaW5hcnlQYXRoKCd6aXBhbGlnbicpO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGZ1bGwgcGF0aCB0byBidW5kbGV0b29sIGJpbmFyeSBhbmQgYXNzaWduIGl0IHRvXG4gKiB0aGlzLmJpbmFyaWVzLmJ1bmRsZXRvb2wgcHJvcGVydHlcbiAqL1xubWV0aG9kcy5pbml0QnVuZGxldG9vbCA9IGFzeW5jIGZ1bmN0aW9uIGluaXRCdW5kbGV0b29sICgpIHtcbiAgdHJ5IHtcbiAgICB0aGlzLmJpbmFyaWVzLmJ1bmRsZXRvb2wgPSBhd2FpdCBmcy53aGljaCgnYnVuZGxldG9vbC5qYXInKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdidW5kbGV0b29sLmphciBiaW5hcnkgaXMgZXhwZWN0ZWQgdG8gYmUgcHJlc2VudCBpbiBQQVRILiAnICtcbiAgICAgICdWaXNpdCBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2J1bmRsZXRvb2wgZm9yIG1vcmUgZGV0YWlscy4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgQVBJIGxldmVsIG9mIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBBUEkgbGV2ZWwgYXMgaW50ZWdlciBudW1iZXIsIGZvciBleGFtcGxlIDIxIGZvclxuICogICAgICAgICAgICAgICAgICBBbmRyb2lkIExvbGxpcG9wLiBUaGUgcmVzdWx0IG9mIHRoaXMgbWV0aG9kIGlzIGNhY2hlZCwgc28gYWxsIHRoZSBmdXJ0aGVyXG4gKiBjYWxscyByZXR1cm4gdGhlIHNhbWUgdmFsdWUgYXMgdGhlIGZpcnN0IG9uZS5cbiAqL1xubWV0aG9kcy5nZXRBcGlMZXZlbCA9IGFzeW5jIGZ1bmN0aW9uIGdldEFwaUxldmVsICgpIHtcbiAgaWYgKCFfLmlzSW50ZWdlcih0aGlzLl9hcGlMZXZlbCkpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3RyT3V0cHV0ID0gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8uYnVpbGQudmVyc2lvbi5zZGsnKTtcbiAgICAgIGxldCBhcGlMZXZlbCA9IHBhcnNlSW50KHN0ck91dHB1dC50cmltKCksIDEwKTtcblxuICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgcHJldmlldy9iZXRhIHBsYXRmb3JtIEFQSSBsZXZlbFxuICAgICAgY29uc3QgY2hhckNvZGVRID0gJ3EnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAvLyAyOCBpcyB0aGUgZmlyc3QgQVBJIExldmVsLCB3aGVyZSBBbmRyb2lkIFNESyBzdGFydGVkIHJldHVybmluZyBsZXR0ZXJzIGluIHJlc3BvbnNlIHRvIGdldFBsYXRmb3JtVmVyc2lvblxuICAgICAgY29uc3QgYXBpTGV2ZWxEaWZmID0gYXBpTGV2ZWwgLSAyODtcbiAgICAgIGNvbnN0IGNvZGVuYW1lID0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZVEgKyBhcGlMZXZlbERpZmYpO1xuICAgICAgaWYgKGFwaUxldmVsRGlmZiA+PSAwICYmIChhd2FpdCB0aGlzLmdldFBsYXRmb3JtVmVyc2lvbigpKS50b0xvd2VyQ2FzZSgpID09PSBjb2RlbmFtZSkge1xuICAgICAgICBsb2cuZGVidWcoYFJlbGVhc2UgdmVyc2lvbiBpcyAke2NvZGVuYW1lLnRvVXBwZXJDYXNlKCl9IGJ1dCBmb3VuZCBBUEkgTGV2ZWwgJHthcGlMZXZlbH0uIFNldHRpbmcgQVBJIExldmVsIHRvICR7YXBpTGV2ZWwgKyAxfWApO1xuICAgICAgICBhcGlMZXZlbCsrO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9hcGlMZXZlbCA9IGFwaUxldmVsO1xuICAgICAgbG9nLmRlYnVnKGBEZXZpY2UgQVBJIGxldmVsOiAke3RoaXMuX2FwaUxldmVsfWApO1xuICAgICAgaWYgKGlzTmFOKHRoaXMuX2FwaUxldmVsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBhY3R1YWwgb3V0cHV0ICcke3N0ck91dHB1dH0nIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gYW4gaW50ZWdlcmApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZXZpY2UgQVBJIGxldmVsLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0aGlzLl9hcGlMZXZlbDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIHBsYXRmb3JtIHZlcnNpb24gb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHBsYXRmb3JtIHZlcnNpb24gYXMgYSBzdHJpbmcsIGZvciBleGFtcGxlICc1LjAnIGZvclxuICogQW5kcm9pZCBMb2xsaXBvcC5cbiAqL1xubWV0aG9kcy5nZXRQbGF0Zm9ybVZlcnNpb24gPSBhc3luYyBmdW5jdGlvbiBnZXRQbGF0Zm9ybVZlcnNpb24gKCkge1xuICBsb2cuaW5mbygnR2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvbicpO1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5idWlsZC52ZXJzaW9uLnJlbGVhc2UnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZXZpY2UgcGxhdGZvcm0gdmVyc2lvbi4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFZlcmlmeSB3aGV0aGVyIGEgZGV2aWNlIGlzIGNvbm5lY3RlZC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGF0IGxlYXN0IG9uZSBkZXZpY2UgaXMgdmlzaWJsZSB0byBhZGIuXG4gKi9cbm1ldGhvZHMuaXNEZXZpY2VDb25uZWN0ZWQgPSBhc3luYyBmdW5jdGlvbiBpc0RldmljZUNvbm5lY3RlZCAoKSB7XG4gIGxldCBkZXZpY2VzID0gYXdhaXQgdGhpcy5nZXRDb25uZWN0ZWREZXZpY2VzKCk7XG4gIHJldHVybiBkZXZpY2VzLmxlbmd0aCA+IDA7XG59O1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGNyZWF0ZSBhIG5ldyBmb2xkZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZW1vdGVQYXRoIC0gVGhlIG5ldyBwYXRoIHRvIGJlIGNyZWF0ZWQuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IG1rZGlyIGNvbW1hbmQgb3V0cHV0LlxuICovXG5tZXRob2RzLm1rZGlyID0gYXN5bmMgZnVuY3Rpb24gbWtkaXIgKHJlbW90ZVBhdGgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydta2RpcicsICctcCcsIHJlbW90ZVBhdGhdKTtcbn07XG5cbi8qKlxuICogVmVyaWZ5IHdoZXRoZXIgdGhlIGdpdmVuIGFyZ3VtZW50IGlzIGFcbiAqIHZhbGlkIGNsYXNzIG5hbWUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzU3RyaW5nIC0gVGhlIGFjdHVhbCBjbGFzcyBuYW1lIHRvIGJlIHZlcmlmaWVkLlxuICogQHJldHVybiB7P0FycmF5LjxNYXRjaD59IFRoZSByZXN1bHQgb2YgUmVnZXhwLmV4ZWMgb3BlcmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgb3IgX251bGxfIGlmIG5vIG1hdGNoZXMgYXJlIGZvdW5kLlxuICovXG5tZXRob2RzLmlzVmFsaWRDbGFzcyA9IGZ1bmN0aW9uIGlzVmFsaWRDbGFzcyAoY2xhc3NTdHJpbmcpIHtcbiAgLy8gc29tZS5wYWNrYWdlL3NvbWUucGFja2FnZS5BY3Rpdml0eVxuICByZXR1cm4gbWF0Y2hDb21wb25lbnROYW1lKGNsYXNzU3RyaW5nKTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gUmVzb2x2ZUFjdGl2aXR5T3B0aW9uc1xuICogQHByb3BlcnR5IHtib29sZWFuP30gcHJlZmVyQ21kIFt0cnVlXSBXaGV0aGVyIHRvIHByZWZlciBgY21kYCB0b29sIHVzYWdlIGZvclxuICogbGF1bmNoYWJsZSBhY3Rpdml0eSBuYW1lIGRldGVjdGlvbi4gSXQgbWlnaHQgYmUgdXNlZnVsIHRvIGRpc2FibGUgaXQgaWZcbiAqIGBjbWQgcGFja2FnZSByZXNvbHZlLWFjdGl2aXR5YCByZXR1cm5zICdhbmRyb2lkL2NvbS5hbmRyb2lkLmludGVybmFsLmFwcC5SZXNvbHZlckFjdGl2aXR5JyxcbiAqIHdoaWNoIG1lYW5zIHRoZSBhcHAgaGFzIG5vIGRlZmF1bHQgaGFuZGxlciBzZXQgaW4gc3lzdGVtIHNldHRpbmdzLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy8xNzEyOCBmb3IgbW9yZSBkZXRhaWxzLlxuICogVGhpcyBvcHRpb24gaGFzIG5vIGVmZmVjdCBpZiB0aGUgdGFyZ2V0IEFuZHJvaWQgdmVyc2lvbiBpcyBiZWxvdyAyNCBhcyB0aGVyZVxuICogdGhlIGNvcnJlc3BvbmRpbmcgYGNtZGAgc3ViY29tbWFuZCBpcyBub3QgaW1wbGVtZW50ZWQgYW5kIGR1bXBzeXMgdXNhZ2UgaXMgdGhlIG9ubHlcbiAqIHBvc3NpYmxlIHdheSB0byBkZXRlY3QgdGhlIGxhdW5jaGFibGUgYWN0aXZpdHkgbmFtZS5cbiAqL1xuXG4vKipcbiAqIEZldGNoZXMgdGhlIGZ1bGx5IHF1YWxpZmllZCBuYW1lIG9mIHRoZSBsYXVuY2hhYmxlIGFjdGl2aXR5IGZvciB0aGVcbiAqIGdpdmVuIHBhY2thZ2UuIEl0IGlzIGV4cGVjdGVkIHRoZSBwYWNrYWdlIGlzIGFscmVhZHkgaW5zdGFsbGVkIG9uXG4gKiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSB0YXJnZXQgcGFja2FnZSBpZGVudGlmaWVyXG4gKiBAcGFyYW0ge1Jlc29sdmVBY3Rpdml0eU9wdGlvbnM/fSBvcHRzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEZ1bGx5IHF1YWxpZmllZCBuYW1lIG9mIHRoZSBsYXVuY2hhYmxlIGFjdGl2aXR5XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIHJlc29sdmluZyB0aGUgYWN0aXZpdHkgbmFtZVxuICovXG5tZXRob2RzLnJlc29sdmVMYXVuY2hhYmxlQWN0aXZpdHkgPSBhc3luYyBmdW5jdGlvbiByZXNvbHZlTGF1bmNoYWJsZUFjdGl2aXR5IChwa2csIG9wdHMgPSB7fSkge1xuICBjb25zdCB7IHByZWZlckNtZCA9IHRydWUgfSA9IG9wdHM7XG4gIGlmICghcHJlZmVyQ21kIHx8IGF3YWl0IHRoaXMuZ2V0QXBpTGV2ZWwoKSA8IDI0KSB7XG4gICAgY29uc3Qgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICAgIGNvbnN0IG5hbWVzID0gcGFyc2VMYXVuY2hhYmxlQWN0aXZpdHlOYW1lcyhzdGRvdXQpO1xuICAgIGlmIChfLmlzRW1wdHkobmFtZXMpKSB7XG4gICAgICBsb2cuZGVidWcoc3Rkb3V0KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlc29sdmUgdGhlIGxhdW5jaGFibGUgYWN0aXZpdHkgb2YgJyR7cGtnfScuIElzIGl0IGluc3RhbGxlZCBvbiB0aGUgZGV2aWNlP2ApO1xuICAgIH1cbiAgICBpZiAobmFtZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gbmFtZXNbMF07XG4gICAgfVxuXG4gICAgY29uc3QgdG1wUm9vdCA9IGF3YWl0IHRlbXBEaXIub3BlbkRpcigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB0bXBBcHAgPSBhd2FpdCB0aGlzLnB1bGxBcGsocGtnLCB0bXBSb290KTtcbiAgICAgIGNvbnN0IHthcGtBY3Rpdml0eX0gPSBhd2FpdCB0aGlzLnBhY2thZ2VBbmRMYXVuY2hBY3Rpdml0eUZyb21NYW5pZmVzdCh0bXBBcHApO1xuICAgICAgcmV0dXJuIGFwa0FjdGl2aXR5O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGxvZy5kZWJ1ZyhlLnN0YWNrKTtcbiAgICAgIGxvZy53YXJuKGBVbmFibGUgdG8gcmVzb2x2ZSB0aGUgbGF1bmNoYWJsZSBhY3Rpdml0eSBvZiAnJHtwa2d9Jy4gYCArXG4gICAgICAgIGBUaGUgdmVyeSBmaXJzdCBtYXRjaCBvZiB0aGUgZHVtcHN5cyBvdXRwdXQgaXMgZ29pbmcgdG8gYmUgdXNlZC4gYCArXG4gICAgICAgIGBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gICAgICByZXR1cm4gbmFtZXNbMF07XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGF3YWl0IGZzLnJpbXJhZih0bXBSb290KTtcbiAgICB9XG4gIH1cbiAgY29uc3Qge3N0ZG91dCwgc3RkZXJyfSA9IGF3YWl0IHRoaXMuc2hlbGwoWydjbWQnLCAncGFja2FnZScsICdyZXNvbHZlLWFjdGl2aXR5JywgJy0tYnJpZWYnLCBwa2ddLCB7XG4gICAgb3V0cHV0Rm9ybWF0OiB0aGlzLkVYRUNfT1VUUFVUX0ZPUk1BVC5GVUxMXG4gIH0pO1xuICBmb3IgKGNvbnN0IGxpbmUgb2YgKHN0ZG91dCB8fCAnJykuc3BsaXQoJ1xcbicpLm1hcChfLnRyaW0pKSB7XG4gICAgaWYgKHRoaXMuaXNWYWxpZENsYXNzKGxpbmUpKSB7XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcmVzb2x2ZSB0aGUgbGF1bmNoYWJsZSBhY3Rpdml0eSBvZiAnJHtwa2d9Jy4gT3JpZ2luYWwgZXJyb3I6ICR7c3RkZXJyIHx8IHN0ZG91dH1gKTtcbn07XG5cbi8qKlxuICogRm9yY2UgYXBwbGljYXRpb24gdG8gc3RvcCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5mb3JjZVN0b3AgPSBhc3luYyBmdW5jdGlvbiBmb3JjZVN0b3AgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ2FtJywgJ2ZvcmNlLXN0b3AnLCBwa2ddKTtcbn07XG5cbi8qXG4gKiBLaWxsIGFwcGxpY2F0aW9uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgc3RvcHBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC5cbiAqL1xubWV0aG9kcy5raWxsUGFja2FnZSA9IGFzeW5jIGZ1bmN0aW9uIGtpbGxQYWNrYWdlIChwa2cpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydhbScsICdraWxsJywgcGtnXSk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSB1c2VyIGRhdGEgb2YgdGhlIHBhcnRpY3VsYXIgYXBwbGljYXRpb24gb24gdGhlIGRldmljZVxuICogdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBjbGVhcmVkLlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgb3V0cHV0IG9mIHRoZSBjb3JyZXNwb25kaW5nIGFkYiBjb21tYW5kLlxuICovXG5tZXRob2RzLmNsZWFyID0gYXN5bmMgZnVuY3Rpb24gY2xlYXIgKHBrZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3BtJywgJ2NsZWFyJywgcGtnXSk7XG59O1xuXG4vKipcbiAqIEdyYW50IGFsbCBwZXJtaXNzaW9ucyByZXF1ZXN0ZWQgYnkgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgbWV0aG9kIGlzIG9ubHkgdXNlZnVsIG9uIEFuZHJvaWQgNi4wKyBhbmQgZm9yIGFwcGxpY2F0aW9uc1xuICogdGhhdCBzdXBwb3J0IGNvbXBvbmVudHMtYmFzZWQgcGVybWlzc2lvbnMgc2V0dGluZy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gYXBrIC0gVGhlIHBhdGggdG8gdGhlIGFjdHVhbCBhcGsgZmlsZS5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgZ3JhbnRpbmcgcGVybWlzc2lvbnNcbiAqL1xubWV0aG9kcy5ncmFudEFsbFBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gZ3JhbnRBbGxQZXJtaXNzaW9ucyAocGtnLCBhcGspIHtcbiAgY29uc3QgYXBpTGV2ZWwgPSBhd2FpdCB0aGlzLmdldEFwaUxldmVsKCk7XG4gIGxldCB0YXJnZXRTZGsgPSAwO1xuICBsZXQgZHVtcHN5c091dHB1dCA9IG51bGw7XG4gIHRyeSB7XG4gICAgaWYgKCFhcGspIHtcbiAgICAgIC8qKlxuICAgICAgICogSWYgYXBrIG5vdCBwcm92aWRlZCwgY29uc2lkZXJpbmcgYXBrIGFscmVhZHkgaW5zdGFsbGVkIG9uIHRoZSBkZXZpY2VcbiAgICAgICAqIGFuZCBmZXRjaGluZyB0YXJnZXRTZGsgdXNpbmcgcGFja2FnZSBuYW1lLlxuICAgICAgICovXG4gICAgICBkdW1wc3lzT3V0cHV0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uVXNpbmdQS0cocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGFyZ2V0U2RrID0gYXdhaXQgdGhpcy50YXJnZXRTZGtWZXJzaW9uRnJvbU1hbmlmZXN0KGFwayk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy9hdm9pZGluZyBsb2dnaW5nIGVycm9yIHN0YWNrLCBhcyBjYWxsaW5nIGxpYnJhcnkgZnVuY3Rpb24gd291bGQgaGF2ZSBsb2dnZWRcbiAgICBsb2cud2FybihgUmFuIGludG8gcHJvYmxlbSBnZXR0aW5nIHRhcmdldCBTREsgdmVyc2lvbjsgaWdub3JpbmcuLi5gKTtcbiAgfVxuICBpZiAoYXBpTGV2ZWwgPj0gTUlOX0FQSV9MRVZFTF9XSVRIX1BFUk1TX1NVUFBPUlQgJiYgdGFyZ2V0U2RrID49IE1JTl9BUElfTEVWRUxfV0lUSF9QRVJNU19TVVBQT1JUKSB7XG4gICAgLyoqXG4gICAgICogSWYgdGhlIGRldmljZSBpcyBydW5uaW5nIEFuZHJvaWQgNi4wKEFQSSAyMykgb3IgaGlnaGVyLCBhbmQgeW91ciBhcHAncyB0YXJnZXQgU0RLIGlzIDIzIG9yIGhpZ2hlcjpcbiAgICAgKiBUaGUgYXBwIGhhcyB0byBsaXN0IHRoZSBwZXJtaXNzaW9ucyBpbiB0aGUgbWFuaWZlc3QuXG4gICAgICogcmVmZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3RyYWluaW5nL3Blcm1pc3Npb25zL3JlcXVlc3RpbmcuaHRtbFxuICAgICAqL1xuICAgIGR1bXBzeXNPdXRwdXQgPSBkdW1wc3lzT3V0cHV0IHx8IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ3BhY2thZ2UnLCBwa2ddKTtcbiAgICBjb25zdCByZXF1ZXN0ZWRQZXJtaXNzaW9ucyA9IGF3YWl0IHRoaXMuZ2V0UmVxUGVybWlzc2lvbnMocGtnLCBkdW1wc3lzT3V0cHV0KTtcbiAgICBjb25zdCBncmFudGVkUGVybWlzc2lvbnMgPSBhd2FpdCB0aGlzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyhwa2csIGR1bXBzeXNPdXRwdXQpO1xuICAgIGNvbnN0IHBlcm1pc3Npb25zVG9HcmFudCA9IF8uZGlmZmVyZW5jZShyZXF1ZXN0ZWRQZXJtaXNzaW9ucywgZ3JhbnRlZFBlcm1pc3Npb25zKTtcbiAgICBpZiAoXy5pc0VtcHR5KHBlcm1pc3Npb25zVG9HcmFudCkpIHtcbiAgICAgIGxvZy5pbmZvKGAke3BrZ30gY29udGFpbnMgbm8gcGVybWlzc2lvbnMgYXZhaWxhYmxlIGZvciBncmFudGluZ2ApO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLmdyYW50UGVybWlzc2lvbnMocGtnLCBwZXJtaXNzaW9uc1RvR3JhbnQpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0YXJnZXRTZGsgPCBNSU5fQVBJX0xFVkVMX1dJVEhfUEVSTVNfU1VQUE9SVCkge1xuICAgIGxvZy5pbmZvKGBJdCBpcyBvbmx5IHBvc3NpYmxlIHRvIGdyYW50IHBlcm1pc3Npb25zIGluIHJ1bnRpbWUgZm9yIGAgK1xuICAgICAgYGFwcHMgd2hvc2UgdGFyZ2V0U2RrVmVyc2lvbiBpbiB0aGUgbWFuaWZlc3QgaXMgc2V0IHRvICR7TUlOX0FQSV9MRVZFTF9XSVRIX1BFUk1TX1NVUFBPUlR9IG9yIGFib3ZlLiBgICtcbiAgICAgIGBUaGUgY3VycmVudCAke3BrZ30gdGFyZ2V0U2RrVmVyc2lvbiBpcyAke3RhcmdldFNkayB8fCAndW5zZXQnfS5gKTtcbiAgfSBlbHNlIGlmIChhcGlMZXZlbCA8IE1JTl9BUElfTEVWRUxfV0lUSF9QRVJNU19TVVBQT1JUKSB7XG4gICAgbG9nLmluZm8oYFRoZSBkZXZpY2UncyBPUyBBUEkgbGV2ZWwgaXMgJHthcGlMZXZlbH0uIGAgK1xuICAgICAgYEl0IGlzIG9ubHkgcG9zc2libGUgdG8gZ3JhbnQgcGVybWlzc2lvbnMgb24gZGV2aWNlcyBydW5uaW5nIEFuZHJvaWQgNiBvciBhYm92ZS5gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHcmFudCBtdWx0aXBsZSBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqIFRoaXMgY2FsbCBpcyBtb3JlIHBlcmZvcm1hbnQgdGhhbiBgZ3JhbnRQZXJtaXNzaW9uYCBvbmUsIHNpbmNlIGl0IGNvbWJpbmVzXG4gKiBtdWx0aXBsZSBgYWRiIHNoZWxsYCBjYWxscyBpbnRvIGEgc2luZ2xlIGNvbW1hbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtBcnJheTxzdHJpbmc+fSBwZXJtaXNzaW9ucyAtIFRoZSBsaXN0IG9mIHBlcm1pc3Npb25zIHRvIGJlIGdyYW50ZWQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdyYW50UGVybWlzc2lvbnMgPSBhc3luYyBmdW5jdGlvbiBncmFudFBlcm1pc3Npb25zIChwa2csIHBlcm1pc3Npb25zKSB7XG4gIC8vIEFzIGl0IGNvbnN1bWVzIG1vcmUgdGltZSBmb3IgZ3JhbnRpbmcgZWFjaCBwZXJtaXNzaW9uLFxuICAvLyB0cnlpbmcgdG8gZ3JhbnQgYWxsIHBlcm1pc3Npb24gYnkgZm9ybWluZyBlcXVpdmFsZW50IGNvbW1hbmQuXG4gIC8vIEFsc28sIGl0IGlzIG5lY2Vzc2FyeSB0byBzcGxpdCBsb25nIGNvbW1hbmRzIGludG8gY2h1bmtzLCBzaW5jZSB0aGUgbWF4aW11bSBsZW5ndGggb2ZcbiAgLy8gYWRiIHNoZWxsIGJ1ZmZlciBpcyBsaW1pdGVkXG4gIGxvZy5kZWJ1ZyhgR3JhbnRpbmcgcGVybWlzc2lvbnMgJHtKU09OLnN0cmluZ2lmeShwZXJtaXNzaW9ucyl9IHRvICcke3BrZ30nYCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbENodW5rcygocGVybSkgPT4gWydwbScsICdncmFudCcsIHBrZywgcGVybV0sIHBlcm1pc3Npb25zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghSUdOT1JFRF9QRVJNX0VSUk9SUy5zb21lKChwYXR0ZXJuKSA9PiBwYXR0ZXJuLnRlc3QoZS5zdGRlcnIgfHwgZS5tZXNzYWdlKSkpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdyYW50IHNpbmdsZSBwZXJtaXNzaW9uIGZvciB0aGUgcGFydGljdWxhciBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwa2cgLSBUaGUgcGFja2FnZSBuYW1lIHRvIGJlIHByb2Nlc3NlZC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwZXJtaXNzaW9uIC0gVGhlIGZ1bGwgbmFtZSBvZiB0aGUgcGVybWlzc2lvbiB0byBiZSBncmFudGVkLlxuICogQHRocm93cyB7RXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBjaGFuZ2luZyBwZXJtaXNzaW9ucy5cbiAqL1xubWV0aG9kcy5ncmFudFBlcm1pc3Npb24gPSBhc3luYyBmdW5jdGlvbiBncmFudFBlcm1pc3Npb24gKHBrZywgcGVybWlzc2lvbikge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydwbScsICdncmFudCcsIHBrZywgcGVybWlzc2lvbl0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCFOT1RfQ0hBTkdFQUJMRV9QRVJNX0VSUk9SLnRlc3QoZS5zdGRlcnIgfHwgZS5tZXNzYWdlKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogUmV2b2tlIHNpbmdsZSBwZXJtaXNzaW9uIGZyb20gdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcGVybWlzc2lvbiAtIFRoZSBmdWxsIG5hbWUgb2YgdGhlIHBlcm1pc3Npb24gdG8gYmUgcmV2b2tlZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGVyZSB3YXMgYW4gZXJyb3Igd2hpbGUgY2hhbmdpbmcgcGVybWlzc2lvbnMuXG4gKi9cbm1ldGhvZHMucmV2b2tlUGVybWlzc2lvbiA9IGFzeW5jIGZ1bmN0aW9uIHJldm9rZVBlcm1pc3Npb24gKHBrZywgcGVybWlzc2lvbikge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydwbScsICdyZXZva2UnLCBwa2csIHBlcm1pc3Npb25dKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghTk9UX0NIQU5HRUFCTEVfUEVSTV9FUlJPUi50ZXN0KGUuc3RkZXJyIHx8IGUubWVzc2FnZSkpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIGdyYW50ZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBncmFudGVkIHBlcm1pc3Npb25zIG9yIGFuIGVtcHR5IGxpc3QuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIHdoaWxlIGNoYW5naW5nIHBlcm1pc3Npb25zLlxuICovXG5tZXRob2RzLmdldEdyYW50ZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldEdyYW50ZWRQZXJtaXNzaW9ucyAocGtnLCBjbWRPdXRwdXQgPSBudWxsKSB7XG4gIGxvZy5kZWJ1ZygnUmV0cmlldmluZyBncmFudGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsnaW5zdGFsbCcsICdydW50aW1lJ10sIHRydWUpO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgZm9yIHRoZSBwYXJ0aWN1bGFyIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtIHtzdHJpbmd9IGNtZE91dHB1dCBbbnVsbF0gLSBPcHRpb25hbCBwYXJhbWV0ZXIgY29udGFpbmluZyBjb21tYW5kIG91dHB1dCBvZlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZHVtcHN5cyBwYWNrYWdlXyBjb21tYW5kLiBJdCBtYXkgc3BlZWQgdXAgdGhlIG1ldGhvZCBleGVjdXRpb24uXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fSBUaGUgbGlzdCBvZiBkZW5pZWQgcGVybWlzc2lvbnMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5nZXREZW5pZWRQZXJtaXNzaW9ucyA9IGFzeW5jIGZ1bmN0aW9uIGdldERlbmllZFBlcm1pc3Npb25zIChwa2csIGNtZE91dHB1dCA9IG51bGwpIHtcbiAgbG9nLmRlYnVnKCdSZXRyaWV2aW5nIGRlbmllZCBwZXJtaXNzaW9ucycpO1xuICBjb25zdCBzdGRvdXQgPSBjbWRPdXRwdXQgfHwgYXdhaXQgdGhpcy5zaGVsbChbJ2R1bXBzeXMnLCAncGFja2FnZScsIHBrZ10pO1xuICByZXR1cm4gZXh0cmFjdE1hdGNoaW5nUGVybWlzc2lvbnMoc3Rkb3V0LCBbJ2luc3RhbGwnLCAncnVudGltZSddLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBmb3IgdGhlIHBhcnRpY3VsYXIgcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIHBhY2thZ2UgbmFtZSB0byBiZSBwcm9jZXNzZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gY21kT3V0cHV0IFtudWxsXSAtIE9wdGlvbmFsIHBhcmFtZXRlciBjb250YWluaW5nIGNvbW1hbmQgb3V0cHV0IG9mXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kdW1wc3lzIHBhY2thZ2VfIGNvbW1hbmQuIEl0IG1heSBzcGVlZCB1cCB0aGUgbWV0aG9kIGV4ZWN1dGlvbi5cbiAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59IFRoZSBsaXN0IG9mIHJlcXVlc3RlZCBwZXJtaXNzaW9ucyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldFJlcVBlcm1pc3Npb25zID0gYXN5bmMgZnVuY3Rpb24gZ2V0UmVxUGVybWlzc2lvbnMgKHBrZywgY21kT3V0cHV0ID0gbnVsbCkge1xuICBsb2cuZGVidWcoJ1JldHJpZXZpbmcgcmVxdWVzdGVkIHBlcm1pc3Npb25zJyk7XG4gIGNvbnN0IHN0ZG91dCA9IGNtZE91dHB1dCB8fCBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdwYWNrYWdlJywgcGtnXSk7XG4gIHJldHVybiBleHRyYWN0TWF0Y2hpbmdQZXJtaXNzaW9ucyhzdGRvdXQsIFsncmVxdWVzdGVkJ10pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBsb2NhdGlvbiBwcm92aWRlcnMgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIGxpc3Qgb2YgYXZhaWxhYmxlIGxvY2F0aW9uIHByb3ZpZGVycyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmdldExvY2F0aW9uUHJvdmlkZXJzID0gYXN5bmMgZnVuY3Rpb24gZ2V0TG9jYXRpb25Qcm92aWRlcnMgKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdzZWN1cmUnLCAnbG9jYXRpb25fcHJvdmlkZXJzX2FsbG93ZWQnKTtcbiAgcmV0dXJuIHN0ZG91dC50cmltKCkuc3BsaXQoJywnKVxuICAgIC5tYXAoKHApID0+IHAudHJpbSgpKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG59O1xuXG4vKipcbiAqIFRvZ2dsZSB0aGUgc3RhdGUgb2YgR1BTIGxvY2F0aW9uIHByb3ZpZGVyLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZW5hYmxlZCAtIFdoZXRoZXIgdG8gZW5hYmxlICh0cnVlKSBvciBkaXNhYmxlIChmYWxzZSkgdGhlIEdQUyBwcm92aWRlci5cbiAqL1xubWV0aG9kcy50b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyID0gYXN5bmMgZnVuY3Rpb24gdG9nZ2xlR1BTTG9jYXRpb25Qcm92aWRlciAoZW5hYmxlZCkge1xuICBhd2FpdCB0aGlzLnNldFNldHRpbmcoJ3NlY3VyZScsICdsb2NhdGlvbl9wcm92aWRlcnNfYWxsb3dlZCcsIGAke2VuYWJsZWQgPyAnKycgOiAnLSd9Z3BzYCk7XG59O1xuXG4vKipcbiAqIFNldCBoaWRkZW4gYXBpIHBvbGljeSB0byBtYW5hZ2UgYWNjZXNzIHRvIG5vbi1TREsgQVBJcy5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3ByZXZpZXcvcmVzdHJpY3Rpb25zLW5vbi1zZGstaW50ZXJmYWNlc1xuICpcbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWUgLSBUaGUgQVBJIGVuZm9yY2VtZW50IHBvbGljeS5cbiAqICAgICBGb3IgQW5kcm9pZCBQXG4gKiAgICAgMDogRGlzYWJsZSBub24tU0RLIEFQSSB1c2FnZSBkZXRlY3Rpb24uIFRoaXMgd2lsbCBhbHNvIGRpc2FibGUgbG9nZ2luZywgYW5kIGFsc28gYnJlYWsgdGhlIHN0cmljdCBtb2RlIEFQSSxcbiAqICAgICAgICBkZXRlY3ROb25TZGtBcGlVc2FnZSgpLiBOb3QgcmVjb21tZW5kZWQuXG4gKiAgICAgMTogXCJKdXN0IHdhcm5cIiAtIHBlcm1pdCBhY2Nlc3MgdG8gYWxsIG5vbi1TREsgQVBJcywgYnV0IGtlZXAgd2FybmluZ3MgaW4gdGhlIGxvZy5cbiAqICAgICAgICBUaGUgc3RyaWN0IG1vZGUgQVBJIHdpbGwga2VlcCB3b3JraW5nLlxuICogICAgIDI6IERpc2FsbG93IHVzYWdlIG9mIGRhcmsgZ3JleSBhbmQgYmxhY2sgbGlzdGVkIEFQSXMuXG4gKiAgICAgMzogRGlzYWxsb3cgdXNhZ2Ugb2YgYmxhY2tsaXN0ZWQgQVBJcywgYnV0IGFsbG93IHVzYWdlIG9mIGRhcmsgZ3JleSBsaXN0ZWQgQVBJcy5cbiAqXG4gKiAgICAgRm9yIEFuZHJvaWQgUVxuICogICAgIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3ByZXZpZXcvbm9uLXNkay1xI2VuYWJsZS1ub24tc2RrLWFjY2Vzc1xuICogICAgIDA6IERpc2FibGUgYWxsIGRldGVjdGlvbiBvZiBub24tU0RLIGludGVyZmFjZXMuIFVzaW5nIHRoaXMgc2V0dGluZyBkaXNhYmxlcyBhbGwgbG9nIG1lc3NhZ2VzIGZvciBub24tU0RLIGludGVyZmFjZSB1c2FnZVxuICogICAgICAgIGFuZCBwcmV2ZW50cyB5b3UgZnJvbSB0ZXN0aW5nIHlvdXIgYXBwIHVzaW5nIHRoZSBTdHJpY3RNb2RlIEFQSS4gVGhpcyBzZXR0aW5nIGlzIG5vdCByZWNvbW1lbmRlZC5cbiAqICAgICAxOiBFbmFibGUgYWNjZXNzIHRvIGFsbCBub24tU0RLIGludGVyZmFjZXMsIGJ1dCBwcmludCBsb2cgbWVzc2FnZXMgd2l0aCB3YXJuaW5ncyBmb3IgYW55IG5vbi1TREsgaW50ZXJmYWNlIHVzYWdlLlxuICogICAgICAgIFVzaW5nIHRoaXMgc2V0dGluZyBhbHNvIGFsbG93cyB5b3UgdG8gdGVzdCB5b3VyIGFwcCB1c2luZyB0aGUgU3RyaWN0TW9kZSBBUEkuXG4gKiAgICAgMjogRGlzYWxsb3cgdXNhZ2Ugb2Ygbm9uLVNESyBpbnRlcmZhY2VzIHRoYXQgYmVsb25nIHRvIGVpdGhlciB0aGUgYmxhY2sgbGlzdFxuICogICAgICAgIG9yIHRvIGEgcmVzdHJpY3RlZCBncmV5bGlzdCBmb3IgeW91ciB0YXJnZXQgQVBJIGxldmVsLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaWdub3JlRXJyb3IgW2ZhbHNlXSBXaGV0aGVyIHRvIGlnbm9yZSBhbiBleGNlcHRpb24gaW4gJ2FkYiBzaGVsbCBzZXR0aW5ncyBwdXQgZ2xvYmFsJyBjb21tYW5kXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIGFuZCBpZ25vcmVFcnJvciB3YXMgdHJ1ZSB3aGlsZSBleGVjdXRpbmcgJ2FkYiBzaGVsbCBzZXR0aW5ncyBwdXQgZ2xvYmFsJ1xuICogICAgICAgICAgICAgICAgIGNvbW1hbmQgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLnNldEhpZGRlbkFwaVBvbGljeSA9IGFzeW5jIGZ1bmN0aW9uIHNldEhpZGRlbkFwaVBvbGljeSAodmFsdWUsIGlnbm9yZUVycm9yID0gZmFsc2UpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLnNoZWxsKEhJRERFTl9BUElfUE9MSUNZX0tFWVMubWFwKChrKSA9PiBgc2V0dGluZ3MgcHV0IGdsb2JhbCAke2t9ICR7dmFsdWV9YCkuam9pbignOycpKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghaWdub3JlRXJyb3IpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIGxvZy5pbmZvKGBGYWlsZWQgdG8gc2V0IHNldHRpbmcga2V5cyAnJHtISURERU5fQVBJX1BPTElDWV9LRVlTfScgdG8gJyR7dmFsdWV9Jy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFJlc2V0IGFjY2VzcyB0byBub24tU0RLIEFQSXMgdG8gaXRzIGRlZmF1bHQgc2V0dGluZy5cbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3ByZXZpZXcvcmVzdHJpY3Rpb25zLW5vbi1zZGstaW50ZXJmYWNlc1xuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaWdub3JlRXJyb3IgW2ZhbHNlXSBXaGV0aGVyIHRvIGlnbm9yZSBhbiBleGNlcHRpb24gaW4gJ2FkYiBzaGVsbCBzZXR0aW5ncyBkZWxldGUgZ2xvYmFsJyBjb21tYW5kXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgdGhlcmUgd2FzIGFuIGVycm9yIGFuZCBpZ25vcmVFcnJvciB3YXMgdHJ1ZSB3aGlsZSBleGVjdXRpbmcgJ2FkYiBzaGVsbCBzZXR0aW5ncyBkZWxldGUgZ2xvYmFsJ1xuICogICAgICAgICAgICAgICAgIGNvbW1hbmQgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLnNldERlZmF1bHRIaWRkZW5BcGlQb2xpY3kgPSBhc3luYyBmdW5jdGlvbiBzZXREZWZhdWx0SGlkZGVuQXBpUG9saWN5IChpZ25vcmVFcnJvciA9IGZhbHNlKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChISURERU5fQVBJX1BPTElDWV9LRVlTLm1hcCgoaykgPT4gYHNldHRpbmdzIGRlbGV0ZSBnbG9iYWwgJHtrfWApLmpvaW4oJzsnKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoIWlnbm9yZUVycm9yKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICBsb2cuaW5mbyhgRmFpbGVkIHRvIGRlbGV0ZSBrZXlzICcke0hJRERFTl9BUElfUE9MSUNZX0tFWVN9Jy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFN0b3AgdGhlIHBhcnRpY3VsYXIgcGFja2FnZSBpZiBpdCBpcyBydW5uaW5nIGFuZCBjbGVhcnMgaXRzIGFwcGxpY2F0aW9uIGRhdGEuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBrZyAtIFRoZSBwYWNrYWdlIG5hbWUgdG8gYmUgcHJvY2Vzc2VkLlxuICovXG5tZXRob2RzLnN0b3BBbmRDbGVhciA9IGFzeW5jIGZ1bmN0aW9uIHN0b3BBbmRDbGVhciAocGtnKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5mb3JjZVN0b3AocGtnKTtcbiAgICBhd2FpdCB0aGlzLmNsZWFyKHBrZyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBzdG9wIGFuZCBjbGVhciAke3BrZ30uIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBhdmFpbGFibGUgaW5wdXQgbWV0aG9kcyAoSU1FcykgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIGxpc3Qgb2YgSU1FIG5hbWVzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKi9cbm1ldGhvZHMuYXZhaWxhYmxlSU1FcyA9IGFzeW5jIGZ1bmN0aW9uIGF2YWlsYWJsZUlNRXMgKCkge1xuICB0cnkge1xuICAgIHJldHVybiBnZXRJTUVMaXN0RnJvbU91dHB1dChhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ2xpc3QnLCAnLWEnXSkpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBFcnJvciBnZXR0aW5nIGF2YWlsYWJsZSBJTUUncy4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBsaXN0IG9mIGVuYWJsZWQgaW5wdXQgbWV0aG9kcyAoSU1FcykgZm9yIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIGxpc3Qgb2YgZW5hYmxlZCBJTUUgbmFtZXMgb3IgYW4gZW1wdHkgbGlzdC5cbiAqL1xubWV0aG9kcy5lbmFibGVkSU1FcyA9IGFzeW5jIGZ1bmN0aW9uIGVuYWJsZWRJTUVzICgpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZ2V0SU1FTGlzdEZyb21PdXRwdXQoYXdhaXQgdGhpcy5zaGVsbChbJ2ltZScsICdsaXN0J10pKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBlbmFibGVkIElNRSdzLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCk7XG4gIH1cbn07XG5cbi8qKlxuICogRW5hYmxlIHRoZSBwYXJ0aWN1bGFyIGlucHV0IG1ldGhvZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGltZUlkIC0gT25lIG9mIGV4aXN0aW5nIElNRSBpZHMuXG4gKi9cbm1ldGhvZHMuZW5hYmxlSU1FID0gYXN5bmMgZnVuY3Rpb24gZW5hYmxlSU1FIChpbWVJZCkge1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ2VuYWJsZScsIGltZUlkXSk7XG59O1xuXG4vKipcbiAqIERpc2FibGUgdGhlIHBhcnRpY3VsYXIgaW5wdXQgbWV0aG9kIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW1lSWQgLSBPbmUgb2YgZXhpc3RpbmcgSU1FIGlkcy5cbiAqL1xubWV0aG9kcy5kaXNhYmxlSU1FID0gYXN5bmMgZnVuY3Rpb24gZGlzYWJsZUlNRSAoaW1lSWQpIHtcbiAgYXdhaXQgdGhpcy5zaGVsbChbJ2ltZScsICdkaXNhYmxlJywgaW1lSWRdKTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBwYXJ0aWN1bGFyIGlucHV0IG1ldGhvZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGltZUlkIC0gT25lIG9mIGV4aXN0aW5nIElNRSBpZHMuXG4gKi9cbm1ldGhvZHMuc2V0SU1FID0gYXN5bmMgZnVuY3Rpb24gc2V0SU1FIChpbWVJZCkge1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnaW1lJywgJ3NldCcsIGltZUlkXSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCBpbnB1dCBtZXRob2Qgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBuYW1lIG9mIHRoZSBkZWZhdWx0IGlucHV0IG1ldGhvZFxuICovXG5tZXRob2RzLmRlZmF1bHRJTUUgPSBhc3luYyBmdW5jdGlvbiBkZWZhdWx0SU1FICgpIHtcbiAgdHJ5IHtcbiAgICBsZXQgZW5naW5lID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdzZWN1cmUnLCAnZGVmYXVsdF9pbnB1dF9tZXRob2QnKTtcbiAgICBpZiAoZW5naW5lID09PSAnbnVsbCcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gZW5naW5lLnRyaW0oKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyBkZWZhdWx0IElNRS4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHBhcnRpY3VsYXIga2V5Y29kZSB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBrZXljb2RlIC0gVGhlIGFjdHVhbCBrZXkgY29kZSB0byBiZSBzZW50LlxuICovXG5tZXRob2RzLmtleWV2ZW50ID0gYXN5bmMgZnVuY3Rpb24ga2V5ZXZlbnQgKGtleWNvZGUpIHtcbiAgLy8ga2V5Y29kZSBtdXN0IGJlIGFuIGludC5cbiAgbGV0IGNvZGUgPSBwYXJzZUludChrZXljb2RlLCAxMCk7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydpbnB1dCcsICdrZXlldmVudCcsIGNvZGVdKTtcbn07XG5cbi8qKlxuICogU2VuZCB0aGUgcGFydGljdWxhciB0ZXh0IG9yIGEgbnVtYmVyIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIFRoZSB0ZXh0IGdldHMgcHJvcGVybHkgZXNjYXBlZCBiZWZvcmUgYmVpbmcgcGFzc2VkIHRvIEFEQi5cbiAqIE5vb3AgaWYgdGhlIHRleHQgaXMgZW1wdHkuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSB0ZXh0IC0gVGhlIGFjdHVhbCB0ZXh0IHRvIGJlIHNlbnQuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgaXQgaXMgaW1wb3NzaWJsZSB0byBlc2NhcGUgdGhlIGdpdmVuIHN0cmluZ1xuICovXG5tZXRob2RzLmlucHV0VGV4dCA9IGFzeW5jIGZ1bmN0aW9uIGlucHV0VGV4dCAodGV4dCkge1xuICBpZiAodGV4dCA9PT0gJycpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBvcmlnaW5hbFN0ciA9IGAke3RleHR9YDtcbiAgY29uc3QgZXNjYXBlZFRleHQgPSBvcmlnaW5hbFN0ci5yZXBsYWNlKC9cXCQvZywgJ1xcXFwkJykucmVwbGFjZSgvIC9nLCAnJXMnKTtcbiAgbGV0IGFyZ3MgPSBbJ2lucHV0JywgJ3RleHQnLCBvcmlnaW5hbFN0cl07XG4gIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI1NzkxNDIzL2FkYi1zaGVsbC1pbnB1dC10ZXh0LWRvZXMtbm90LXRha2UtYW1wZXJzYW5kLWNoYXJhY3Rlci8yNTc5MTQ5OFxuICBjb25zdCBhZGJJbnB1dEVzY2FwZVBhdHRlcm4gPSAvWygpPD58OyYqXFxcXH5eXCInXS9nO1xuICBpZiAoZXNjYXBlZFRleHQgIT09IG9yaWdpbmFsU3RyIHx8IGFkYklucHV0RXNjYXBlUGF0dGVybi50ZXN0KG9yaWdpbmFsU3RyKSkge1xuICAgIGlmIChfLmV2ZXJ5KFsnXCInLCBgJ2BdLCAoYykgPT4gb3JpZ2luYWxTdHIuaW5jbHVkZXMoYykpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBEaWQgbm90IGtub3cgaG93IHRvIGVzY2FwZSBhIHN0cmluZyB0aGF0IGNvbnRhaW5zIGJvdGggdHlwZXMgb2YgcXVvdGVzIChcIiBhbmQgJylgXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBxID0gb3JpZ2luYWxTdHIuaW5jbHVkZXMoJ1wiJykgPyBgJ2AgOiAnXCInO1xuICAgIGFyZ3MgPSBbYGlucHV0IHRleHQgJHtxfSR7ZXNjYXBlZFRleHR9JHtxfWBdO1xuICB9XG4gIGF3YWl0IHRoaXMuc2hlbGwoYXJncyk7XG59O1xuXG4vKipcbiAqIENsZWFyIHRoZSBhY3RpdmUgdGV4dCBmaWVsZCBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgYnkgc2VuZGluZ1xuICogc3BlY2lhbCBrZXlldmVudHMgdG8gaXQuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IGxlbmd0aCBbMTAwXSAtIFRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgdGV4dCBpbiB0aGUgZmllbGQgdG8gYmUgY2xlYXJlZC5cbiAqL1xubWV0aG9kcy5jbGVhclRleHRGaWVsZCA9IGFzeW5jIGZ1bmN0aW9uIGNsZWFyVGV4dEZpZWxkIChsZW5ndGggPSAxMDApIHtcbiAgLy8gYXNzdW1lcyB0aGF0IHRoZSBFZGl0VGV4dCBmaWVsZCBhbHJlYWR5IGhhcyBmb2N1c1xuICBsb2cuZGVidWcoYENsZWFyaW5nIHVwIHRvICR7bGVuZ3RofSBjaGFyYWN0ZXJzYCk7XG4gIGlmIChsZW5ndGggPT09IDApIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbGV0IGFyZ3MgPSBbJ2lucHV0JywgJ2tleWV2ZW50J107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAvLyB3ZSBjYW5ub3Qga25vdyB3aGVyZSB0aGUgY3Vyc29yIGlzIGluIHRoZSB0ZXh0IGZpZWxkLCBzbyBkZWxldGUgYm90aCBiZWZvcmVcbiAgICAvLyBhbmQgYWZ0ZXIgc28gdGhhdCB3ZSBnZXQgcmlkIG9mIGV2ZXJ5dGhpbmdcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC92aWV3L0tleUV2ZW50Lmh0bWwjS0VZQ09ERV9ERUxcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5hbmRyb2lkLmNvbS9yZWZlcmVuY2UvYW5kcm9pZC92aWV3L0tleUV2ZW50Lmh0bWwjS0VZQ09ERV9GT1JXQVJEX0RFTFxuICAgIGFyZ3MucHVzaCgnNjcnLCAnMTEyJyk7XG4gIH1cbiAgYXdhaXQgdGhpcy5zaGVsbChhcmdzKTtcbn07XG5cbi8qKlxuICogU2VuZCB0aGUgc3BlY2lhbCBrZXljb2RlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdCBpbiBvcmRlciB0byBsb2NrIGl0LlxuICovXG5tZXRob2RzLmxvY2sgPSBhc3luYyBmdW5jdGlvbiBsb2NrICgpIHtcbiAgaWYgKGF3YWl0IHRoaXMuaXNTY3JlZW5Mb2NrZWQoKSkge1xuICAgIGxvZy5kZWJ1ZygnU2NyZWVuIGlzIGFscmVhZHkgbG9ja2VkLiBEb2luZyBub3RoaW5nLicpO1xuICAgIHJldHVybjtcbiAgfVxuICBsb2cuZGVidWcoJ1ByZXNzaW5nIHRoZSBLRVlDT0RFX1BPV0VSIGJ1dHRvbiB0byBsb2NrIHNjcmVlbicpO1xuICBhd2FpdCB0aGlzLmtleWV2ZW50KDI2KTtcblxuICBjb25zdCB0aW1lb3V0TXMgPSA1MDAwO1xuICB0cnkge1xuICAgIGF3YWl0IHdhaXRGb3JDb25kaXRpb24oYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5pc1NjcmVlbkxvY2tlZCgpLCB7XG4gICAgICB3YWl0TXM6IHRpbWVvdXRNcyxcbiAgICAgIGludGVydmFsTXM6IDUwMCxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVGhlIGRldmljZSBzY3JlZW4gaXMgc3RpbGwgbG9ja2VkIGFmdGVyICR7dGltZW91dE1zfW1zIHRpbWVvdXRgKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZW5kIHRoZSBzcGVjaWFsIGtleWNvZGUgdG8gdGhlIGRldmljZSB1bmRlciB0ZXN0IGluIG9yZGVyIHRvIGVtdWxhdGVcbiAqIEJhY2sgYnV0dG9uIHRhcC5cbiAqL1xubWV0aG9kcy5iYWNrID0gYXN5bmMgZnVuY3Rpb24gYmFjayAoKSB7XG4gIGxvZy5kZWJ1ZygnUHJlc3NpbmcgdGhlIEJBQ0sgYnV0dG9uJyk7XG4gIGF3YWl0IHRoaXMua2V5ZXZlbnQoNCk7XG59O1xuXG4vKipcbiAqIFNlbmQgdGhlIHNwZWNpYWwga2V5Y29kZSB0byB0aGUgZGV2aWNlIHVuZGVyIHRlc3QgaW4gb3JkZXIgdG8gZW11bGF0ZVxuICogSG9tZSBidXR0b24gdGFwLlxuICovXG5tZXRob2RzLmdvVG9Ib21lID0gYXN5bmMgZnVuY3Rpb24gZ29Ub0hvbWUgKCkge1xuICBsb2cuZGVidWcoJ1ByZXNzaW5nIHRoZSBIT01FIGJ1dHRvbicpO1xuICBhd2FpdCB0aGlzLmtleWV2ZW50KDMpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHRoZSBhY3R1YWwgcGF0aCB0byBhZGIgZXhlY3V0YWJsZS5cbiAqL1xubWV0aG9kcy5nZXRBZGJQYXRoID0gZnVuY3Rpb24gZ2V0QWRiUGF0aCAoKSB7XG4gIHJldHVybiB0aGlzLmV4ZWN1dGFibGUucGF0aDtcbn07XG5cbi8qKlxuICogUmV0cmlldmUgY3VycmVudCBzY3JlZW4gb3JpZW50YXRpb24gb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGN1cnJlbnQgb3JpZW50YXRpb24gZW5jb2RlZCBhcyBhbiBpbnRlZ2VyIG51bWJlci5cbiAqL1xubWV0aG9kcy5nZXRTY3JlZW5PcmllbnRhdGlvbiA9IGFzeW5jIGZ1bmN0aW9uIGdldFNjcmVlbk9yaWVudGF0aW9uICgpIHtcbiAgbGV0IHN0ZG91dCA9IGF3YWl0IHRoaXMuc2hlbGwoWydkdW1wc3lzJywgJ2lucHV0J10pO1xuICByZXR1cm4gZ2V0U3VyZmFjZU9yaWVudGF0aW9uKHN0ZG91dCk7XG59O1xuXG4vKipcbiAqIFNlbmQgYW4gYXJiaXRyYXJ5IFRlbG5ldCBjb21tYW5kIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tbWFuZCAtIFRoZSBjb21tYW5kIHRvIGJlIHNlbnQuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgYWN0dWFsIG91dHB1dCBvZiB0aGUgZ2l2ZW4gY29tbWFuZC5cbiAqL1xubWV0aG9kcy5zZW5kVGVsbmV0Q29tbWFuZCA9IGFzeW5jIGZ1bmN0aW9uIHNlbmRUZWxuZXRDb21tYW5kIChjb21tYW5kKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmV4ZWNFbXVDb25zb2xlQ29tbWFuZChjb21tYW5kLCB7cG9ydDogYXdhaXQgdGhpcy5nZXRFbXVsYXRvclBvcnQoKX0pO1xufTtcblxuLyoqXG4gKiBDaGVjayB0aGUgc3RhdGUgb2YgQWlycGxhbmUgbW9kZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBBaXJwbGFuZSBtb2RlIGlzIGVuYWJsZWQuXG4gKi9cbm1ldGhvZHMuaXNBaXJwbGFuZU1vZGVPbiA9IGFzeW5jIGZ1bmN0aW9uIGlzQWlycGxhbmVNb2RlT24gKCkge1xuICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICdhaXJwbGFuZV9tb2RlX29uJyk7XG4gIHJldHVybiBwYXJzZUludChzdGRvdXQsIDEwKSAhPT0gMDtcbiAgLy8gQWx0ZXJuYXRpdmVseSBmb3IgQW5kcm9pZCAxMSs6XG4gIC8vIHJldHVybiAoYXdhaXQgdGhpcy5zaGVsbChbJ2NtZCcsICdjb25uZWN0aXZpdHknLCAnYWlycGxhbmUtbW9kZSddKSkuc3Rkb3V0LnRyaW0oKSA9PT0gJ2VuYWJsZWQnO1xufTtcblxuLyoqXG4gKiBDaGFuZ2UgdGhlIHN0YXRlIG9mIEFpcnBsYW5lIG1vZGUgaW4gU2V0dGluZ3Mgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb24gLSBUcnVlIHRvIGVuYWJsZSB0aGUgQWlycGxhbmUgbW9kZSBpbiBTZXR0aW5ncyBhbmQgZmFsc2UgdG8gZGlzYWJsZSBpdC5cbiAqL1xubWV0aG9kcy5zZXRBaXJwbGFuZU1vZGUgPSBhc3luYyBmdW5jdGlvbiBzZXRBaXJwbGFuZU1vZGUgKG9uKSB7XG4gIGlmIChhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPCAzMCkge1xuICAgIC8vIFRoaXMgcmVxdWlyZXMgdG8gY2FsbCBicm9hZGNhc3RBaXJwbGFuZU1vZGUgYWZ0ZXJ3YXJkcyB0byBhcHBseVxuICAgIGF3YWl0IHRoaXMuc2V0U2V0dGluZygnZ2xvYmFsJywgJ2FpcnBsYW5lX21vZGVfb24nLCBvbiA/IDEgOiAwKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCB0aGlzLnNoZWxsKFsnY21kJywgJ2Nvbm5lY3Rpdml0eScsICdhaXJwbGFuZS1tb2RlJywgb24gPyAnZW5hYmxlJyA6ICdkaXNhYmxlJ10pO1xufTtcblxuLyoqXG4gKiBCcm9hZGNhc3QgdGhlIHN0YXRlIG9mIEFpcnBsYW5lIG1vZGUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogVGhpcyBtZXRob2Qgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB7QGxpbmsgI3NldEFpcnBsYW5lTW9kZX0sIG90aGVyd2lzZVxuICogdGhlIG1vZGUgY2hhbmdlIGlzIG5vdCBnb2luZyB0byBiZSBhcHBsaWVkIGZvciB0aGUgZGV2aWNlLlxuICogISBUaGlzIEFQSSByZXF1aXJlcyByb290IHNpbmNlIEFuZHJvaWQgQVBJIDI0LiBTaW5jZSBBUEkgMzBcbiAqIHRoZXJlIGlzIGEgZGVkaWNhdGVkIGFkYiBjb21tYW5kIHRvIGNoYW5nZSBhaXJwbGFuZSBtb2RlIHN0YXRlLCB3aGljaFxuICogZG9lcyBub3QgcmVxdWlyZSB0byBjYWxsIHRoaXMgb25lIGFmdGVyd2FyZHMuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBvbiAtIFRydWUgdG8gYnJvYWRjYXN0IGVuYWJsZSBhbmQgZmFsc2UgdG8gYnJvYWRjYXN0IGRpc2FibGUuXG4gKi9cbm1ldGhvZHMuYnJvYWRjYXN0QWlycGxhbmVNb2RlID0gYXN5bmMgZnVuY3Rpb24gYnJvYWRjYXN0QWlycGxhbmVNb2RlIChvbikge1xuICBjb25zdCBhcmdzID0gW1xuICAgICdhbScsICdicm9hZGNhc3QnLFxuICAgICctYScsICdhbmRyb2lkLmludGVudC5hY3Rpb24uQUlSUExBTkVfTU9ERScsXG4gICAgJy0tZXonLCAnc3RhdGUnLCBvbiA/ICd0cnVlJyA6ICdmYWxzZScsXG4gIF07XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5zaGVsbChhcmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy8xNzQyMlxuICAgIGlmIChfLmluY2x1ZGVzKGUuc3RkZXJyLCAnU2VjdXJpdHlFeGNlcHRpb24nKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgdGhpcy5zaGVsbChhcmdzLCB7cHJpdmlsZWdlZDogdHJ1ZX0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgfVxuICAgIHRocm93IGU7XG4gIH1cbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHN0YXRlIG9mIFdpRmkgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgV2lGaSBpcyBlbmFibGVkLlxuICovXG5tZXRob2RzLmlzV2lmaU9uID0gYXN5bmMgZnVuY3Rpb24gaXNXaWZpT24gKCkge1xuICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICd3aWZpX29uJyk7XG4gIHJldHVybiAocGFyc2VJbnQoc3Rkb3V0LCAxMCkgIT09IDApO1xuICAvLyBBbHRlcm5hdGl2ZSBmb3IgQW5kcm9pZCAxMSs6XG4gIC8vIHJldHVybiAoYXdhaXQgdGhpcy5zaGVsbChbJ2NtZCcsICd3aWZpJywgJ3N0YXR1cyddKS5zdGRvdXQuaW5jbHVkZXMoJ1dpZmkgaXMgZW5hYmxlZCcpKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgdGhlIHN0YXRlIG9mIERhdGEgdHJhbnNmZXIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgRGF0YSB0cmFuc2ZlciBpcyBlbmFibGVkLlxuICovXG5tZXRob2RzLmlzRGF0YU9uID0gYXN5bmMgZnVuY3Rpb24gaXNEYXRhT24gKCkge1xuICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICdtb2JpbGVfZGF0YScpO1xuICByZXR1cm4gKHBhcnNlSW50KHN0ZG91dCwgMTApICE9PSAwKTtcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBzdGF0ZSBvZiBXaUZpIGFuZC9vciBEYXRhIHRyYW5zZmVyIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHdpZmkgLSBUcnVlIHRvIGVuYWJsZSBhbmQgZmFsc2UgdG8gZGlzYWJsZSBXaUZpLlxuICogQHBhcmFtIHtib29sZWFufSBkYXRhIC0gVHJ1ZSB0byBlbmFibGUgYW5kIGZhbHNlIHRvIGRpc2FibGUgRGF0YSB0cmFuc2Zlci5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNFbXVsYXRvciBbZmFsc2VdIC0gU2V0IGl0IHRvIHRydWUgaWYgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzIGFuIGVtdWxhdG9yIHJhdGhlciB0aGFuIGEgcmVhbCBkZXZpY2UuXG4gKi9cbm1ldGhvZHMuc2V0V2lmaUFuZERhdGEgPSBhc3luYyBmdW5jdGlvbiBzZXRXaWZpQW5kRGF0YSAoe3dpZmksIGRhdGF9LCBpc0VtdWxhdG9yID0gZmFsc2UpIHtcbiAgaWYgKHV0aWwuaGFzVmFsdWUod2lmaSkpIHtcbiAgICBhd2FpdCB0aGlzLnNldFdpZmlTdGF0ZSh3aWZpLCBpc0VtdWxhdG9yKTtcbiAgfVxuICBpZiAodXRpbC5oYXNWYWx1ZShkYXRhKSkge1xuICAgIGF3YWl0IHRoaXMuc2V0RGF0YVN0YXRlKGRhdGEsIGlzRW11bGF0b3IpO1xuICB9XG59O1xuXG4vKipcbiAqIENoZWNrIHRoZSBzdGF0ZSBvZiBhbmltYXRpb24gb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYXQgbGVhc3Qgb25lIG9mIGFuaW1hdGlvbiBzY2FsZSBzZXR0aW5nc1xuICogICAgICAgICAgICAgICAgICAgaXMgbm90IGVxdWFsIHRvICcwLjAnLlxuICovXG5tZXRob2RzLmlzQW5pbWF0aW9uT24gPSBhc3luYyBmdW5jdGlvbiBpc0FuaW1hdGlvbk9uICgpIHtcbiAgbGV0IGFuaW1hdG9yX2R1cmF0aW9uX3NjYWxlID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAnYW5pbWF0b3JfZHVyYXRpb25fc2NhbGUnKTtcbiAgbGV0IHRyYW5zaXRpb25fYW5pbWF0aW9uX3NjYWxlID0gYXdhaXQgdGhpcy5nZXRTZXR0aW5nKCdnbG9iYWwnLCAndHJhbnNpdGlvbl9hbmltYXRpb25fc2NhbGUnKTtcbiAgbGV0IHdpbmRvd19hbmltYXRpb25fc2NhbGUgPSBhd2FpdCB0aGlzLmdldFNldHRpbmcoJ2dsb2JhbCcsICd3aW5kb3dfYW5pbWF0aW9uX3NjYWxlJyk7XG4gIHJldHVybiBfLnNvbWUoW2FuaW1hdG9yX2R1cmF0aW9uX3NjYWxlLCB0cmFuc2l0aW9uX2FuaW1hdGlvbl9zY2FsZSwgd2luZG93X2FuaW1hdGlvbl9zY2FsZV0sXG4gICAgICAgICAgICAgICAgKHNldHRpbmcpID0+IHNldHRpbmcgIT09ICcwLjAnKTtcbn07XG5cbi8qKlxuICogRm9yY2VmdWxseSByZWN1cnNpdmVseSByZW1vdmUgYSBwYXRoIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqIEJlIGNhcmVmdWwgd2hpbGUgY2FsbGluZyB0aGlzIG1ldGhvZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCAtIFRoZSBwYXRoIHRvIGJlIHJlbW92ZWQgcmVjdXJzaXZlbHkuXG4gKi9cbm1ldGhvZHMucmltcmFmID0gYXN5bmMgZnVuY3Rpb24gcmltcmFmIChwYXRoKSB7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydybScsICctcmYnLCBwYXRoXSk7XG59O1xuXG4vKipcbiAqIFNlbmQgYSBmaWxlIHRvIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9jYWxQYXRoIC0gVGhlIHBhdGggdG8gdGhlIGZpbGUgb24gdGhlIGxvY2FsIGZpbGUgc3lzdGVtLlxuICogQHBhcmFtIHtzdHJpbmd9IHJlbW90ZVBhdGggLSBUaGUgZGVzdGluYXRpb24gcGF0aCBvbiB0aGUgcmVtb3RlIGRldmljZS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzIC0gQWRkaXRpb25hbCBvcHRpb25zIG1hcHBpbmcuIFNlZVxuICogICAgICAgICAgICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL25vZGUtdGVlbl9wcm9jZXNzLFxuICogICAgICAgICAgICAgICAgICAgICAgICBfZXhlY18gbWV0aG9kIG9wdGlvbnMsIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGF2YWlsYWJsZVxuICogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLlxuICovXG5tZXRob2RzLnB1c2ggPSBhc3luYyBmdW5jdGlvbiBwdXNoIChsb2NhbFBhdGgsIHJlbW90ZVBhdGgsIG9wdHMpIHtcbiAgYXdhaXQgdGhpcy5ta2RpcihwYXRoLnBvc2l4LmRpcm5hbWUocmVtb3RlUGF0aCkpO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydwdXNoJywgbG9jYWxQYXRoLCByZW1vdGVQYXRoXSwgb3B0cyk7XG59O1xuXG4vKipcbiAqIFJlY2VpdmUgYSBmaWxlIGZyb20gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSByZW1vdGVQYXRoIC0gVGhlIHNvdXJjZSBwYXRoIG9uIHRoZSByZW1vdGUgZGV2aWNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGxvY2FsUGF0aCAtIFRoZSBkZXN0aW5hdGlvbiBwYXRoIHRvIHRoZSBmaWxlIG9uIHRoZSBsb2NhbCBmaWxlIHN5c3RlbS5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzIC0gQWRkaXRpb25hbCBvcHRpb25zIG1hcHBpbmcuIFNlZVxuICogICAgICAgICAgICAgICAgICAgICAgICBodHRwczovL2dpdGh1Yi5jb20vYXBwaXVtL25vZGUtdGVlbl9wcm9jZXNzLFxuICogICAgICAgICAgICAgICAgICAgICAgICBfZXhlY18gbWV0aG9kIG9wdGlvbnMsIGZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGF2YWlsYWJsZVxuICogICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLlxuICovXG5tZXRob2RzLnB1bGwgPSBhc3luYyBmdW5jdGlvbiBwdWxsIChyZW1vdGVQYXRoLCBsb2NhbFBhdGgsIG9wdHMgPSB7fSkge1xuICAvLyBwdWxsIGZvbGRlciBjYW4gdGFrZSBtb3JlIHRpbWUsIGluY3JlYXNpbmcgdGltZSBvdXQgdG8gNjAgc2Vjc1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydwdWxsJywgcmVtb3RlUGF0aCwgbG9jYWxQYXRoXSwgey4uLm9wdHMsIHRpbWVvdXQ6IG9wdHMudGltZW91dCA/PyA2MDAwMH0pO1xufTtcblxuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBwcm9jZXNzIHdpdGggdGhlIHBhcnRpY3VsYXIgbmFtZSBpcyBydW5uaW5nIG9uIHRoZSBkZXZpY2VcbiAqIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb2Nlc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHByb2Nlc3MgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGdpdmVuIHByb2Nlc3MgaXMgcnVubmluZy5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgZ2l2ZW4gcHJvY2VzcyBuYW1lIGlzIG5vdCBhIHZhbGlkIGNsYXNzIG5hbWUuXG4gKi9cbm1ldGhvZHMucHJvY2Vzc0V4aXN0cyA9IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NFeGlzdHMgKHByb2Nlc3NOYW1lKSB7XG4gIHJldHVybiAhXy5pc0VtcHR5KGF3YWl0IHRoaXMuZ2V0UElEc0J5TmFtZShwcm9jZXNzTmFtZSkpO1xufTtcblxuLyoqXG4gKiBHZXQgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC4gQW4gYXJyYXkgY29udGFpbnMgZWFjaCBmb3J3YXJkaW5nIGxpbmUgb2Ygb3V0cHV0XG4gKi9cbm1ldGhvZHMuZ2V0Rm9yd2FyZExpc3QgPSBhc3luYyBmdW5jdGlvbiBnZXRGb3J3YXJkTGlzdCAoKSB7XG4gIGxvZy5kZWJ1ZyhgTGlzdCBmb3J3YXJkaW5nIHBvcnRzYCk7XG4gIGNvbnN0IGNvbm5lY3Rpb25zID0gYXdhaXQgdGhpcy5hZGJFeGVjKFsnZm9yd2FyZCcsICctLWxpc3QnXSk7XG4gIHJldHVybiBjb25uZWN0aW9ucy5zcGxpdChFT0wpLmZpbHRlcigobGluZSkgPT4gQm9vbGVhbihsaW5lLnRyaW0oKSkpO1xufTtcblxuLyoqXG4gKiBTZXR1cCBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHN5c3RlbVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSBsb2NhbCBzeXN0ZW0gcG9ydC5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gZGV2aWNlUG9ydCAtIFRoZSBudW1iZXIgb2YgdGhlIHJlbW90ZSBkZXZpY2UgcG9ydC5cbiAqL1xubWV0aG9kcy5mb3J3YXJkUG9ydCA9IGFzeW5jIGZ1bmN0aW9uIGZvcndhcmRQb3J0IChzeXN0ZW1Qb3J0LCBkZXZpY2VQb3J0KSB7XG4gIGxvZy5kZWJ1ZyhgRm9yd2FyZGluZyBzeXN0ZW06ICR7c3lzdGVtUG9ydH0gdG8gZGV2aWNlOiAke2RldmljZVBvcnR9YCk7XG4gIGF3YWl0IHRoaXMuYWRiRXhlYyhbJ2ZvcndhcmQnLCBgdGNwOiR7c3lzdGVtUG9ydH1gLCBgdGNwOiR7ZGV2aWNlUG9ydH1gXSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBUQ1AgcG9ydCBmb3J3YXJkaW5nIHdpdGggYWRiIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC4gVGhlIGZvcndhcmRpbmdcbiAqIGZvciB0aGUgZ2l2ZW4gcG9ydCBzaG91bGQgYmUgc2V0dXAgd2l0aCB7QGxpbmsgI2ZvcndhcmRQb3J0fSBmaXJzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHN5c3RlbVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSBsb2NhbCBzeXN0ZW0gcG9ydFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gcmVtb3ZlIGZvcndhcmRpbmcgb24uXG4gKi9cbm1ldGhvZHMucmVtb3ZlUG9ydEZvcndhcmQgPSBhc3luYyBmdW5jdGlvbiByZW1vdmVQb3J0Rm9yd2FyZCAoc3lzdGVtUG9ydCkge1xuICBsb2cuZGVidWcoYFJlbW92aW5nIGZvcndhcmRlZCBwb3J0IHNvY2tldCBjb25uZWN0aW9uOiAke3N5c3RlbVBvcnR9IGApO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydmb3J3YXJkJywgYC0tcmVtb3ZlYCwgYHRjcDoke3N5c3RlbVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBHZXQgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKiBAcmV0dXJuIHtBcnJheS48U3RyaW5nPn0gVGhlIG91dHB1dCBvZiB0aGUgY29ycmVzcG9uZGluZyBhZGIgY29tbWFuZC4gQW4gYXJyYXkgY29udGFpbnMgZWFjaCBmb3J3YXJkaW5nIGxpbmUgb2Ygb3V0cHV0XG4gKi9cbm1ldGhvZHMuZ2V0UmV2ZXJzZUxpc3QgPSBhc3luYyBmdW5jdGlvbiBnZXRSZXZlcnNlTGlzdCAoKSB7XG4gIGxvZy5kZWJ1ZyhgTGlzdCByZXZlcnNlIGZvcndhcmRpbmcgcG9ydHNgKTtcbiAgY29uc3QgY29ubmVjdGlvbnMgPSBhd2FpdCB0aGlzLmFkYkV4ZWMoWydyZXZlcnNlJywgJy0tbGlzdCddKTtcbiAgcmV0dXJuIGNvbm5lY3Rpb25zLnNwbGl0KEVPTCkuZmlsdGVyKChsaW5lKSA9PiBCb29sZWFuKGxpbmUudHJpbSgpKSk7XG59O1xuXG4vKipcbiAqIFNldHVwIFRDUCBwb3J0IGZvcndhcmRpbmcgd2l0aCBhZGIgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogT25seSBhdmFpbGFibGUgZm9yIEFQSSAyMSsuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBkZXZpY2VQb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgcmVtb3RlIGRldmljZSBwb3J0LlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnQuXG4gKi9cbm1ldGhvZHMucmV2ZXJzZVBvcnQgPSBhc3luYyBmdW5jdGlvbiByZXZlcnNlUG9ydCAoZGV2aWNlUG9ydCwgc3lzdGVtUG9ydCkge1xuICBsb2cuZGVidWcoYEZvcndhcmRpbmcgZGV2aWNlOiAke2RldmljZVBvcnR9IHRvIHN5c3RlbTogJHtzeXN0ZW1Qb3J0fWApO1xuICBhd2FpdCB0aGlzLmFkYkV4ZWMoWydyZXZlcnNlJywgYHRjcDoke2RldmljZVBvcnR9YCwgYHRjcDoke3N5c3RlbVBvcnR9YF0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuIFRoZSBmb3J3YXJkaW5nXG4gKiBmb3IgdGhlIGdpdmVuIHBvcnQgc2hvdWxkIGJlIHNldHVwIHdpdGgge0BsaW5rICNmb3J3YXJkUG9ydH0gZmlyc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBkZXZpY2VQb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgcmVtb3RlIGRldmljZSBwb3J0XG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0byByZW1vdmUgZm9yd2FyZGluZyBvbi5cbiAqL1xubWV0aG9kcy5yZW1vdmVQb3J0UmV2ZXJzZSA9IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVBvcnRSZXZlcnNlIChkZXZpY2VQb3J0KSB7XG4gIGxvZy5kZWJ1ZyhgUmVtb3ZpbmcgcmV2ZXJzZSBmb3J3YXJkZWQgcG9ydCBzb2NrZXQgY29ubmVjdGlvbjogJHtkZXZpY2VQb3J0fSBgKTtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsncmV2ZXJzZScsIGAtLXJlbW92ZWAsIGB0Y3A6JHtkZXZpY2VQb3J0fWBdKTtcbn07XG5cbi8qKlxuICogU2V0dXAgVENQIHBvcnQgZm9yd2FyZGluZyB3aXRoIGFkYiBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuIFRoZSBkaWZmZXJlbmNlXG4gKiBiZXR3ZWVuIHtAbGluayAjZm9yd2FyZFBvcnR9IGlzIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBzZXR1cCBmb3IgYW4gYWJzdHJhY3RcbiAqIGxvY2FsIHBvcnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBzeXN0ZW1Qb3J0IC0gVGhlIG51bWJlciBvZiB0aGUgbG9jYWwgc3lzdGVtIHBvcnQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGRldmljZVBvcnQgLSBUaGUgbnVtYmVyIG9mIHRoZSByZW1vdGUgZGV2aWNlIHBvcnQuXG4gKi9cbm1ldGhvZHMuZm9yd2FyZEFic3RyYWN0UG9ydCA9IGFzeW5jIGZ1bmN0aW9uIGZvcndhcmRBYnN0cmFjdFBvcnQgKHN5c3RlbVBvcnQsIGRldmljZVBvcnQpIHtcbiAgbG9nLmRlYnVnKGBGb3J3YXJkaW5nIHN5c3RlbTogJHtzeXN0ZW1Qb3J0fSB0byBhYnN0cmFjdCBkZXZpY2U6ICR7ZGV2aWNlUG9ydH1gKTtcbiAgYXdhaXQgdGhpcy5hZGJFeGVjKFsnZm9yd2FyZCcsIGB0Y3A6JHtzeXN0ZW1Qb3J0fWAsIGBsb2NhbGFic3RyYWN0OiR7ZGV2aWNlUG9ydH1gXSk7XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgcGluZyBzaGVsbCBjb21tYW5kIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21tYW5kIG91dHB1dCBjb250YWlucyAncGluZycgc3Vic3RyaW5nLlxuICogQHRocm93cyB7ZXJyb3J9IElmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSBleGVjdXRpbmcgJ3BpbmcnIGNvbW1hbmQgb24gdGhlXG4gKiAgICAgICAgICAgICAgICAgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMucGluZyA9IGFzeW5jIGZ1bmN0aW9uIHBpbmcgKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ2VjaG8nLCAncGluZyddKTtcbiAgaWYgKHN0ZG91dC5pbmRleE9mKCdwaW5nJykgPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICB0aHJvdyBuZXcgRXJyb3IoYEFEQiBwaW5nIGZhaWxlZCwgcmV0dXJuZWQgJHtzdGRvdXR9YCk7XG59O1xuXG4vKipcbiAqIFJlc3RhcnQgdGhlIGRldmljZSB1bmRlciB0ZXN0IHVzaW5nIGFkYiBjb21tYW5kcy5cbiAqXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgc3RhcnQgZmFpbHMuXG4gKi9cbm1ldGhvZHMucmVzdGFydCA9IGFzeW5jIGZ1bmN0aW9uIHJlc3RhcnQgKCkge1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuc3RvcExvZ2NhdCgpO1xuICAgIGF3YWl0IHRoaXMucmVzdGFydEFkYigpO1xuICAgIGF3YWl0IHRoaXMud2FpdEZvckRldmljZSg2MCk7XG4gICAgYXdhaXQgdGhpcy5zdGFydExvZ2NhdCh0aGlzLl9sb2djYXRTdGFydHVwUGFyYW1zKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgUmVzdGFydCBmYWlsZWQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBMb2djYXRPcHRzXG4gKiBAcHJvcGVydHkge3N0cmluZ30gZm9ybWF0IFRoZSBsb2cgcHJpbnQgZm9ybWF0LCB3aGVyZSA8Zm9ybWF0PiBpcyBvbmUgb2Y6XG4gKiAgIGJyaWVmIHByb2Nlc3MgdGFnIHRocmVhZCByYXcgdGltZSB0aHJlYWR0aW1lIGxvbmdcbiAqIGB0aHJlYWR0aW1lYCBpcyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAqIEBwcm9wZXJ0eSB7QXJyYXk8c3RyaW5nPn0gZmlsdGVyU3BlY3MgU2VyaWVzIG9mIDx0YWc+Wzpwcmlvcml0eV1cbiAqIHdoZXJlIDx0YWc+IGlzIGEgbG9nIGNvbXBvbmVudCB0YWcgKG9yICogZm9yIGFsbCkgYW5kIHByaW9yaXR5IGlzOlxuICogIFYgICAgVmVyYm9zZVxuICogIEQgICAgRGVidWdcbiAqICBJICAgIEluZm9cbiAqICBXICAgIFdhcm5cbiAqICBFICAgIEVycm9yXG4gKiAgRiAgICBGYXRhbFxuICogIFMgICAgU2lsZW50IChzdXByZXNzIGFsbCBvdXRwdXQpXG4gKlxuICogJyonIG1lYW5zICcqOmQnIGFuZCA8dGFnPiBieSBpdHNlbGYgbWVhbnMgPHRhZz46dlxuICpcbiAqIElmIG5vdCBzcGVjaWZpZWQgb24gdGhlIGNvbW1hbmRsaW5lLCBmaWx0ZXJzcGVjIGlzIHNldCBmcm9tIEFORFJPSURfTE9HX1RBR1MuXG4gKiBJZiBubyBmaWx0ZXJzcGVjIGlzIGZvdW5kLCBmaWx0ZXIgZGVmYXVsdHMgdG8gJyo6SSdcbiAqL1xuXG4vKipcbiAqIFN0YXJ0IHRoZSBsb2djYXQgcHJvY2VzcyB0byBnYXRoZXIgbG9ncy5cbiAqXG4gKiBAcGFyYW0gez9Mb2djYXRPcHRzfSBvcHRzXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgcmVzdGFydCBmYWlscy5cbiAqL1xubWV0aG9kcy5zdGFydExvZ2NhdCA9IGFzeW5jIGZ1bmN0aW9uIHN0YXJ0TG9nY2F0IChvcHRzID0ge30pIHtcbiAgaWYgKCFfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIHN0YXJ0IGxvZ2NhdCBjYXB0dXJlIGJ1dCBpdCdzIGFscmVhZHkgc3RhcnRlZCFcIik7XG4gIH1cblxuICB0aGlzLmxvZ2NhdCA9IG5ldyBMb2djYXQoe1xuICAgIGFkYjogdGhpcy5leGVjdXRhYmxlLFxuICAgIGRlYnVnOiBmYWxzZSxcbiAgICBkZWJ1Z1RyYWNlOiBmYWxzZSxcbiAgICBjbGVhckRldmljZUxvZ3NPblN0YXJ0OiAhIXRoaXMuY2xlYXJEZXZpY2VMb2dzT25TdGFydCxcbiAgfSk7XG4gIGF3YWl0IHRoaXMubG9nY2F0LnN0YXJ0Q2FwdHVyZShvcHRzKTtcbiAgdGhpcy5fbG9nY2F0U3RhcnR1cFBhcmFtcyA9IG9wdHM7XG59O1xuXG4vKipcbiAqIFN0b3AgdGhlIGFjdGl2ZSBsb2djYXQgcHJvY2VzcyB3aGljaCBnYXRoZXJzIGxvZ3MuXG4gKiBUaGUgY2FsbCB3aWxsIGJlIGlnbm9yZWQgaWYgbm8gbG9nY2F0IHByb2Nlc3MgaXMgcnVubmluZy5cbiAqL1xubWV0aG9kcy5zdG9wTG9nY2F0ID0gYXN5bmMgZnVuY3Rpb24gc3RvcExvZ2NhdCAoKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5sb2djYXQuc3RvcENhcHR1cmUoKTtcbiAgfSBmaW5hbGx5IHtcbiAgICB0aGlzLmxvZ2NhdCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIG91dHB1dCBmcm9tIHRoZSBjdXJyZW50bHkgcnVubmluZyBsb2djYXQgcHJvY2Vzcy5cbiAqIFRoZSBsb2djYXQgcHJvY2VzcyBzaG91bGQgYmUgZXhlY3V0ZWQgYnkgezJsaW5rICNzdGFydExvZ2NhdH0gbWV0aG9kLlxuICpcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbGxlY3RlZCBsb2djYXQgb3V0cHV0LlxuICogQHRocm93cyB7RXJyb3J9IElmIGxvZ2NhdCBwcm9jZXNzIGlzIG5vdCBydW5uaW5nLlxuICovXG5tZXRob2RzLmdldExvZ2NhdExvZ3MgPSBmdW5jdGlvbiBnZXRMb2djYXRMb2dzICgpIHtcbiAgaWYgKF8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW4ndCBnZXQgbG9nY2F0IGxvZ3Mgc2luY2UgbG9nY2F0IGhhc24ndCBzdGFydGVkXCIpO1xuICB9XG4gIHJldHVybiB0aGlzLmxvZ2NhdC5nZXRMb2dzKCk7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY2FsbGJhY2sgZm9yIHRoZSBsb2djYXQgb3V0cHV0IGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpc3RlbmVyIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uLCB3aGljaCBhY2NlcHRzIG9uZSBhcmd1bWVudC4gVGhlIGFyZ3VtZW50IGlzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgbG9nIHJlY29yZCBvYmplY3Qgd2l0aCBgdGltZXN0YW1wYCwgYGxldmVsYCBhbmQgYG1lc3NhZ2VgIHByb3BlcnRpZXMuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgbG9nY2F0IHByb2Nlc3MgaXMgbm90IHJ1bm5pbmcuXG4gKi9cbm1ldGhvZHMuc2V0TG9nY2F0TGlzdGVuZXIgPSBmdW5jdGlvbiBzZXRMb2djYXRMaXN0ZW5lciAobGlzdGVuZXIpIHtcbiAgaWYgKF8uaXNFbXB0eSh0aGlzLmxvZ2NhdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJMb2djYXQgcHJvY2VzcyBoYXNuJ3QgYmVlbiBzdGFydGVkXCIpO1xuICB9XG4gIHRoaXMubG9nY2F0Lm9uKCdvdXRwdXQnLCBsaXN0ZW5lcik7XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgdGhlIHByZXZpb3VzbHkgc2V0IGNhbGxiYWNrIGZvciB0aGUgbG9nY2F0IG91dHB1dCBldmVudC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaXN0ZW5lciAtIFRoZSBsaXN0ZW5lciBmdW5jdGlvbiwgd2hpY2ggaGFzIGJlZW4gcHJldmlvdXNseVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzZWQgdG8gYHNldExvZ2NhdExpc3RlbmVyYFxuICogQHRocm93cyB7RXJyb3J9IElmIGxvZ2NhdCBwcm9jZXNzIGlzIG5vdCBydW5uaW5nLlxuICovXG5tZXRob2RzLnJlbW92ZUxvZ2NhdExpc3RlbmVyID0gZnVuY3Rpb24gcmVtb3ZlTG9nY2F0TGlzdGVuZXIgKGxpc3RlbmVyKSB7XG4gIGlmIChfLmlzRW1wdHkodGhpcy5sb2djYXQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiTG9nY2F0IHByb2Nlc3MgaGFzbid0IGJlZW4gc3RhcnRlZFwiKTtcbiAgfVxuICB0aGlzLmxvZ2NhdC5yZW1vdmVMaXN0ZW5lcignb3V0cHV0JywgbGlzdGVuZXIpO1xufTtcblxuLyoqXG4gKiBBdCBzb21lIHBvaW50IG9mIHRpbWUgR29vZ2xlIGhhcyBjaGFuZ2VkIHRoZSBkZWZhdWx0IGBwc2AgYmVoYXZpb3VyLCBzbyBpdCBvbmx5XG4gKiBsaXN0cyBwcm9jZXNzZXMgdGhhdCBiZWxvbmcgdG8gdGhlIGN1cnJlbnQgc2hlbGwgdXNlciByYXRoZXIgdG8gYWxsXG4gKiB1c2Vycy4gSXQgaXMgbmVjZXNzYXJ5IHRvIGV4ZWN1dGUgcHMgd2l0aCAtQSBjb21tYW5kIGxpbmUgYXJndW1lbnRcbiAqIHRvIG1pbWljIHRoZSBwcmV2aW91cyBiZWhhdmlvdXIuXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gdGhlIG91dHB1dCBvZiBgcHNgIGNvbW1hbmQgd2hlcmUgYWxsIHByb2Nlc3NlcyBhcmUgaW5jbHVkZWRcbiAqL1xubWV0aG9kcy5saXN0UHJvY2Vzc1N0YXR1cyA9IGFzeW5jIGZ1bmN0aW9uIGxpc3RQcm9jZXNzU3RhdHVzICgpIHtcbiAgaWYgKCFfLmlzQm9vbGVhbih0aGlzLl9kb2VzUHNTdXBwb3J0QU9wdGlvbikpIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy5fZG9lc1BzU3VwcG9ydEFPcHRpb24gPSAvXi1BXFxiL20udGVzdChhd2FpdCB0aGlzLnNoZWxsKFsncHMnLCAnLS1oZWxwJ10pKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBsb2cuZGVidWcoZS5zdGFjayk7XG4gICAgICB0aGlzLl9kb2VzUHNTdXBwb3J0QU9wdGlvbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbCh0aGlzLl9kb2VzUHNTdXBwb3J0QU9wdGlvbiA/IFsncHMnLCAnLUEnXSA6IFsncHMnXSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgcHJvY2VzcyBuYW1lIGZvciB0aGUgZ2l2ZW4gcHJvY2VzcyBpZGVudGlmaWVyXG4gKlxuICogQHBhcmFtIHtzdHJpbmd8bnVtYmVyfSBwaWQgLSBUaGUgdmFsaWQgcHJvY2VzcyBpZGVudGlmaWVyXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIGdpdmVuIFBJRCBpcyBlaXRoZXIgaW52YWxpZCBvciBpcyBub3QgcHJlc2VudFxuICogaW4gdGhlIGFjdGl2ZSBwcm9jZXNzZXMgbGlzdFxuICogQHJldHVybnMge3N0cmluZ30gVGhlIHByb2Nlc3MgbmFtZVxuICovXG5tZXRob2RzLmdldE5hbWVCeVBpZCA9IGFzeW5jIGZ1bmN0aW9uIGdldE5hbWVCeVBpZCAocGlkKSB7XG4gIGlmIChpc05hTihwaWQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgUElEIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBudW1iZXIuICcke3BpZH0nIGlzIGdpdmVuIGluc3RlYWRgKTtcbiAgfVxuICBwaWQgPSBwYXJzZUludChwaWQsIDEwKTtcblxuICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLmxpc3RQcm9jZXNzU3RhdHVzKCk7XG4gIGNvbnN0IHRpdGxlTWF0Y2ggPSBQU19USVRMRV9QQVRURVJOLmV4ZWMoc3Rkb3V0KTtcbiAgaWYgKCF0aXRsZU1hdGNoKSB7XG4gICAgbG9nLmRlYnVnKHN0ZG91dCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZ2V0IHRoZSBwcm9jZXNzIG5hbWUgZm9yIFBJRCAnJHtwaWR9J2ApO1xuICB9XG4gIGNvbnN0IGFsbFRpdGxlcyA9IHRpdGxlTWF0Y2hbMV0udHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gIGNvbnN0IHBpZEluZGV4ID0gYWxsVGl0bGVzLmluZGV4T2YoUElEX0NPTFVNTl9USVRMRSk7XG4gIC8vIGl0IG1pZ2h0IG5vdCBiZSBzdGFibGUgdG8gdGFrZSBOQU1FIGJ5IGluZGV4LCBiZWNhdXNlIGRlcGVuZGluZyBvbiB0aGVcbiAgLy8gYWN0dWFsIFNESyB0aGUgcHMgb3V0cHV0IG1pZ2h0IG5vdCBjb250YWluIGFuIGFiYnJldmlhdGlvbiBmb3IgdGhlIFMgZmxhZzpcbiAgLy8gVVNFUiAgICAgUElEICAgUFBJRCAgVlNJWkUgIFJTUyAgICAgV0NIQU4gICAgUEMgICAgICAgIE5BTUVcbiAgLy8gVVNFUiAgICAgUElEICAgUFBJRCAgVlNJWkUgIFJTUyAgICAgV0NIQU4gICAgUEMgICBTICAgIE5BTUVcbiAgY29uc3QgbmFtZU9mZnNldCA9IGFsbFRpdGxlcy5pbmRleE9mKFBST0NFU1NfTkFNRV9DT0xVTU5fVElUTEUpIC0gYWxsVGl0bGVzLmxlbmd0aDtcbiAgY29uc3QgcGlkUmVnZXggPSBuZXcgUmVnRXhwKGBeKC4qXFxcXGIke3BpZH1cXFxcYi4qKSRgLCAnZ20nKTtcbiAgbGV0IG1hdGNoZWRMaW5lO1xuICB3aGlsZSAoKG1hdGNoZWRMaW5lID0gcGlkUmVnZXguZXhlYyhzdGRvdXQpKSkge1xuICAgIGNvbnN0IGl0ZW1zID0gbWF0Y2hlZExpbmVbMV0udHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gICAgaWYgKHBhcnNlSW50KGl0ZW1zW3BpZEluZGV4XSwgMTApID09PSBwaWQgJiYgaXRlbXNbaXRlbXMubGVuZ3RoICsgbmFtZU9mZnNldF0pIHtcbiAgICAgIHJldHVybiBpdGVtc1tpdGVtcy5sZW5ndGggKyBuYW1lT2Zmc2V0XTtcbiAgICB9XG4gIH1cbiAgbG9nLmRlYnVnKHN0ZG91dCk7XG4gIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGdldCB0aGUgcHJvY2VzcyBuYW1lIGZvciBQSUQgJyR7cGlkfSdgKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBsaXN0IG9mIHByb2Nlc3MgaWRzIGZvciB0aGUgcGFydGljdWxhciBwcm9jZXNzIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSAtIFRoZSBwYXJ0IG9mIHByb2Nlc3MgbmFtZS5cbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBUaGUgbGlzdCBvZiBtYXRjaGVkIHByb2Nlc3MgSURzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgdGhlIHBhc3NlZCBwcm9jZXNzIG5hbWUgaXMgbm90IGEgdmFsaWQgb25lXG4gKi9cbm1ldGhvZHMuZ2V0UElEc0J5TmFtZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFBJRHNCeU5hbWUgKG5hbWUpIHtcbiAgbG9nLmRlYnVnKGBHZXR0aW5nIElEcyBvZiBhbGwgJyR7bmFtZX0nIHByb2Nlc3Nlc2ApO1xuICBpZiAoIXRoaXMuaXNWYWxpZENsYXNzKG5hbWUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb2Nlc3MgbmFtZTogJyR7bmFtZX0nYCk7XG4gIH1cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzEzNTY3XG4gIGlmIChhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPj0gMjMpIHtcbiAgICBpZiAoIV8uaXNCb29sZWFuKHRoaXMuX2lzUGdyZXBBdmFpbGFibGUpKSB7XG4gICAgICAvLyBwZ3JlcCBpcyBpbiBwcmlvcml0eSwgc2luY2UgcGlkb2YgaGFzIGJlZW4gcmVwb3J0ZWQgb2YgaGF2aW5nIGJ1Z3Mgb24gc29tZSBwbGF0Zm9ybXNcbiAgICAgIGNvbnN0IHBncmVwT3V0cHV0ID0gXy50cmltKGF3YWl0IHRoaXMuc2hlbGwoWydwZ3JlcCAtLWhlbHA7IGVjaG8gJD8nXSkpO1xuICAgICAgdGhpcy5faXNQZ3JlcEF2YWlsYWJsZSA9IHBhcnNlSW50KF8ubGFzdChwZ3JlcE91dHB1dC5zcGxpdCgvXFxzKy8pKSwgMTApID09PSAwO1xuICAgICAgaWYgKHRoaXMuX2lzUGdyZXBBdmFpbGFibGUpIHtcbiAgICAgICAgdGhpcy5fY2FuUGdyZXBVc2VGdWxsQ21kTGluZVNlYXJjaCA9IC9eLWZcXGIvbS50ZXN0KHBncmVwT3V0cHV0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2lzUGlkb2ZBdmFpbGFibGUgPSBwYXJzZUludChhd2FpdCB0aGlzLnNoZWxsKFsncGlkb2YgLS1oZWxwID4gL2Rldi9udWxsOyBlY2hvICQ/J10pLCAxMCkgPT09IDA7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLl9pc1BncmVwQXZhaWxhYmxlIHx8IHRoaXMuX2lzUGlkb2ZBdmFpbGFibGUpIHtcbiAgICAgIGNvbnN0IHNoZWxsQ29tbWFuZCA9IHRoaXMuX2lzUGdyZXBBdmFpbGFibGVcbiAgICAgICAgPyAodGhpcy5fY2FuUGdyZXBVc2VGdWxsQ21kTGluZVNlYXJjaFxuICAgICAgICAgID8gWydwZ3JlcCcsICctZicsIF8uZXNjYXBlUmVnRXhwKGAoW1s6Ymxhbms6XV18Xikke25hbWV9KFtbOmJsYW5rOl1dfCQpYCldXG4gICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzEzODcyXG4gICAgICAgICAgOiBbYHBncmVwIF4ke18uZXNjYXBlUmVnRXhwKG5hbWUuc2xpY2UoLU1BWF9QR1JFUF9QQVRURVJOX0xFTikpfSQgYCArXG4gICAgICAgICAgICAgIGB8fCBwZ3JlcCBeJHtfLmVzY2FwZVJlZ0V4cChuYW1lLnNsaWNlKDAsIE1BWF9QR1JFUF9QQVRURVJOX0xFTikpfSRgXSlcbiAgICAgICAgOiBbJ3BpZG9mJywgbmFtZV07XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gKGF3YWl0IHRoaXMuc2hlbGwoc2hlbGxDb21tYW5kKSlcbiAgICAgICAgICAuc3BsaXQoL1xccysvKVxuICAgICAgICAgIC5tYXAoKHgpID0+IHBhcnNlSW50KHgsIDEwKSlcbiAgICAgICAgICAuZmlsdGVyKCh4KSA9PiBfLmlzSW50ZWdlcih4KSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGVycm9yIGNvZGUgMSBpcyByZXR1cm5lZCBpZiB0aGUgdXRpbGl0eSBkaWQgbm90IGZpbmQgYW55IHByb2Nlc3Nlc1xuICAgICAgICAvLyB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAgICAgIGlmIChlLmNvZGUgIT09IDEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBleHRyYWN0IHByb2Nlc3MgSUQgb2YgJyR7bmFtZX0nOiAke2UubWVzc2FnZX1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXy5pbmNsdWRlcyhlLnN0ZGVyciB8fCBlLnN0ZG91dCwgJ3N5bnRheCBlcnJvcicpKSB7XG4gICAgICAgICAgbG9nLndhcm4oYEdvdCBhbiB1bmV4cGVjdGVkIHJlc3BvbnNlIGZyb20gdGhlIHNoZWxsIGludGVycHJldGVyOiAke2Uuc3RkZXJyIHx8IGUuc3Rkb3V0fWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGxvZy5kZWJ1ZygnVXNpbmcgcHMtYmFzZWQgUElEIGRldGVjdGlvbicpO1xuICBjb25zdCBzdGRvdXQgPSBhd2FpdCB0aGlzLmxpc3RQcm9jZXNzU3RhdHVzKCk7XG4gIGNvbnN0IHRpdGxlTWF0Y2ggPSBQU19USVRMRV9QQVRURVJOLmV4ZWMoc3Rkb3V0KTtcbiAgaWYgKCF0aXRsZU1hdGNoKSB7XG4gICAgbG9nLmRlYnVnKHN0ZG91dCk7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZXh0cmFjdCBQSUQgb2YgJyR7bmFtZX0nIGZyb20gcHMgb3V0cHV0YCk7XG4gIH1cbiAgY29uc3QgYWxsVGl0bGVzID0gdGl0bGVNYXRjaFsxXS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgY29uc3QgcGlkSW5kZXggPSBhbGxUaXRsZXMuaW5kZXhPZihQSURfQ09MVU1OX1RJVExFKTtcbiAgY29uc3QgcGlkcyA9IFtdO1xuICBjb25zdCBwcm9jZXNzTmFtZVJlZ2V4ID0gbmV3IFJlZ0V4cChgXiguKlxcXFxiXFxcXGQrXFxcXGIuKlxcXFxiJHtfLmVzY2FwZVJlZ0V4cChuYW1lKX1cXFxcYi4qKSRgLCAnZ20nKTtcbiAgbGV0IG1hdGNoZWRMaW5lO1xuICB3aGlsZSAoKG1hdGNoZWRMaW5lID0gcHJvY2Vzc05hbWVSZWdleC5leGVjKHN0ZG91dCkpKSB7XG4gICAgY29uc3QgaXRlbXMgPSBtYXRjaGVkTGluZVsxXS50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICBpZiAocGlkSW5kZXggPj0gYWxsVGl0bGVzLmxlbmd0aCB8fCBpc05hTihpdGVtc1twaWRJbmRleF0pKSB7XG4gICAgICBsb2cuZGVidWcoc3Rkb3V0KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGV4dHJhY3QgUElEIG9mICcke25hbWV9JyBmcm9tICcke21hdGNoZWRMaW5lWzFdLnRyaW0oKX0nYCk7XG4gICAgfVxuICAgIHBpZHMucHVzaChwYXJzZUludChpdGVtc1twaWRJbmRleF0sIDEwKSk7XG4gIH1cbiAgcmV0dXJuIHBpZHM7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgbGlzdCBvZiBwcm9jZXNzIGlkcyBmb3IgdGhlIHBhcnRpY3VsYXIgcHJvY2VzcyBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgLSBUaGUgcGFydCBvZiBwcm9jZXNzIG5hbWUuXG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn0gVGhlIGxpc3Qgb2YgbWF0Y2hlZCBwcm9jZXNzIElEcyBvciBhbiBlbXB0eSBsaXN0LlxuICovXG5tZXRob2RzLmtpbGxQcm9jZXNzZXNCeU5hbWUgPSBhc3luYyBmdW5jdGlvbiBraWxsUHJvY2Vzc2VzQnlOYW1lIChuYW1lKSB7XG4gIHRyeSB7XG4gICAgbG9nLmRlYnVnKGBBdHRlbXB0aW5nIHRvIGtpbGwgYWxsICR7bmFtZX0gcHJvY2Vzc2VzYCk7XG4gICAgY29uc3QgcGlkcyA9IGF3YWl0IHRoaXMuZ2V0UElEc0J5TmFtZShuYW1lKTtcbiAgICBpZiAoXy5pc0VtcHR5KHBpZHMpKSB7XG4gICAgICBsb2cuaW5mbyhgTm8gJyR7bmFtZX0nIHByb2Nlc3MgaGFzIGJlZW4gZm91bmRgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgQi5hbGwocGlkcy5tYXAoKHApID0+IHRoaXMua2lsbFByb2Nlc3NCeVBJRChwKSkpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGtpbGwgJHtuYW1lfSBwcm9jZXNzZXMuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBLaWxsIHRoZSBwYXJ0aWN1bGFyIHByb2Nlc3Mgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICogVGhlIGN1cnJlbnQgdXNlciBpcyBhdXRvbWF0aWNhbGx5IHN3aXRjaGVkIHRvIHJvb3QgaWYgbmVjZXNzYXJ5IGluIG9yZGVyXG4gKiB0byBwcm9wZXJseSBraWxsIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gcGlkIC0gVGhlIElEIG9mIHRoZSBwcm9jZXNzIHRvIGJlIGtpbGxlZC5cbiAqIEB0aHJvd3Mge0Vycm9yfSBJZiB0aGUgcHJvY2VzcyBjYW5ub3QgYmUga2lsbGVkLlxuICovXG5tZXRob2RzLmtpbGxQcm9jZXNzQnlQSUQgPSBhc3luYyBmdW5jdGlvbiBraWxsUHJvY2Vzc0J5UElEIChwaWQpIHtcbiAgbG9nLmRlYnVnKGBBdHRlbXB0aW5nIHRvIGtpbGwgcHJvY2VzcyAke3BpZH1gKTtcbiAgY29uc3Qgbm9Qcm9jZXNzRmxhZyA9ICdObyBzdWNoIHByb2Nlc3MnO1xuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHRoZSBwcm9jZXNzIGV4aXN0cyBhbmQgdGhyb3cgYW4gZXhjZXB0aW9uIG90aGVyd2lzZVxuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydraWxsJywgcGlkXSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoXy5pbmNsdWRlcyhlLnN0ZGVyciwgbm9Qcm9jZXNzRmxhZykpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFfLmluY2x1ZGVzKGUuc3RkZXJyLCAnT3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQnKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgbG9nLmluZm8oYENhbm5vdCBraWxsIFBJRCAke3BpZH0gZHVlIHRvIGluc3VmZmljaWVudCBwZXJtaXNzaW9ucy4gUmV0cnlpbmcgYXMgcm9vdGApO1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCB0aGlzLnNoZWxsKFsna2lsbCcsIHBpZF0sIHtcbiAgICAgICAgcHJpdmlsZWdlZDogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZTEpIHtcbiAgICAgIGlmIChfLmluY2x1ZGVzKGUxLnN0ZGVyciwgbm9Qcm9jZXNzRmxhZykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTE7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEJyb2FkY2FzdCBwcm9jZXNzIGtpbGxpbmcgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbnRlbnQgLSBUaGUgbmFtZSBvZiB0aGUgaW50ZW50IHRvIGJyb2FkY2FzdCB0by5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9jZXNzTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBraWxsZWQgcHJvY2Vzcy5cbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiB0aGUgcHJvY2VzcyB3YXMgbm90IGtpbGxlZC5cbiAqL1xubWV0aG9kcy5icm9hZGNhc3RQcm9jZXNzRW5kID0gYXN5bmMgZnVuY3Rpb24gYnJvYWRjYXN0UHJvY2Vzc0VuZCAoaW50ZW50LCBwcm9jZXNzTmFtZSkge1xuICAvLyBzdGFydCB0aGUgYnJvYWRjYXN0IHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gZmluaXNoLlxuICB0aGlzLmJyb2FkY2FzdChpbnRlbnQpO1xuICAvLyB3YWl0IGZvciB0aGUgcHJvY2VzcyB0byBlbmRcbiAgbGV0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgbGV0IHRpbWVvdXRNcyA9IDQwMDAwO1xuICB0cnkge1xuICAgIHdoaWxlICgoRGF0ZS5ub3coKSAtIHN0YXJ0KSA8IHRpbWVvdXRNcykge1xuICAgICAgaWYgKGF3YWl0IHRoaXMucHJvY2Vzc0V4aXN0cyhwcm9jZXNzTmFtZSkpIHtcbiAgICAgICAgLy8gY29vbCBkb3duXG4gICAgICAgIGF3YWl0IHNsZWVwKDQwMCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoYFByb2Nlc3MgbmV2ZXIgZGllZCB3aXRoaW4gJHt0aW1lb3V0TXN9IG1zYCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVuYWJsZSB0byBicm9hZGNhc3QgcHJvY2VzcyBlbmQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBCcm9hZGNhc3QgYSBtZXNzYWdlIHRvIHRoZSBnaXZlbiBpbnRlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGludGVudCAtIFRoZSBuYW1lIG9mIHRoZSBpbnRlbnQgdG8gYnJvYWRjYXN0IHRvLlxuICogQHRocm93cyB7ZXJyb3J9IElmIGludGVudCBuYW1lIGlzIG5vdCBhIHZhbGlkIGNsYXNzIG5hbWUuXG4gKi9cbm1ldGhvZHMuYnJvYWRjYXN0ID0gYXN5bmMgZnVuY3Rpb24gYnJvYWRjYXN0IChpbnRlbnQpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWRDbGFzcyhpbnRlbnQpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGludGVudCAke2ludGVudH1gKTtcbiAgfVxuICBsb2cuZGVidWcoYEJyb2FkY2FzdGluZzogJHtpbnRlbnR9YCk7XG4gIGF3YWl0IHRoaXMuc2hlbGwoWydhbScsICdicm9hZGNhc3QnLCAnLWEnLCBpbnRlbnRdKTtcbn07XG5cbi8qKlxuICogS2lsbCBBbmRyb2lkIGluc3RydW1lbnRzIGlmIHRoZXkgYXJlIGN1cnJlbnRseSBydW5uaW5nLlxuICovXG5tZXRob2RzLmVuZEFuZHJvaWRDb3ZlcmFnZSA9IGFzeW5jIGZ1bmN0aW9uIGVuZEFuZHJvaWRDb3ZlcmFnZSAoKSB7XG4gIGlmICh0aGlzLmluc3RydW1lbnRQcm9jICYmIHRoaXMuaW5zdHJ1bWVudFByb2MuaXNSdW5uaW5nKSB7XG4gICAgYXdhaXQgdGhpcy5pbnN0cnVtZW50UHJvYy5zdG9wKCk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zdHJ1bWVudCB0aGUgcGFydGljdWxhciBhY3Rpdml0eS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGtnIC0gVGhlIG5hbWUgb2YgdGhlIHBhY2thZ2UgdG8gYmUgaW5zdHJ1bWVudGVkLlxuICogQHBhcmFtIHtzdHJpbmd9IGFjdGl2aXR5IC0gVGhlIG5hbWUgb2YgdGhlIG1haW4gYWN0aXZpdHkgaW4gdGhpcyBwYWNrYWdlLlxuICogQHBhcmFtIHtzdHJpbmd9IGluc3RydW1lbnRXaXRoIC0gVGhlIG5hbWUgb2YgdGhlIHBhY2thZ2UgdG8gaW5zdHJ1bWVudFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGFjdGl2aXR5IHdpdGguXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgYW55IGV4Y2VwdGlvbiBpcyByZXBvcnRlZCBieSBhZGIgc2hlbGwuXG4gKi9cbm1ldGhvZHMuaW5zdHJ1bWVudCA9IGFzeW5jIGZ1bmN0aW9uIGluc3RydW1lbnQgKHBrZywgYWN0aXZpdHksIGluc3RydW1lbnRXaXRoKSB7XG4gIGlmIChhY3Rpdml0eVswXSAhPT0gJy4nKSB7XG4gICAgcGtnID0gJyc7XG4gIH1cbiAgbGV0IHBrZ0FjdGl2aXR5ID0gKHBrZyArIGFjdGl2aXR5KS5yZXBsYWNlKC9cXC4rL2csICcuJyk7IC8vIEZpeCBwa2cuLmFjdGl2aXR5IGVycm9yXG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFtcbiAgICAnYW0nLCAnaW5zdHJ1bWVudCcsXG4gICAgJy1lJywgJ21haW5fYWN0aXZpdHknLFxuICAgIHBrZ0FjdGl2aXR5LFxuICAgIGluc3RydW1lbnRXaXRoLFxuICBdKTtcbiAgaWYgKHN0ZG91dC5pbmRleE9mKCdFeGNlcHRpb24nKSAhPT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gZXhjZXB0aW9uIGR1cmluZyBpbnN0cnVtZW50YXRpb24uIE9yaWdpbmFsIGVycm9yICR7c3Rkb3V0LnNwbGl0KCdcXG4nKVswXX1gKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDb2xsZWN0IEFuZHJvaWQgY292ZXJhZ2UgYnkgaW5zdHJ1bWVudGluZyB0aGUgcGFydGljdWxhciBhY3Rpdml0eS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaW5zdHJ1bWVudENsYXNzIC0gVGhlIG5hbWUgb2YgdGhlIGluc3RydW1lbnRhdGlvbiBjbGFzcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB3YWl0UGtnIC0gVGhlIG5hbWUgb2YgdGhlIHBhY2thZ2UgdG8gYmUgaW5zdHJ1bWVudGVkLlxuICogQHBhcmFtIHtzdHJpbmd9IHdhaXRBY3Rpdml0eSAtIFRoZSBuYW1lIG9mIHRoZSBtYWluIGFjdGl2aXR5IGluIHRoaXMgcGFja2FnZS5cbiAqXG4gKiBAcmV0dXJuIHtwcm9taXNlfSBUaGUgcHJvbWlzZSBpcyBzdWNjZXNzZnVsbHkgcmVzb2x2ZWQgaWYgdGhlIGluc3RydW1lbnRhdGlvbiBzdGFydHNcbiAqICAgICAgICAgICAgICAgICAgIHdpdGhvdXQgZXJyb3JzLlxuICovXG5tZXRob2RzLmFuZHJvaWRDb3ZlcmFnZSA9IGFzeW5jIGZ1bmN0aW9uIGFuZHJvaWRDb3ZlcmFnZSAoaW5zdHJ1bWVudENsYXNzLCB3YWl0UGtnLCB3YWl0QWN0aXZpdHkpIHtcbiAgaWYgKCF0aGlzLmlzVmFsaWRDbGFzcyhpbnN0cnVtZW50Q2xhc3MpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGNsYXNzICR7aW5zdHJ1bWVudENsYXNzfWApO1xuICB9XG4gIHJldHVybiBhd2FpdCBuZXcgQihhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgbGV0IGFyZ3MgPSB0aGlzLmV4ZWN1dGFibGUuZGVmYXVsdEFyZ3NcbiAgICAgIC5jb25jYXQoWydzaGVsbCcsICdhbScsICdpbnN0cnVtZW50JywgJy1lJywgJ2NvdmVyYWdlJywgJ3RydWUnLCAnLXcnXSlcbiAgICAgIC5jb25jYXQoW2luc3RydW1lbnRDbGFzc10pO1xuICAgIGxvZy5kZWJ1ZyhgQ29sbGVjdGluZyBjb3ZlcmFnZSBkYXRhIHdpdGg6ICR7W3RoaXMuZXhlY3V0YWJsZS5wYXRoXS5jb25jYXQoYXJncykuam9pbignICcpfWApO1xuICAgIHRyeSB7XG4gICAgICAvLyBhbSBpbnN0cnVtZW50IHJ1bnMgZm9yIHRoZSBsaWZlIG9mIHRoZSBhcHAgcHJvY2Vzcy5cbiAgICAgIHRoaXMuaW5zdHJ1bWVudFByb2MgPSBuZXcgU3ViUHJvY2Vzcyh0aGlzLmV4ZWN1dGFibGUucGF0aCwgYXJncyk7XG4gICAgICBhd2FpdCB0aGlzLmluc3RydW1lbnRQcm9jLnN0YXJ0KDApO1xuICAgICAgdGhpcy5pbnN0cnVtZW50UHJvYy5vbignb3V0cHV0JywgKHN0ZG91dCwgc3RkZXJyKSA9PiB7XG4gICAgICAgIGlmIChzdGRlcnIpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgdG8gcnVuIGluc3RydW1lbnRhdGlvbi4gT3JpZ2luYWwgZXJyb3I6ICR7c3RkZXJyfWApKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBhd2FpdCB0aGlzLndhaXRGb3JBY3Rpdml0eSh3YWl0UGtnLCB3YWl0QWN0aXZpdHkpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoYEFuZHJvaWQgY292ZXJhZ2UgZmFpbGVkLiBPcmlnaW5hbCBlcnJvcjogJHtlLm1lc3NhZ2V9YCkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcGFydGljdWxhciBwcm9wZXJ0eSBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LiBUaGlzIG5hbWUgc2hvdWxkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBrbm93biB0byBfYWRiIHNoZWxsIGdldHByb3BfIHRvb2wuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgdmFsdWUgb2YgdGhlIGdpdmVuIHByb3BlcnR5LlxuICovXG5tZXRob2RzLmdldERldmljZVByb3BlcnR5ID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlUHJvcGVydHkgKHByb3BlcnR5KSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZ2V0cHJvcCcsIHByb3BlcnR5XSk7XG4gIGxldCB2YWwgPSBzdGRvdXQudHJpbSgpO1xuICBsb2cuZGVidWcoYEN1cnJlbnQgZGV2aWNlIHByb3BlcnR5ICcke3Byb3BlcnR5fSc6ICR7dmFsfWApO1xuICByZXR1cm4gdmFsO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7b2JqZWN0fSBzZXRQcm9wT3B0c1xuICogQHByb3BlcnR5IHtib29sZWFufSBwcml2aWxlZ2VkIC0gRG8gd2UgcnVuIHNldFByb3AgYXMgYSBwcml2aWxlZ2VkIGNvbW1hbmQ/IERlZmF1bHQgdHJ1ZS5cbiAqL1xuXG4vKipcbiAqIFNldCB0aGUgcGFydGljdWxhciBwcm9wZXJ0eSBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IC0gVGhlIG5hbWUgb2YgdGhlIHByb3BlcnR5LiBUaGlzIG5hbWUgc2hvdWxkXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBrbm93biB0byBfYWRiIHNoZWxsIHNldHByb3BfIHRvb2wuXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsIC0gVGhlIG5ldyBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEBwYXJhbSB7c2V0UHJvcE9wdHN9IG9wdHNcbiAqXG4gKiBAdGhyb3dzIHtlcnJvcn0gSWYgX3NldHByb3BfIHV0aWxpdHkgZmFpbHMgdG8gY2hhbmdlIHByb3BlcnR5IHZhbHVlLlxuICovXG5tZXRob2RzLnNldERldmljZVByb3BlcnR5ID0gYXN5bmMgZnVuY3Rpb24gc2V0RGV2aWNlUHJvcGVydHkgKHByb3AsIHZhbCwgb3B0cyA9IHt9KSB7XG4gIGNvbnN0IHtwcml2aWxlZ2VkID0gdHJ1ZX0gPSBvcHRzO1xuICBsb2cuZGVidWcoYFNldHRpbmcgZGV2aWNlIHByb3BlcnR5ICcke3Byb3B9JyB0byAnJHt2YWx9J2ApO1xuICBhd2FpdCB0aGlzLnNoZWxsKFsnc2V0cHJvcCcsIHByb3AsIHZhbF0sIHtcbiAgICBwcml2aWxlZ2VkLFxuICB9KTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IHN5c3RlbSBsYW5ndWFnZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlU3lzTGFuZ3VhZ2UgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VTeXNMYW5ndWFnZSAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdwZXJzaXN0LnN5cy5sYW5ndWFnZScpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEN1cnJlbnQgY291bnRyeSBuYW1lIG9uIHRoZSBkZXZpY2UgdW5kZXIgdGVzdC5cbiAqL1xubWV0aG9kcy5nZXREZXZpY2VTeXNDb3VudHJ5ID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlU3lzQ291bnRyeSAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdwZXJzaXN0LnN5cy5jb3VudHJ5Jyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBzeXN0ZW0gbG9jYWxlIG5hbWUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVN5c0xvY2FsZSA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZVN5c0xvY2FsZSAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdwZXJzaXN0LnN5cy5sb2NhbGUnKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IHByb2R1Y3QgbGFuZ3VhZ2UgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlUHJvZHVjdExhbmd1YWdlID0gYXN5bmMgZnVuY3Rpb24gZ2V0RGV2aWNlUHJvZHVjdExhbmd1YWdlICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3JvLnByb2R1Y3QubG9jYWxlLmxhbmd1YWdlJyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gQ3VycmVudCBwcm9kdWN0IGNvdW50cnkgbmFtZSBvbiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlUHJvZHVjdENvdW50cnkgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VQcm9kdWN0Q291bnRyeSAoKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmdldERldmljZVByb3BlcnR5KCdyby5wcm9kdWN0LmxvY2FsZS5yZWdpb24nKTtcbn07XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfSBDdXJyZW50IHByb2R1Y3QgbG9jYWxlIG5hbWUgb24gdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldERldmljZVByb2R1Y3RMb2NhbGUgPSBhc3luYyBmdW5jdGlvbiBnZXREZXZpY2VQcm9kdWN0TG9jYWxlICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3JvLnByb2R1Y3QubG9jYWxlJyk7XG59O1xuXG4vKipcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIG1vZGVsIG5hbWUgb2YgdGhlIGRldmljZSB1bmRlciB0ZXN0LlxuICovXG5tZXRob2RzLmdldE1vZGVsID0gYXN5bmMgZnVuY3Rpb24gZ2V0TW9kZWwgKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncm8ucHJvZHVjdC5tb2RlbCcpO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBtYW51ZmFjdHVyZXIgbmFtZSBvZiB0aGUgZGV2aWNlIHVuZGVyIHRlc3QuXG4gKi9cbm1ldGhvZHMuZ2V0TWFudWZhY3R1cmVyID0gYXN5bmMgZnVuY3Rpb24gZ2V0TWFudWZhY3R1cmVyICgpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0RGV2aWNlUHJvcGVydHkoJ3JvLnByb2R1Y3QubWFudWZhY3R1cmVyJyk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBzY3JlZW4gc2l6ZS5cbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9IERldmljZSBzY3JlZW4gc2l6ZSBhcyBzdHJpbmcgaW4gZm9ybWF0ICdXeEgnIG9yXG4gKiAgICAgICAgICAgICAgICAgIF9udWxsXyBpZiBpdCBjYW5ub3QgYmUgZGV0ZXJtaW5lZC5cbiAqL1xubWV0aG9kcy5nZXRTY3JlZW5TaXplID0gYXN5bmMgZnVuY3Rpb24gZ2V0U2NyZWVuU2l6ZSAoKSB7XG4gIGxldCBzdGRvdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnd20nLCAnc2l6ZSddKTtcbiAgbGV0IHNpemUgPSBuZXcgUmVnRXhwKC9QaHlzaWNhbCBzaXplOiAoW15cXHI/XFxuXSspKi9nKS5leGVjKHN0ZG91dCk7XG4gIGlmIChzaXplICYmIHNpemUubGVuZ3RoID49IDIpIHtcbiAgICByZXR1cm4gc2l6ZVsxXS50cmltKCk7XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBzY3JlZW4gZGVuc2l0eSBpbiBkcGlcbiAqXG4gKiBAcmV0dXJuIHs/bnVtYmVyfSBEZXZpY2Ugc2NyZWVuIGRlbnNpdHkgYXMgYSBudW1iZXIgb3IgX251bGxfIGlmIGl0XG4gKiAgICAgICAgICAgICAgICAgIGNhbm5vdCBiZSBkZXRlcm1pbmVkXG4gKi9cbm1ldGhvZHMuZ2V0U2NyZWVuRGVuc2l0eSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNjcmVlbkRlbnNpdHkgKCkge1xuICBsZXQgc3Rkb3V0ID0gYXdhaXQgdGhpcy5zaGVsbChbJ3dtJywgJ2RlbnNpdHknXSk7XG4gIGxldCBkZW5zaXR5ID0gbmV3IFJlZ0V4cCgvUGh5c2ljYWwgZGVuc2l0eTogKFteXFxyP1xcbl0rKSovZykuZXhlYyhzdGRvdXQpO1xuICBpZiAoZGVuc2l0eSAmJiBkZW5zaXR5Lmxlbmd0aCA+PSAyKSB7XG4gICAgbGV0IGRlbnNpdHlOdW1iZXIgPSBwYXJzZUludChkZW5zaXR5WzFdLnRyaW0oKSwgMTApO1xuICAgIHJldHVybiBpc05hTihkZW5zaXR5TnVtYmVyKSA/IG51bGwgOiBkZW5zaXR5TnVtYmVyO1xuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuLyoqXG4gKiBTZXR1cCBIVFRQIHByb3h5IGluIGRldmljZSBnbG9iYWwgc2V0dGluZ3MuXG4gKiBSZWFkIGh0dHBzOi8vYW5kcm9pZC5nb29nbGVzb3VyY2UuY29tL3BsYXRmb3JtL2ZyYW1ld29ya3MvYmFzZS8rL2FuZHJvaWQtOS4wLjBfcjIxL2NvcmUvamF2YS9hbmRyb2lkL3Byb3ZpZGVyL1NldHRpbmdzLmphdmEgZm9yIGVhY2ggcHJvcGVydHlcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJveHlIb3N0IC0gVGhlIGhvc3QgbmFtZSBvZiB0aGUgcHJveHkuXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IHByb3h5UG9ydCAtIFRoZSBwb3J0IG51bWJlciB0byBiZSBzZXQuXG4gKi9cbm1ldGhvZHMuc2V0SHR0cFByb3h5ID0gYXN5bmMgZnVuY3Rpb24gc2V0SHR0cFByb3h5IChwcm94eUhvc3QsIHByb3h5UG9ydCkge1xuICBsZXQgcHJveHkgPSBgJHtwcm94eUhvc3R9OiR7cHJveHlQb3J0fWA7XG4gIGlmIChfLmlzVW5kZWZpbmVkKHByb3h5SG9zdCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbGwgdG8gc2V0SHR0cFByb3h5IG1ldGhvZCB3aXRoIHVuZGVmaW5lZCBwcm94eV9ob3N0OiAke3Byb3h5fWApO1xuICB9XG4gIGlmIChfLmlzVW5kZWZpbmVkKHByb3h5UG9ydCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYENhbGwgdG8gc2V0SHR0cFByb3h5IG1ldGhvZCB3aXRoIHVuZGVmaW5lZCBwcm94eV9wb3J0ICR7cHJveHl9YCk7XG4gIH1cblxuICBjb25zdCBodHRwUHJveHlTZXR0aW5zID0gW1xuICAgIFsnaHR0cF9wcm94eScsIHByb3h5XSxcbiAgICBbJ2dsb2JhbF9odHRwX3Byb3h5X2hvc3QnLCBwcm94eUhvc3RdLFxuICAgIFsnZ2xvYmFsX2h0dHBfcHJveHlfcG9ydCcsIHByb3h5UG9ydF1cbiAgXTtcbiAgZm9yIChjb25zdCBbc2V0dGluZ0tleSwgc2V0dGluZ1ZhbHVlXSBvZiBodHRwUHJveHlTZXR0aW5zKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRTZXR0aW5nKCdnbG9iYWwnLCBzZXR0aW5nS2V5LCBzZXR0aW5nVmFsdWUpO1xuICB9XG59O1xuXG4vKipcbiAqIERlbGV0ZSBIVFRQIHByb3h5IGluIGRldmljZSBnbG9iYWwgc2V0dGluZ3MuXG4gKiBSZWJvb3RpbmcgdGhlIHRlc3QgZGV2aWNlIGlzIG5lY2Vzc2FyeSB0byBhcHBseSB0aGUgY2hhbmdlLlxuICovXG5tZXRob2RzLmRlbGV0ZUh0dHBQcm94eSA9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUh0dHBQcm94eSAoKSB7XG4gIGNvbnN0IGh0dHBQcm94eVNldHRpbnMgPSBbXG4gICAgJ2h0dHBfcHJveHknLFxuICAgICdnbG9iYWxfaHR0cF9wcm94eV9ob3N0JyxcbiAgICAnZ2xvYmFsX2h0dHBfcHJveHlfcG9ydCcsXG4gICAgJ2dsb2JhbF9odHRwX3Byb3h5X2V4Y2x1c2lvbl9saXN0JyAvLyBgZ2xvYmFsX2h0dHBfcHJveHlfZXhjbHVzaW9uX2xpc3Q9YCB3YXMgZ2VuZXJhdGVkIGJ5IGBzZXR0aW5ncyBnbG9iYWwgaHR0b19wcm94eSB4eHh4YFxuICBdO1xuICBmb3IgKGNvbnN0IHNldHRpbmcgb2YgaHR0cFByb3h5U2V0dGlucykge1xuICAgIGF3YWl0IHRoaXMuc2hlbGwoWydzZXR0aW5ncycsICdkZWxldGUnLCAnZ2xvYmFsJywgc2V0dGluZ10pO1xuICB9XG59O1xuXG4vKipcbiAqIFNldCBkZXZpY2UgcHJvcGVydHkuXG4gKiBbYW5kcm9pZC5wcm92aWRlci5TZXR0aW5nc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuaHRtbH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZXNwYWNlIC0gb25lIG9mIHtzeXN0ZW0sIHNlY3VyZSwgZ2xvYmFsfSwgY2FzZS1pbnNlbnNpdGl2ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXR0aW5nIC0gcHJvcGVydHkgbmFtZS5cbiAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcn0gdmFsdWUgLSBwcm9wZXJ0eSB2YWx1ZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gY29tbWFuZCBvdXRwdXQuXG4gKi9cbm1ldGhvZHMuc2V0U2V0dGluZyA9IGFzeW5jIGZ1bmN0aW9uIHNldFNldHRpbmcgKG5hbWVzcGFjZSwgc2V0dGluZywgdmFsdWUpIHtcbiAgcmV0dXJuIGF3YWl0IHRoaXMuc2hlbGwoWydzZXR0aW5ncycsICdwdXQnLCBuYW1lc3BhY2UsIHNldHRpbmcsIHZhbHVlXSk7XG59O1xuXG4vKipcbiAqIEdldCBkZXZpY2UgcHJvcGVydHkuXG4gKiBbYW5kcm9pZC5wcm92aWRlci5TZXR0aW5nc117QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcmVmZXJlbmNlL2FuZHJvaWQvcHJvdmlkZXIvU2V0dGluZ3MuaHRtbH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZXNwYWNlIC0gb25lIG9mIHtzeXN0ZW0sIHNlY3VyZSwgZ2xvYmFsfSwgY2FzZS1pbnNlbnNpdGl2ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzZXR0aW5nIC0gcHJvcGVydHkgbmFtZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gcHJvcGVydHkgdmFsdWUuXG4gKi9cbm1ldGhvZHMuZ2V0U2V0dGluZyA9IGFzeW5jIGZ1bmN0aW9uIGdldFNldHRpbmcgKG5hbWVzcGFjZSwgc2V0dGluZykge1xuICByZXR1cm4gYXdhaXQgdGhpcy5zaGVsbChbJ3NldHRpbmdzJywgJ2dldCcsIG5hbWVzcGFjZSwgc2V0dGluZ10pO1xufTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYGFkYiBidWdyZXBvcnRgIGNvbW1hbmQgb3V0cHV0LiBUaGlzXG4gKiBvcGVyYXRpb24gbWF5IHRha2UgdXAgdG8gc2V2ZXJhbCBtaW51dGVzLlxuICpcbiAqIEBwYXJhbSB7P251bWJlcn0gdGltZW91dCBbMTIwMDAwXSAtIENvbW1hbmQgdGltZW91dCBpbiBtaWxsaXNlY29uZHNcbiAqIEByZXR1cm5zIHtzdHJpbmd9IENvbW1hbmQgc3Rkb3V0XG4gKi9cbm1ldGhvZHMuYnVncmVwb3J0ID0gYXN5bmMgZnVuY3Rpb24gYnVncmVwb3J0ICh0aW1lb3V0ID0gMTIwMDAwKSB7XG4gIHJldHVybiBhd2FpdCB0aGlzLmFkYkV4ZWMoWydidWdyZXBvcnQnXSwge3RpbWVvdXR9KTtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU2NyZWVucmVjb3JkT3B0aW9uc1xuICogQHByb3BlcnR5IHs/c3RyaW5nfSB2aWRlb1NpemUgLSBUaGUgZm9ybWF0IGlzIHdpZHRoeGhlaWdodC5cbiAqICAgICAgICAgICAgICAgICAgVGhlIGRlZmF1bHQgdmFsdWUgaXMgdGhlIGRldmljZSdzIG5hdGl2ZSBkaXNwbGF5IHJlc29sdXRpb24gKGlmIHN1cHBvcnRlZCksXG4gKiAgICAgICAgICAgICAgICAgIDEyODB4NzIwIGlmIG5vdC4gRm9yIGJlc3QgcmVzdWx0cyxcbiAqICAgICAgICAgICAgICAgICAgdXNlIGEgc2l6ZSBzdXBwb3J0ZWQgYnkgeW91ciBkZXZpY2UncyBBZHZhbmNlZCBWaWRlbyBDb2RpbmcgKEFWQykgZW5jb2Rlci5cbiAqICAgICAgICAgICAgICAgICAgRm9yIGV4YW1wbGUsIFwiMTI4MHg3MjBcIlxuICogQHByb3BlcnR5IHs/Ym9vbGVhbn0gYnVnUmVwb3J0IC0gU2V0IGl0IHRvIGB0cnVlYCBpbiBvcmRlciB0byBkaXNwbGF5IGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gb24gdGhlIHZpZGVvIG92ZXJsYXksXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNoIGFzIGEgdGltZXN0YW1wLCB0aGF0IGlzIGhlbHBmdWwgaW4gdmlkZW9zIGNhcHR1cmVkIHRvIGlsbHVzdHJhdGUgYnVncy5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgb3B0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIHNpbmNlIEFQSSBsZXZlbCAyNyAoQW5kcm9pZCBQKS5cbiAqIEBwcm9wZXJ0eSB7P3N0cmluZ3xudW1iZXJ9IHRpbWVMaW1pdCAtIFRoZSBtYXhpbXVtIHJlY29yZGluZyB0aW1lLCBpbiBzZWNvbmRzLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhlIGRlZmF1bHQgKGFuZCBtYXhpbXVtKSB2YWx1ZSBpcyAxODAgKDMgbWludXRlcykuXG4gKiBAcHJvcGVydHkgez9zdHJpbmd8bnVtYmVyfSBiaXRSYXRlIC0gVGhlIHZpZGVvIGJpdCByYXRlIGZvciB0aGUgdmlkZW8sIGluIG1lZ2FiaXRzIHBlciBzZWNvbmQuXG4gKiAgICAgICAgICAgICAgICBUaGUgZGVmYXVsdCB2YWx1ZSBpcyA0LiBZb3UgY2FuIGluY3JlYXNlIHRoZSBiaXQgcmF0ZSB0byBpbXByb3ZlIHZpZGVvIHF1YWxpdHksXG4gKiAgICAgICAgICAgICAgICBidXQgZG9pbmcgc28gcmVzdWx0cyBpbiBsYXJnZXIgbW92aWUgZmlsZXMuXG4gKi9cblxuLyoqXG4gKiBJbml0aWF0ZSBzY3JlZW5yZWNvcmQgdXRpbGl0eSBvbiB0aGUgZGV2aWNlXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RpbmF0aW9uIC0gRnVsbCBwYXRoIHRvIHRoZSB3cml0YWJsZSBtZWRpYSBmaWxlIGRlc3RpbmF0aW9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbiB0aGUgZGV2aWNlIGZpbGUgc3lzdGVtLlxuICogQHBhcmFtIHs/U2NyZWVucmVjb3JkT3B0aW9uc30gb3B0aW9ucyBbe31dXG4gKiBAcmV0dXJucyB7U3ViUHJvY2Vzc30gc2NyZWVucmVjb3JkIHByb2Nlc3MsIHdoaWNoIGNhbiBiZSB0aGVuIGNvbnRyb2xsZWQgYnkgdGhlIGNsaWVudCBjb2RlXG4gKi9cbm1ldGhvZHMuc2NyZWVucmVjb3JkID0gZnVuY3Rpb24gc2NyZWVucmVjb3JkIChkZXN0aW5hdGlvbiwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGNtZCA9IFsnc2NyZWVucmVjb3JkJ107XG4gIGNvbnN0IHtcbiAgICB2aWRlb1NpemUsXG4gICAgYml0UmF0ZSxcbiAgICB0aW1lTGltaXQsXG4gICAgYnVnUmVwb3J0LFxuICB9ID0gb3B0aW9ucztcbiAgaWYgKHV0aWwuaGFzVmFsdWUodmlkZW9TaXplKSkge1xuICAgIGNtZC5wdXNoKCctLXNpemUnLCB2aWRlb1NpemUpO1xuICB9XG4gIGlmICh1dGlsLmhhc1ZhbHVlKHRpbWVMaW1pdCkpIHtcbiAgICBjbWQucHVzaCgnLS10aW1lLWxpbWl0JywgdGltZUxpbWl0KTtcbiAgfVxuICBpZiAodXRpbC5oYXNWYWx1ZShiaXRSYXRlKSkge1xuICAgIGNtZC5wdXNoKCctLWJpdC1yYXRlJywgYml0UmF0ZSk7XG4gIH1cbiAgaWYgKGJ1Z1JlcG9ydCkge1xuICAgIGNtZC5wdXNoKCctLWJ1Z3JlcG9ydCcpO1xuICB9XG4gIGNtZC5wdXNoKGRlc3RpbmF0aW9uKTtcblxuICBjb25zdCBmdWxsQ21kID0gW1xuICAgIC4uLnRoaXMuZXhlY3V0YWJsZS5kZWZhdWx0QXJncyxcbiAgICAnc2hlbGwnLFxuICAgIC4uLmNtZFxuICBdO1xuICBsb2cuZGVidWcoYEJ1aWxkaW5nIHNjcmVlbnJlY29yZCBwcm9jZXNzIHdpdGggdGhlIGNvbW1hbmQgbGluZTogYWRiICR7dXRpbC5xdW90ZShmdWxsQ21kKX1gKTtcbiAgcmV0dXJuIG5ldyBTdWJQcm9jZXNzKHRoaXMuZXhlY3V0YWJsZS5wYXRoLCBmdWxsQ21kKTtcbn07XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIGZ1bmN0aW9uIHdpdGggdGhlIGdpdmVuIGlucHV0IG1ldGhvZCBjb250ZXh0XG4gKiBhbmQgdGhlbiByZXN0b3JlcyB0aGUgSU1FIHRvIHRoZSBvcmlnaW5hbCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpbWUgLSBWYWxpZCBJTUUgaWRlbnRpZmllclxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gLSBGdW5jdGlvbiB0byBleGVjdXRlXG4gKiBAcmV0dXJucyB7Kn0gVGhlIHJlc3VsdCBvZiB0aGUgZ2l2ZW4gZnVuY3Rpb25cbiAqL1xubWV0aG9kcy5ydW5JbkltZUNvbnRleHQgPSBhc3luYyBmdW5jdGlvbiBydW5JbkltZUNvbnRleHQgKGltZSwgZm4pIHtcbiAgY29uc3Qgb3JpZ2luYWxJbWUgPSBhd2FpdCB0aGlzLmRlZmF1bHRJTUUoKTtcbiAgaWYgKG9yaWdpbmFsSW1lID09PSBpbWUpIHtcbiAgICBsb2cuZGVidWcoYFRoZSBvcmlnaW5hbCBJTUUgaXMgdGhlIHNhbWUgYXMgJyR7aW1lfScuIFRoZXJlIGlzIG5vIG5lZWQgdG8gcmVzZXQgaXRgKTtcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCB0aGlzLmVuYWJsZUlNRShpbWUpO1xuICAgIGF3YWl0IHRoaXMuc2V0SU1FKGltZSk7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzE1OTQzXG4gICAgYXdhaXQgQi5kZWxheSg1MDApO1xuICB9XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IGZuKCk7XG4gIH0gZmluYWxseSB7XG4gICAgaWYgKG9yaWdpbmFsSW1lICE9PSBpbWUpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0SU1FKG9yaWdpbmFsSW1lKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHR6IGRhdGFiYXNlIHRpbWUgem9uZSBmb3JtYXR0ZWQgdGltZXpvbmVcbiAqXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBUWiBkYXRhYmFzZSBUaW1lIFpvbmVzIGZvcm1hdFxuICpcbiAqIEB0aHJvd3Mge2Vycm9yfSBJZiBhbnkgZXhjZXB0aW9uIGlzIHJlcG9ydGVkIGJ5IGFkYiBzaGVsbC5cbiAqL1xubWV0aG9kcy5nZXRUaW1lWm9uZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFRpbWVab25lICgpIHtcbiAgbG9nLmRlYnVnKCdHZXR0aW5nIGN1cnJlbnQgdGltZXpvbmUnKTtcbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXREZXZpY2VQcm9wZXJ0eSgncGVyc2lzdC5zeXMudGltZXpvbmUnKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgRXJyb3IgZ2V0dGluZyB0aW1lem9uZS4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgbGlzdCBvZiBmZWF0dXJlcyBzdXBwb3J0ZWQgYnkgdGhlIGRldmljZSB1bmRlciB0ZXN0XG4gKlxuICogQHJldHVybnMge0FycmF5PHN0cmluZz59IHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBmZWF0dXJlIG5hbWVzIG9yIGFuIGVtcHR5IGxpc3QuXG4gKiBBbiBleGFtcGxlIGFkYiBjb21tYW5kIG91dHB1dDpcbiAqIGBgYFxuICogY21kXG4gKiBsc192MlxuICogZml4ZWRfcHVzaF9ta2RpclxuICogc2hlbGxfdjJcbiAqIGFiYlxuICogc3RhdF92MlxuICogYXBleFxuICogYWJiX2V4ZWNcbiAqIHJlbW91bnRfc2hlbGxcbiAqIGZpeGVkX3B1c2hfc3ltbGlua190aW1lc3RhbXBcbiAqIGBgYFxuICogQHRocm93cyB7RXJyb3J9IGlmIHRoZXJlIHdhcyBhbiBlcnJvciB3aGlsZSByZXRyaWV2aW5nIHRoZSBsaXN0XG4gKi9cbm1ldGhvZHMubGlzdEZlYXR1cmVzID0gYXN5bmMgZnVuY3Rpb24gbGlzdEZlYXR1cmVzICgpIHtcbiAgdGhpcy5fbWVtb2l6ZWRGZWF0dXJlcyA9IHRoaXMuX21lbW9pemVkRmVhdHVyZXNcbiAgICB8fCBfLm1lbW9pemUoYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5hZGJFeGVjKFsnZmVhdHVyZXMnXSksICgpID0+IHRoaXMuY3VyRGV2aWNlSWQpO1xuICB0cnkge1xuICAgIHJldHVybiAoYXdhaXQgdGhpcy5fbWVtb2l6ZWRGZWF0dXJlcygpKVxuICAgICAgLnNwbGl0KC9cXHMrLylcbiAgICAgIC5tYXAoKHgpID0+IHgudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChfLmluY2x1ZGVzKGUuc3RkZXJyLCAndW5rbm93biBjb21tYW5kJykpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgdGhyb3cgZTtcbiAgfVxufTtcblxuLyoqXG4gKiBDaGVja3MgdGhlIHN0YXRlIG9mIHN0cmVhbWVkIGluc3RhbGwgZmVhdHVyZS5cbiAqIFRoaXMgZmVhdHVyZSBhbGxvd3MgdG8gc3BlZWQgdXAgYXBrIGluc3RhbGxhdGlvblxuICogc2luY2UgaXQgZG9lcyBub3QgcmVxdWlyZSB0aGUgb3JpZ2luYWwgYXBrIHRvIGJlIHB1c2hlZCB0b1xuICogdGhlIGRldmljZSB1bmRlciB0ZXN0IGZpcnN0LCB3aGljaCBhbHNvIHNhdmVzIHNwYWNlLlxuICogQWx0aG91Z2gsIGl0IGlzIHJlcXVpcmVkIHRoYXQgYm90aCB0aGUgZGV2aWNlIHVuZGVyIHRlc3RcbiAqIGFuZCB0aGUgYWRiIHNlcnZlciBoYXZlIHRoZSBtZW50aW9uZWQgZnVuY3Rpb25hbGl0eS5cbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW9zcC1taXJyb3IvcGxhdGZvcm1fc3lzdGVtX2NvcmUvYmxvYi9tYXN0ZXIvYWRiL2NsaWVudC9hZGJfaW5zdGFsbC5jcHBcbiAqIGZvciBtb3JlIGRldGFpbHNcbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBmZWF0dXJlIGlzIHN1cHBvcnRlZCBieSBib3RoIGFkYiBhbmQgdGhlXG4gKiBkZXZpY2UgdW5kZXIgdGVzdFxuICovXG5tZXRob2RzLmlzU3RyZWFtZWRJbnN0YWxsU3VwcG9ydGVkID0gYXN5bmMgZnVuY3Rpb24gaXNTdHJlYW1lZEluc3RhbGxTdXBwb3J0ZWQgKCkge1xuICBjb25zdCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtcbiAgcHJvdG8uX2hlbHBPdXRwdXQgPSBwcm90by5faGVscE91dHB1dCB8fCBhd2FpdCB0aGlzLmFkYkV4ZWMoWydoZWxwJ10pO1xuICByZXR1cm4gcHJvdG8uX2hlbHBPdXRwdXQuaW5jbHVkZXMoJy0tc3RyZWFtaW5nJylcbiAgICAmJiAoYXdhaXQgdGhpcy5saXN0RmVhdHVyZXMoKSkuaW5jbHVkZXMoJ2NtZCcpO1xufTtcblxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBpbmNyZW1lbnRhbCBpbnN0YWxsIGZlYXR1cmUgaXMgc3VwcG9ydGVkIGJ5IEFEQi5cbiAqIFJlYWQgaHR0cHM6Ly9kZXZlbG9wZXIuYW5kcm9pZC5jb20vcHJldmlldy9mZWF0dXJlcyNpbmNyZW1lbnRhbFxuICogZm9yIG1vcmUgZGV0YWlscyBvbiBpdC5cbiAqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSBmZWF0dXJlIGlzIHN1cHBvcnRlZCBieSBib3RoIGFkYiBhbmQgdGhlXG4gKiBkZXZpY2UgdW5kZXIgdGVzdFxuICovXG5tZXRob2RzLmlzSW5jcmVtZW50YWxJbnN0YWxsU3VwcG9ydGVkID0gYXN5bmMgZnVuY3Rpb24gaXNJbmNyZW1lbnRhbEluc3RhbGxTdXBwb3J0ZWQgKCkge1xuICBjb25zdCB7YmluYXJ5fSA9IGF3YWl0IHRoaXMuZ2V0VmVyc2lvbigpO1xuICBpZiAoIWJpbmFyeSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdXRpbC5jb21wYXJlVmVyc2lvbnMoYmluYXJ5LnZlcnNpb24sICc+PScsICczMC4wLjEnKVxuICAgICYmIChhd2FpdCB0aGlzLmxpc3RGZWF0dXJlcygpKS5pbmNsdWRlcygnYWJiX2V4ZWMnKTtcbn07XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBsaXN0IG9mIHBhY2thZ2VzIGZyb20gRG96ZSB3aGl0ZWxpc3Qgb24gQW5kcm9pZCA4K1xuICpcbiAqIEByZXR1cm5zIHtBcnJheTxzdHJpbmc+fSBUaGUgbGlzdCBvZiB3aGl0ZWxpc3RlZCBwYWNrYWdlcy4gQW4gZXhhbXBsZSBvdXRwdXQ6XG4gKiBzeXN0ZW0sY29tLmFuZHJvaWQuc2hlbGwsMjAwMFxuICogc3lzdGVtLGNvbS5nb29nbGUuYW5kcm9pZC5jZWxsYnJvYWRjYXN0cmVjZWl2ZXIsMTAxNDNcbiAqIHVzZXIsaW8uYXBwaXVtLnNldHRpbmdzLDEwMTU3XG4gKi9cbm1ldGhvZHMuZ2V0RGV2aWNlSWRsZVdoaXRlbGlzdCA9IGFzeW5jIGZ1bmN0aW9uIGdldERldmljZUlkbGVXaGl0ZWxpc3QgKCkge1xuICBpZiAoYXdhaXQgdGhpcy5nZXRBcGlMZXZlbCgpIDwgMjMpIHtcbiAgICAvLyBEb3plIG1vZGUgaGFzIG9ubHkgYmVlbiBhZGRlZCBzaW5jZSBBbmRyb2lkIDZcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBsb2cuaW5mbygnTGlzdGluZyBwYWNrYWdlcyBpbiBEb3plIHdoaXRlbGlzdCcpO1xuICBjb25zdCBvdXRwdXQgPSBhd2FpdCB0aGlzLnNoZWxsKFsnZHVtcHN5cycsICdkZXZpY2VpZGxlJywgJ3doaXRlbGlzdCddKTtcbiAgcmV0dXJuIF8udHJpbShvdXRwdXQpLnNwbGl0KC9cXG4vKVxuICAgIC5tYXAoKGxpbmUpID0+IF8udHJpbShsaW5lKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pO1xufTtcblxuLyoqXG4gKiBBZGRzIGFuIGV4aXN0aW5nIHBhY2thZ2UocykgaW50byB0aGUgRG96ZSB3aGl0ZWxpc3Qgb24gQW5kcm9pZCA4K1xuICpcbiAqIEBwYXJhbSAgey4uLnN0cmluZ30gcGFja2FnZXMgT25lIG9yIG1vcmUgcGFja2FnZXMgdG8gYWRkLiBJZiB0aGUgcGFja2FnZVxuICogYWxyZWFkeSBleGlzdHMgaW4gdGhlIHdoaXRlbGlzdCB0aGVuIGl0IGlzIG9ubHkgZ29pbmcgdG8gYmUgYWRkZWQgb25jZS5cbiAqIElmIHRoZSBwYWNrYWdlIHdpdGggdGhlIGdpdmVuIG5hbWUgaXMgbm90IGluc3RhbGxlZC9ub3Qga25vd24gdGhlbiBhbiBlcnJvclxuICogd2lsbCBiZSB0aHJvd24uXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gYHRydWVgIGlmIHRoZSBjb21tYW5kIHRvIGFkZCBwYWNrYWdlKHMpIGhhcyBiZWVuIGV4ZWN1dGVkXG4gKi9cbm1ldGhvZHMuYWRkVG9EZXZpY2VJZGxlV2hpdGVsaXN0ID0gYXN5bmMgZnVuY3Rpb24gYWRkVG9EZXZpY2VJZGxlV2hpdGVsaXN0ICguLi5wYWNrYWdlcykge1xuICBpZiAoXy5pc0VtcHR5KHBhY2thZ2VzKSB8fCBhd2FpdCB0aGlzLmdldEFwaUxldmVsKCkgPCAyMykge1xuICAgIC8vIERvemUgbW9kZSBoYXMgb25seSBiZWVuIGFkZGVkIHNpbmNlIEFuZHJvaWQgNlxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxvZy5pbmZvKGBBZGRpbmcgJHt1dGlsLnBsdXJhbGl6ZSgncGFja2FnZScsIHBhY2thZ2VzLmxlbmd0aCl9ICR7SlNPTi5zdHJpbmdpZnkocGFja2FnZXMpfSB0byBEb3plIHdoaXRlbGlzdGApO1xuICBhd2FpdCB0aGlzLnNoZWxsQ2h1bmtzKChwa2cpID0+IFsnZHVtcHN5cycsICdkZXZpY2VpZGxlJywgJ3doaXRlbGlzdCcsIGArJHtwa2d9YF0sIHBhY2thZ2VzKTtcbiAgcmV0dXJuIHRydWU7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtZXRob2RzO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFFBQUEsR0FBQUQsT0FBQTtBQUlBLElBQUFFLEtBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLE9BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLFFBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLEdBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLE9BQUEsR0FBQVAsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFPLFNBQUEsR0FBQVAsT0FBQTtBQUNBLElBQUFRLGFBQUEsR0FBQVIsT0FBQTtBQUNBLElBQUFTLFNBQUEsR0FBQVYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1VLHVCQUF1QixHQUFHLElBQUk7QUFDcEMsTUFBTUMseUJBQXlCLEdBQUcsbUNBQW1DO0FBQ3JFLE1BQU1DLG1CQUFtQixHQUFHLENBQzFCRCx5QkFBeUIsRUFDekIscUJBQXFCLENBQ3RCO0FBQ0QsTUFBTUUscUJBQXFCLEdBQUcsRUFBRTtBQUNoQyxNQUFNQyxzQkFBc0IsR0FBRyxDQUM3Qiw4QkFBOEIsRUFDOUIsMEJBQTBCLEVBQzFCLG1CQUFtQixDQUNwQjtBQUNELE1BQU1DLGdCQUFnQixHQUFHLEtBQUs7QUFDOUIsTUFBTUMseUJBQXlCLEdBQUcsTUFBTTtBQUN4QyxNQUFNQyxnQkFBZ0IsR0FBRyxJQUFJQyxNQUFNLENBQUUsVUFBU0gsZ0JBQWlCLFdBQVVDLHlCQUEwQixTQUFRLEVBQUUsR0FBRyxDQUFDO0FBQ2pILE1BQU1HLGdDQUFnQyxHQUFHLEVBQUU7QUFFM0MsTUFBTUMsT0FBTyxHQUFHLENB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